(function(t){function e(e){for(var o,s,n=e[0],l=e[1],c=e[2],u=0,p=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&p.push(r[s][0]),r[s]=0;for(o in l)Object.prototype.hasOwnProperty.call(l,o)&&(t[o]=l[o]);d&&d(e);while(p.length)p.shift()();return i.push.apply(i,c||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],o=!0,n=1;n<a.length;n++){var l=a[n];0!==r[l]&&(o=!1)}o&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var o={},r={app:0},i=[];function s(e){if(o[e])return o[e].exports;var a=o[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=o,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)s.d(a,o,function(e){return t[e]}.bind(null,o));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var d=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"1d91":function(t,e,a){"use strict";a("3414")},3414:function(t,e,a){},4678:function(t,e,a){var o={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=i(t);return a(e)}function i(t){if(!a.o(o,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return o[t]}r.keys=function(){return Object.keys(o)},r.resolve=i,t.exports=r,r.id="4678"},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var o=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("b-navbar",{attrs:{toggleable:"lg",type:"dark",variant:"dark"}},[a("b-col",{attrs:{cols:"1"}}),a("b-col",{attrs:{cols:"6"}},[a("b-input-group",{staticClass:"noborder"},[a("b-form-select",{attrs:{options:t.options},model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}}),a("b-form-input",{attrs:{id:"ricerca",placeholder:"Search..."},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}}),a("b-button",{on:{click:function(e){t.$router.push({name:t.selected+"Catalog",params:{filter:t.search}}).catch((function(){}))}}},[t._v("Click to Navigate")])],1)],1),a("b-col",{attrs:{cols:"1"}}),[a("div",[a("b-button",{directives:[{name:"b-toggle",rawName:"v-b-toggle.sidebar-right",modifiers:{"sidebar-right":!0}}],attrs:{id:"burgerButton"}},[a("b-img",{attrs:{id:"burger",src:"https://icon-library.com/images/hamburger-menu-icon-png/hamburger-menu-icon-png-2.jpg"}})],1),a("b-sidebar",{attrs:{id:"sidebar-right",title:"Operazioni",right:"",shadow:""},scopedSlots:t._u([{key:"default",fn:function(e){var o=e.hide;return[a("div",{staticClass:"p-3"},[a("nav",{staticClass:"mb-3"},[a("b-nav",{attrs:{vertical:""}},[a("router-link",{staticClass:"nav-link",attrs:{to:"/home"}},[t._v("Home")]),a("router-link",{staticClass:"nav-link",attrs:{to:"/createArticle"}},[t._v("Aggiungi articolo")]),a("router-link",{staticClass:"nav-link",attrs:{to:{name:"chart",params:{products:t.articles}}}},[t._v("Grafici")]),a("a",[t._v("Login/Logout")])],1)],1),a("b-button",{attrs:{variant:"primary",block:""},on:{click:o}},[t._v("Close Sidebar")])],1)]}}])})],1)]],2),a("router-view",{key:t.$route.fullPath})],1)},i=[],s=a("d4ec"),n=a("bee2"),l=(a("4de4"),a("4e82"),a("bc3a")),c=a.n(l),d=a("db49"),u=a.n(d),p=c.a.create({baseURL:u.a.site202131Url,headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",dataType:"jsonp",credentials:"include"}}),b=function(){function t(){Object(s["a"])(this,t)}return Object(n["a"])(t,[{key:"loginAsWorker",value:function(){var t=p.post("/api/public/login",{email:"han.chu@worker.com",plainTextPassword:"1234567890"});return t}},{key:"getProduct",value:function(t){return p.get("/api/product/?id="+t)}},{key:"getAllProduct",value:function(t){return p.get("/api/product/all/?filter="+t.filter+"&sort="+t.sort)}},{key:"saveDataProduct",value:function(t,e){return p.post("/api/product?id="+t,e)}},{key:"addProduct",value:function(t){return p.post("/api/product",t)}},{key:"deleteProduct",value:function(t){return p.delete("/api/product?id="+t)}},{key:"getUser",value:function(t,e){return 0===e?p.get("/api/user?id="+t):p.get("/api/user?email="+t)}},{key:"getAllUser",value:function(t){return p.get("/api/user/all?filter="+t.filter+"&sort="+t.sort)}},{key:"saveDataClient",value:function(t,e){return p.post("/api/user?id="+t,e)}},{key:"deleteUser",value:function(t){return p.delete("/api/user?id="+t)}},{key:"getReservation",value:function(t){return p.get("/api/reservation/?id="+t)}},{key:"getAllReservation",value:function(t){return p.get("/api/reservation/all?filter="+t.filter+"&sort="+t.sort)}},{key:"saveReservation",value:function(t,e){return p.post("/api/reservation?id="+t,e)}},{key:"addReservation",value:function(t){return p.post("/api/reservation",t)}},{key:"deleteReservation",value:function(t){return p.delete("/api/reservation/?id="+t)}}]),t}(),h=new b,m={data:function(){return{articles:[],search:"",selected:"article",options:[{value:"article",text:"Articoli"},{value:"client",text:"Clienti"},{value:"reservation",text:"Prenotazioni"}]}},created:function(){h.loginAsWorker()}},y=m,f=(a("034f"),a("2877")),v=Object(f["a"])(y,r,i,!1,null,null,null),g=v.exports,k=a("8c4f"),_=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},S=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v("QUESTA E' LA HOME")])])}],M={data:function(){},created:function(){console.log("home")}},j=M,x=Object(f["a"])(j,_,S,!1,null,null,null),C=x.exports,D=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v(" Aggiungi articolo ")]),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Titolo:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Brand:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.brand,callback:function(e){t.brand=e},expression:"brand"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Immagine (Inserisci URL):")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"url"},model:{value:t.image,callback:function(e){t.image=e},expression:"image"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Etichette (separare con spazio o virgola):")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.tags,callback:function(e){t.tags=e},expression:"tags"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Qualità:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"number",min:"1",max:"3",step:"1"},model:{value:t.quality,callback:function(e){t.quality=e},expression:"quality"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Prezzo:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"number",min:"1",step:"1"},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Sconto:")])]),a("b-col",{attrs:{cols:"1"}},[a("b-form-checkbox",{on:{click:t.changeSale},model:{value:t.onSale,callback:function(e){t.onSale=e},expression:"onSale"}})],1),a("b-col",{attrs:{cols:"3"}},[t.onSale?a("p",[t._v("L'articolo verrà scontato")]):a("p",[t._v("L'articolo non è scontato")])])],1),t.onSale?[a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Tipo di sconto:")])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-radio",{attrs:{value:"A"},model:{value:t.onSaleType,callback:function(e){t.onSaleType=e},expression:"onSaleType"}},[t._v("Percentuale")])],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-radio",{attrs:{value:"B"},model:{value:t.onSaleType,callback:function(e){t.onSaleType=e},expression:"onSaleType"}},[t._v("Fisso")])],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Valore sconto:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"number",min:"1",step:"1"},model:{value:t.onSaleValue,callback:function(e){t.onSaleValue=e},expression:"onSaleValue"}})],1)],1)]:t._e(),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Disponibilità:")])]),a("b-col",{attrs:{cols:"1"}},[a("b-form-checkbox",{attrs:{checked:t.available},on:{click:t.changeAvailable},model:{value:t.available,callback:function(e){t.available=e},expression:"available"}})],1),a("b-col",{attrs:{cols:"3"}},[t.available?a("p",[t._v("L'articolo sarà disponibile")]):a("p",[t._v("L'articolo non sarà disponile")])])],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Descrizione:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Note (non visibili ai clienti):")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.note,callback:function(e){t.note=e},expression:"note"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.createArticle}},[t._v("Salva")])],1),a("b-col",{attrs:{cols:"3"}},[a("b-button",{attrs:{variant:"danger"},on:{click:t.cancel}},[t._v("Annulla")])],1)],1)],2)},A=[],w=a("2909"),E=(a("ac1f"),a("5319"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("1276"),a("a434"),a("a4d3"),a("e01a"),{name:"create-article",data:function(){return{title:"",brand:"",image:"",tags:"",quality:1,price:"",onSale:!1,onSaleType:!1,onSaleValue:"",available:!0,description:"",note:""}},methods:{changeSale:function(){this.onSale=!this.onSale},changeAvailable:function(){this.available=!this.available},createArticle:function(){var t=this,e={};if(""==this.title)return alert("Il campo titolo non può essere vuoto");if(e.title=this.title,""==this.brand)return alert("Il campo brand non può essere vuoto");if(e.brand=this.brand,""==this.image)return alert("Il campo immagine non può essere vuoto");if(e.image=this.image,""==this.tags)return alert("Il campo etichette non può essere vuoto");var a=this.tags.replace(/,/g," ");a=Object(w["a"])(new Set(a.split(" ")));for(var o=0;o<a.length;o++)""==a[o]&&a.splice(o,1);return e.tags=a,e.discount={},e.discount.onSale=this.onSale,e.discount.onSaleType=this.onSaleType,1==this.onSale&&""==this.onSaleValue?alert("inserire lo sconto da applicare"):1==this.onSale&&this.onSaleValue<0?alert("lo sconto da applicare deve essere maggiore di zero"):(e.discount.onSaleValue=this.onSaleValue,""==this.price?alert("Il campo prezzo non può essere vuoto"):this.price<0?alert("Il prezzo deve essere maggiore di '0'"):(e.price=this.price,this.quality<1||this.quality>3?alert("Il campo qualità deve essere compreso tra 1 e 3"):(e.quality=this.quality,e.available=this.available,""==this.description?alert("Il campo descrizione non può essere vuoto"):(e.description=this.description,e.note=this.note,e.bookings=[],void h.addProduct(e).then((function(){t.cancel(),alert("Creazione riuscita")}))))))},cancel:function(){this.title="",this.brand="",this.image="",this.tags="",this.quality=1,this.price="",this.onSale=!1,this.onSaleType=!1,this.onSaleValue="",this.available=!0,this.description="",this.note=""}}}),N=E,z=Object(f["a"])(N,D,A,!1,null,null,null),R=z.exports,P=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("h1",[t._v(" Aggiungi prenotazione ")]),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *email cliente:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.email,callback:function(e){t.email=e},expression:"email"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *ID Articolo:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text",readonly:""},model:{value:t.articleId,callback:function(e){t.articleId=e},expression:"articleId"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Data richiesta prenotazione:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-datepicker",{attrs:{required:""},model:{value:t.reservationDate,callback:function(e){t.reservationDate=e},expression:"reservationDate"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Data inizio noleggio")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-datepicker",{attrs:{"date-disabled-fn":t.dateDisabled,required:""},model:{value:t.reservationStart,callback:function(e){t.reservationStart=e},expression:"reservationStart"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Data fine noleggio:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-datepicker",{attrs:{"date-disabled-fn":t.dateDisabled,required:""},model:{value:t.reservationEnd,callback:function(e){t.reservationEnd=e},expression:"reservationEnd"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Ritiro:")])]),a("b-col",{attrs:{cols:"1"}},[a("b-form-checkbox",{attrs:{required:""},on:{click:t.changeRentalOccured},model:{value:t.rentalOccurred,callback:function(e){t.rentalOccurred=e},expression:"rentalOccurred"}})],1),a("b-col",{attrs:{cols:"3"}},[t.rentalOccurred?a("p",[t._v("L'articolo è stato ritirato")]):a("p",[t._v("L'articolo non è stato ritirato")])])],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Restituzione:")])]),a("b-col",{attrs:{cols:"1"}},[a("b-form-checkbox",{attrs:{required:""},on:{click:t.changeReturned},model:{value:t.returned,callback:function(e){t.returned=e},expression:"returned"}})],1),a("b-col",{attrs:{cols:"3"}},[t.returned?a("p",[t._v("L'articolo è stato restituito")]):a("p",[t._v("L'articolo non è stato restituito")])])],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" *Prezzo:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"number",min:"1",required:""},model:{value:t.price,callback:function(e){t.price=e},expression:"price"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Descrizione:")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text"},model:{value:t.notes,callback:function(e){t.notes=e},expression:"notes"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v(" Note (non visibili ai clienti):")])]),a("b-col",{attrs:{cols:"9"}},[a("b-form-input",{attrs:{type:"text",required:""},model:{value:t.privateNotes,callback:function(e){t.privateNotes=e},expression:"privateNotes"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.createReservation}},[t._v("Salva")])],1),a("b-col",{attrs:{cols:"3"}},[a("b-button",{attrs:{variant:"danger"},on:{click:t.cancel}},[t._v("Annulla")])],1)],1)],1)},O=[],T={name:"create-article",data:function(){return{email:"",articleId:"",price:" ",bookings:[],reservationDate:"",reservationStart:"",reservationEnd:"",rentalOccurred:!1,returned:!1,notes:"",privateNotes:""}},created:function(){var t=this;this.articleId=this.$route.params.id,this.price=this.$route.params.price,h.getProduct(this.articleId).then((function(e){t.bookings=e.data.data.obj.bookings}))},methods:{changeRentalOccured:function(){this.rentalOccurred=!this.rentalOccurred},changeReturned:function(){this.returned=!this.returned},createReservation:function(){var t,e,a=this,o={};if(""==this.email)return alert("Il campo mail non può essere vuoto");if(o.clientEmail=this.email,""==this.articleId)return alert("Il campo ID articolo non può essere vuoto");if(o.productId=this.articleId,""==this.price)return alert("Il campo prezzo non può essere vuoto");if(this.price<0)return alert("Il prezzo deve essere maggiore di '0'");if(o.price=this.price,""==this.reservationDate)return alert("Il campo Data richiesta di prenotazione non può essere vuoto");if(o.bookingDate={},o.bookingDate.day=this.reservationDate.charAt(8)+this.reservationDate.charAt(9),o.bookingDate.month=this.reservationDate.charAt(5)+this.reservationDate.charAt(6),o.bookingDate.year=this.reservationDate.charAt(0)+this.reservationDate.charAt(1)+this.reservationDate.charAt(2)+this.reservationDate.charAt(3),""==this.reservationStart)return alert("Il campo Data inizio prenotazione non può essere vuoto");if(o.startDate={},o.startDate.day=this.reservationStart.charAt(8)+this.reservationStart.charAt(9),o.startDate.month=this.reservationStart.charAt(5)+this.reservationStart.charAt(6),o.startDate.year=this.reservationStart.charAt(0)+this.reservationStart.charAt(1)+this.reservationStart.charAt(2)+this.reservationStart.charAt(3),this.reservationDate>this.reservationStart)return alert("La data di prenotazione non può essere superiore al primo giorno di noleggio");if(""==this.reservationEnd)return alert("Il campo Data fine prenotazione non può essere vuoto");if(o.endDate={},o.endDate.day=this.reservationEnd.charAt(8)+this.reservationEnd.charAt(9),o.endDate.month=this.reservationEnd.charAt(5)+this.reservationEnd.charAt(6),o.endDate.year=this.reservationEnd.charAt(0)+this.reservationEnd.charAt(1)+this.reservationEnd.charAt(2)+this.reservationEnd.charAt(3),this.reservationStart>this.reservationEnd)return alert("La data di inizio noleggio non può essere superiore al ritiro");for(var r in this.bookings)if(t=this.bookings[r].startDate.year+"-"+this.bookings[r].startDate.month+"-"+this.bookings[r].startDate.day,e=this.bookings[r].endDate.year+"-"+this.bookings[r].endDate.month+"-"+this.bookings[r].endDate.day,this.reservationStart<t&&e<this.reservationEnd)return alert("Nel periodo selezionato il prodotto non può essere affittato");o.isTaken=this.rentalOccurred,o.isReturned=this.returned,o.description=this.notes,o.note=this.privateNotes,h.addReservation(o).then((function(t){console.log(t);var e=t.data.data._id;h.getProduct(a.articleId).then((function(t){console.log("GetProduct"),console.log(t),o.productTitle=t.data.data.obj.title,o.productBrand=t.data.data.obj.brand,o.image=t.data.data.obj.image;var r={},i={};i.id=a.articleId,i.clientId=a.email,i.reservationId=e,i.startDate={},i.startDate.day=a.reservationStart.charAt(8)+a.reservationStart.charAt(9),i.startDate.month=a.reservationStart.charAt(5)+a.reservationStart.charAt(6),i.startDate.year=a.reservationStart.charAt(0)+a.reservationStart.charAt(1)+a.reservationStart.charAt(2)+a.reservationStart.charAt(3),i.endDate={},i.endDate.day=a.reservationEnd.charAt(8)+a.reservationEnd.charAt(9),i.endDate.month=a.reservationEnd.charAt(5)+a.reservationEnd.charAt(6),i.endDate.year=a.reservationEnd.charAt(0)+a.reservationEnd.charAt(1)+a.reservationEnd.charAt(2)+a.reservationEnd.charAt(3),r.bookings=t.data.data.obj.bookings,r.bookings.push(i),h.saveDataProduct(a.articleId,r),h.getUser(a.email,1).then((function(t){console.log("GETUSER"),console.log(t),o.clientName=t.data.data.userName,o.clientSurname=t.data.data.userSurname,h.saveReservation(e,o).then((function(){a.cancel(),alert("Creazione riuscita")}))}))}))}))},cancel:function(){this.email="",this.articleId="",this.reservationDate="",this.reservationStart="",this.reservationEnd="",this.rentalOccurred=!1,this.returned=!1,this.price="",this.notes="",this.privateNotes=""},dateDisabled:function(t,e){var a=e.getDate(),o=e.getMonth()+1,r=e.getFullYear();for(var i in this.bookings)if(r>=this.bookings[i].startDate.year&&r<=this.bookings[i].endDate.year&&o>=this.bookings[i].startDate.month&&o<=this.bookings[i].endDate.month&&a>=this.bookings[i].startDate.day&&a<=this.bookings[i].endDate.day)return!0;return!1}}},I=T,q=Object(f["a"])(I,P,O,!1,null,null,null),B=q.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"container-fluid p-5"},[a("b-row",{staticClass:"mb-5"},[a("b-col",{attrs:{cols:"6"}},[a("b-img",{staticClass:"img-thumbnail",attrs:{src:t.image}})],1),a("b-col",{attrs:{cols:"4"}},[a("div",{attrs:{id:"productidentifier"}},[t._v(" ID: "+t._s(t.identifier)+" ")]),a("div",[a("h1",[t._v(t._s(t.title+" "+t.brand))])]),a("div",{staticClass:"mb-2"},t._l(t.tags,(function(e){return a("span",{key:e,staticClass:"badge rounded-pill bg-primary"},[t._v(t._s(e))])})),0),a("div",[t._l(parseInt(t.quality),(function(t){return a("span",{key:t,staticClass:"fa fa-star checked big-size"})})),t._l(3-parseInt(t.quality),(function(t){return a("span",{key:t,staticClass:"fa fa-star big-size"})}))],2),a("div",{staticClass:"mt-3 mb-3"},[t.discount.onSale?a("span",{staticClass:"price"},[a("s",[t._v(t._s(t.price)+"€")]),t._v(" "),a("span",{attrs:{id:"onSalePrice"}},[t._v(t._s(t.getDiscountedPrice)+"€")])]):a("span",{staticClass:"price"},[t._v(t._s(t.price)+" €")])]),a("div",[t.available?a("router-link",{staticClass:"btn btn-lg btn-secondary",attrs:{to:{name:"createReservation",params:{id:t.identifier,price:t.price}},id:"rentProduct"}},[t._v("Affitta")]):a("b-button",{staticClass:"btn btn-lg btn-secondary",attrs:{id:"rentProduct",disabled:""}},[t._v("Affitta")]),a("b-button",{staticClass:"btn btn-lg ",attrs:{type:"button",variant:"primary","data-bs-toggle":"modal","data-bs-target":"#myModal"},on:{click:t.getModalData}},[t._v("Modifica")]),a("b-button",{staticClass:"btn btn-lg btn-danger",attrs:{type:"button"},on:{click:t.deleteProduct}},[t._v("Elimina")]),a("div",{staticClass:"form-check form-switch big-size"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.available,expression:"available"}],staticClass:"form-check-input custom-switch",attrs:{type:"checkbox",id:"flexSwitchCheckDefault"},domProps:{checked:t.available,checked:Array.isArray(t.available)?t._i(t.available,null)>-1:t.available},on:{click:t.changeInStock,change:function(e){var a=t.available,o=e.target,r=!!o.checked;if(Array.isArray(a)){var i=null,s=t._i(a,i);o.checked?s<0&&(t.available=a.concat([i])):s>-1&&(t.available=a.slice(0,s).concat(a.slice(s+1)))}else t.available=r}}}),t.available?a("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[t._v("Disattiva articolo")]):a("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[t._v("Attiva articolo")])]),a("div",{staticClass:"modal",attrs:{id:"myModal"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[t._v("Modifica prodotto")]),a("button",{staticClass:"btn-close",attrs:{type:"button","data-bs-dismiss":"modal"}})]),a("div",{staticClass:"modal-body"},[a("form",[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productName"}},[t._v("Nome")])]),a("b-col",{attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productModel"}},[t._v("Marca")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{cols:"6"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text",id:"productname",placeholder:t.titleModal},model:{value:t.titleModal,callback:function(e){t.titleModal=e},expression:"titleModal"}})],1),a("b-col",{attrs:{cols:"6"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text",id:"productModel"},model:{value:t.brandModal,callback:function(e){t.brandModal=e},expression:"brandModal"}})],1)],1),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productTags"}},[t._v("Etichette (separare con uno spazio)")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.tagsModal,expression:"tagsModal"}],staticClass:"form-control w-80",attrs:{id:"productTags",rows:"3"},domProps:{value:t.tagsModal},on:{input:function(e){e.target.composing||(t.tagsModal=e.target.value)}}})])],1),a("b-row",{staticClass:"mb-3 d-flex align-items-center justify-content-between"},[a("b-col",{attrs:{cols:"4"}},[a("label",{staticClass:"form-label",attrs:{for:"imageLink"}},[t._v("Immagine (link)")])]),a("b-col",{attrs:{cols:"8"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text",id:"imageLink"},model:{value:t.imageModal,callback:function(e){t.imageModal=e},expression:"imageModal"}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productQuality"}},[t._v("Qualità")])]),a("b-col",{attrs:{cols:"6"}},[a("label",{attrs:{for:"productPrice"}},[t._v("Prezzo di listino")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{cols:"6"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:t.qualityModal,expression:"qualityModal"}],staticClass:"form-select",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.qualityModal=e.target.multiple?a:a[0]}}},[a("option",{domProps:{value:1}},[t._v("1 - Condizioni accettabili")]),a("option",{attrs:{selected:""},domProps:{value:2}},[t._v("2 - Buone condizioni")]),a("option",{domProps:{value:3}},[t._v("3 - Come nuovo")])])]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("b-form-input",{staticClass:"form-control text-end",attrs:{type:"text",id:"productPrice"},model:{value:t.priceModal,callback:function(e){t.priceModal=e},expression:"priceModal"}}),a("span",{staticClass:"input-group-text justify-content-center"},[t._v("€")])],1)])],1),a("hr"),a("b-row",{staticClass:"mb-2 d-flex align-items-center justify-content-between"},[a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.onSaleModal,expression:"onSaleModal"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"onSale"},domProps:{checked:t.onSaleModal,checked:Array.isArray(t.onSaleModal)?t._i(t.onSaleModal,null)>-1:t.onSaleModal},on:{change:function(e){var a=t.onSaleModal,o=e.target,r=!!o.checked;if(Array.isArray(a)){var i=null,s=t._i(a,i);o.checked?s<0&&(t.onSaleModal=a.concat([i])):s>-1&&(t.onSaleModal=a.slice(0,s).concat(a.slice(s+1)))}else t.onSaleModal=r}}}),a("label",{staticClass:"form-check-label",attrs:{for:"onSale"}},[t._v("Sconto")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.onSaleTypeModal,expression:"onSaleTypeModal"}],staticClass:"form-check-input",attrs:{type:"radio",name:"discount",id:"discountPercentage",disabled:!t.onSaleModal},domProps:{value:!0,checked:t._q(t.onSaleTypeModal,!0)},on:{change:function(e){t.onSaleTypeModal=!0}}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountPercentage"}},[t._v("Percentuale")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.onSaleTypeModal,expression:"onSaleTypeModal"}],staticClass:"form-check-input",attrs:{id:"discountAmount",type:"radio",name:"discount",disabled:!t.onSaleModal},domProps:{value:!1,checked:t._q(t.onSaleTypeModal,!1)},on:{change:function(e){t.onSaleTypeModal=!1}}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountAmount"}},[t._v("Fisso")])])])],1),a("b-row",{staticClass:"mb-2 d-flex justify-content-end"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[t._v(" Sconto applicato ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text justify-content-center"},[t._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.onSaleValueModal,expression:"onSaleValueModal"}],staticClass:"form-control text-end",attrs:{type:"text",disabled:!t.onSaleModal},domProps:{value:t.onSaleValueModal},on:{input:function(e){e.target.composing||(t.onSaleValueModal=e.target.value)}}}),t.discount.onSaleType?a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[t._v("%")]):a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[t._v("€")])])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[t._v(" Prezzo scontato ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("input",{staticClass:"form-control text-end",attrs:{type:"text",disabled:"",placeholder:t.getDiscountedPriceModal}}),a("span",{staticClass:"input-group-text justify-content-center"},[t._v("€")])])])],1),a("hr"),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productDescription"}},[t._v("Descrizione")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.descriptionModal,expression:"descriptionModal"}],staticClass:"form-control w-80",attrs:{id:"productDescription",rows:"3"},domProps:{value:t.descriptionModal},on:{input:function(e){e.target.composing||(t.descriptionModal=e.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productNote"}},[t._v("Note (non sono visibli al cliente)")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.noteModal,expression:"noteModal"}],staticClass:"form-control w-80",attrs:{id:"productNote",rows:"3"},domProps:{value:t.noteModal},on:{input:function(e){e.target.composing||(t.noteModal=e.target.value)}}})])],1)],1)]),a("div",{staticClass:"modal-footer d-flex justify-content-between"},[a("b-button",{staticClass:"float-left",attrs:{type:"button",variant:"primary","data-bs-dismiss":"modal"},on:{click:t.saveData}},[t._v("Salva")]),a("b-button",{staticClass:"btn-danger float-right",attrs:{type:"button","data-bs-dismiss":"modal"}},[t._v("Chiudi")])],1)])])])],1)])],1),a("b-row",[a("h3",[t._v("Descrizione")])]),a("b-row",{staticClass:"mb-3 p-3 border border-secondary border-3 bg-white"},[t._v(" "+t._s(t.description)+" ")]),a("b-row",[a("h3",[t._v("Note")])]),a("b-row",{staticClass:"mb-3 p-3 border border-secondary border-3 bg-white"},[t._v(" "+t._s(t.note)+" ")]),a("b-row",[a("h3",[t._v("Lista prenotazioni")]),a("b-form-input",{staticClass:"form-control",attrs:{type:"text",id:"myInput",placeholder:"Search.."}}),a("br"),a("table",{staticClass:"table table-striped table-bordered"},[a("thead",[a("tr",[a("th",[t._v("ID noleggio")]),a("th",[t._v("ID cliente")]),a("th",[t._v("Inizio noleggio")]),a("th",[t._v("Fine noleggio")])])]),a("tbody",{attrs:{id:"myTable"}},t._l(t.bookings,(function(e,o){return a("tr",{key:o},[a("td",[a("router-link",{attrs:{to:{name:"reservation",params:{id:e.id}}}},[t._v(t._s(e.id))])],1),a("td",[a("router-link",{attrs:{to:{name:"client",params:{id:e.clientId}}}},[t._v(t._s(e.clientId))])],1),a("td",[t._v(t._s(e.startDate.day+"/"+e.startDate.month+"/"+e.startDate.year))]),a("td",[t._v(t._s(e.endDate.day+"/"+e.endDate.month+"/"+e.endDate.year))])])})),0)])],1)],1)])},$=[],F=(a("a15b"),a("b680"),a("ab8b"),a("7b17"),a("1157")),L=a.n(F),Y={data:function(){return{identifier:"",title:"",brand:"",image:"",tags:[],quality:0,price:0,discount:{onSale:!1,onSaleType:!1,onSaleValue:0},available:!1,description:"",bookings:[],note:"",titleModal:"",brandModal:"",imageModal:"",tagsModal:[],qualityModal:0,priceModal:0,onSaleModal:!1,onSaleTypeModal:!1,onSaleValueModal:0,descriptionModal:"",noteModal:""}},created:function(){var t=this;h.getProduct(this.$route.params.id).then((function(e){console.log(e),t.identifier=t.$route.params.id,t.title=e.data.data.obj.title,t.brand=e.data.data.obj.brand,t.image=e.data.data.obj.image,t.tags=e.data.data.obj.tags,t.quality=e.data.data.obj.quality,t.price=e.data.data.obj.price,t.discount.onSale=e.data.data.obj.discount.onSale,t.discount.onSaleType=e.data.data.obj.discount.onSaleType,t.discount.onSaleValue=e.data.data.obj.discount.onSaleValue,t.available=e.data.data.obj.available,t.description=e.data.data.obj.description,t.bookings=e.data.data.obj.bookings,t.note=e.data.data.obj.note}),(function(t){alert(t)}))},methods:{getModalData:function(){this.titleModal=this.title,this.brandModal=this.brand,this.imageModal=this.image,this.tagsModal=this.tags,this.qualityModal=this.quality,this.priceModal=this.price,this.onSaleModal=this.discount.onSale,this.onSaleTypeModal=this.discount.onSaleType,this.onSaleValueModal=this.discount.onSaleValue,this.descriptionModal=this.description,this.noteModal=this.note},changeInStock:function(){var t={};t.available=!this.available,h.saveDataProduct(this.identifier,t).then((function(){alert("Modifica disponibilità riuscita")}))},saveData:function(){var t=this,e={};this.titleModal!=this.title&&(e.title=this.titleModal),this.brandModal!=this.brand&&(e.brand=this.brandModal),this.imageModal!=this.image&&(e.image=this.imageModal),"string"!==typeof this.tagsModal&&(this.tagsModal=this.tagsModal.join(" ")),this.tagsModal=this.tagsModal.replace(/,/g," ");var a=Object(w["a"])(new Set(this.tagsModal.split(/\s+/)));""==a[a.length-1]&&a.pop(),e.tags=a,this.qualityModal!=this.quality&&(e.quality=this.qualityModal),this.priceModal!=this.price&&(e.price=this.priceModal),e.discount={},this.onSaleModal!=this.discount.onSale?e.discount.onSale=this.onSaleModal:e.discount.onSale=this.discount.onSale,this.onSaleTypeModal!=this.discount.onSaleType?e.discount.onSaleType=this.onSaleTypeModal:e.discount.onSaleType=this.discount.onSaleType,this.onSaleValueModal!=this.discount.onSaleValue?e.discount.onSaleValue=this.onSaleValueModal:e.discount.onSaleValue=this.discount.onSaleValue,this.descriptionModal!=this.description&&(e.description=this.descriptionModal),this.noteModal!=this.note&&(e.note=this.noteModal),console.log(this.identifier),h.saveDataProduct(this.identifier,e).then((function(e){"200"==e.status&&(t.title=t.titleModal,t.brand=t.brandModal,t.image=t.imageModal,t.tags=a,t.quality=t.qualityModal,t.price=t.priceModal,t.discount.onSale=t.onSaleModal,t.discount.onSaleType=t.onSaleTypeModal,t.discount.onSaleValue=t.onSaleValueModal,t.description=t.descriptionModal,t.note=t.noteModal)}))},deleteProduct:function(){var t=this;if(0===this.bookings.length)h.deleteProduct(this.identifier).then((function(){t.$router.push({name:"articleCatalog",params:{filter:""}})}));else{for(var e in this.bookings){var a=this.bookings[e].endDate.year+"-"+this.bookings[e].endDate.month+"-"+this.bookings[e].endDate.day,o=new Date;if(o=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),a>=o)return alert("Il prodotto ha ancora prenotazioni attive")}h.deleteProduct(this.identifier).then((function(){t.$router.push({name:"articleCatalog",params:{filter:""}})}))}}},computed:{getTagsModal:function(){var t="",e=0;for(e in this.tagsModal)t+=this.tagsModal[e]+"\n";return t},getDiscountedPrice:function(){return this.discount.onSaleType?(this.price-this.price*this.discount.onSaleValue/100).toFixed(2):(this.price-this.discount.onSaleValue).toFixed(2)},getDiscountedPriceModal:function(){return this.onSaleTypeModal?(this.priceModal-this.priceModal*this.onSaleValueModal/100).toFixed(2):(this.priceModal-this.onSaleValueModal).toFixed(2)}}};L()(document).ready((function(){L()("#myInput").on("keyup",(function(){var t=L()(this).val().toLowerCase();L()("#myTable tr").filter((function(){L()(this).toggle(L()(this).text().toLowerCase().indexOf(t)>-1)}))}))}));var U=Y,J=(a("8d0e"),Object(f["a"])(U,V,$,!1,null,null,null)),Q=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-col",{staticClass:"container-fluid "},[a("h1",[t._v(" Account ")]),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Nome:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyName,callback:function(e){t.copyName=e},expression:"copyName"}}):a("b-form-input",{attrs:{type:"text",value:t.name,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Cognome:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copySurname,callback:function(e){t.copySurname=e},expression:"copySurname"}}):a("b-form-input",{attrs:{type:"text",value:t.surname,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v("ID:"),t.boolModify?a("span",[t._v("(non modificabile)")]):t._e()])]),a("b-col",{staticClass:"col-9 "},[a("b-form-input",{attrs:{type:"text",value:t.id,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Sesso:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-select",{attrs:{options:t.options},model:{value:t.copySex,callback:function(e){t.copySex=e},expression:"copySex"}}):a("b-form-select",{attrs:{disabled:!t.boolModify,value:t.sex,options:t.options}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Numbero di Telefono:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyPhoneNumber,callback:function(e){t.copyPhoneNumber=e},expression:"copyPhoneNumber"}}):a("b-form-input",{attrs:{type:"text",value:t.phoneNumber,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("E-mail:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyEmail,callback:function(e){t.copyEmail=e},expression:"copyEmail"}}):a("b-form-input",{attrs:{type:"text",value:t.email,readonly:""}})],1)],1),a("hr"),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b",[t._v("Data di nascita")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-datepicker",{attrs:{placeholder:t.birthday},model:{value:t.copyDate,callback:function(e){t.copyDate=e},expression:"copyDate"}}):a("b-form-input",{attrs:{type:"text",value:t.birthday,readonly:""}})],1)],1),a("hr"),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b",[t._v("Indirizzo")])])],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Via: ")]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyAddressStreet,callback:function(e){t.copyAddressStreet=e},expression:"copyAddressStreet"}}):a("b-form-input",{attrs:{type:"text",value:t.address.addressStreet,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Numero: ")]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"number",min:"1"},model:{value:t.copyAddressNumber,callback:function(e){t.copyAddressNumber=e},expression:"copyAddressNumber"}}):a("b-form-input",{attrs:{type:"number",value:t.address.addressNumber,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Città: ")]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyAddressCity,callback:function(e){t.copyAddressCity=e},expression:"copyAddressCity"}}):a("b-form-input",{attrs:{type:"text",value:t.address.addressCity,readonly:""}})],1)],1),a("hr"),a("b-row",[a("b",[t._v("Pagamenti")])]),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Tipo di carta:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyCardType,callback:function(e){t.copyCardType=e},expression:"copyCardType"}}):a("b-form-input",{attrs:{type:"text",value:t.payment.cardType,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Nome carta:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyCardName,callback:function(e){t.copyCardName=e},expression:"copyCardName"}}):a("b-form-input",{attrs:{type:"text",value:t.payment.cardName,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Proprietario:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyCardSurname,callback:function(e){t.copyCardSurname=e},expression:"copyCardSurname"}}):a("b-form-input",{attrs:{type:"text",value:t.payment.cardSurname,readonly:""}})],1)],1),a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v("Data scadenza:")])])],1),a("b-row",[a("b-col",{staticClass:"col-3 tab"},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Mese:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"number",min:"1",max:"12"},model:{value:t.copyCardExpireMonth,callback:function(e){t.copyCardExpireMonth=e},expression:"copyCardExpireMonth"}}):a("b-form-input",{attrs:{type:"number",value:t.payment.cardExpireMonth,readonly:""}})],1)],1),a("b-row",[a("b-col",{staticClass:"col-3 tab"},[a("p",[t.boolModify?a("span",[t._v("* ")]):t._e(),t._v("Anno:")])]),a("b-col",{attrs:{cols:"9"}},[t.boolModify?a("b-form-input",{attrs:{type:"number",min:"2021",max:"2025"},model:{value:t.copyCardExpireYear,callback:function(e){t.copyCardExpireYear=e},expression:"copyCardExpireYear"}}):a("b-form-input",{attrs:{type:"number",value:t.payment.cardExpireYear,readonly:""}})],1)],1),a("hr"),a("h3",[t._v("Lista prenotazioni")]),a("div",{staticClass:"p-3"},[a("b-row",[a("b-table",{attrs:{hover:"",items:t.bookings,fields:t.fields},scopedSlots:t._u([{key:"cell(product)",fn:function(e){var o=e.item;return[a("router-link",{attrs:{to:{name:"article",params:{id:o.product.id}}}},[t._v(t._s(o.product.title))])]}},{key:"cell(reservation)",fn:function(e){var o=e.item;return[a("router-link",{attrs:{to:{name:"reservation",params:{id:o.reservation}}}},[t._v(t._s(o.reservation))])]}}])})],1)],1),t.boolModify?t._e():a("b-button",{staticClass:"btn btn-lg btn-secondary",attrs:{type:"button"},on:{click:t.modify}},[t._v("Modifica")]),t.boolModify?a("b-button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button"},on:{click:t.saveData}},[t._v("Salva")]):t._e(),t.boolModify?a("b-button",{staticClass:"btn btn-lg btn-danger",attrs:{type:"button"},on:{click:t.undoChange}},[t._v("Annulla")]):t._e(),a("b-button",{staticClass:"btn btn-lg btn-danger delete",attrs:{type:"button"},on:{click:t.deleteUser}},[t._v("Elimina cliente")])],1)},H=[],W=(a("b0c0"),{data:function(){return{id:"",name:"",surname:"",sex:"",options:[{value:"Male",text:"M"},{value:"Female",text:"F"},{value:"Other",text:"Altro"}],birthday:"",phoneNumber:"",email:"",password:"",address:{addressStreet:"",addressNumber:"",addressCity:""},payment:{cardType:"",cardName:"",cardSurname:"",cardExpireMonth:"",cardExpireYear:"",cardCVV:""},bookings:[],fields:[{key:"product",sortable:!1},{key:"reservation",sortable:!1},{key:"price",sortable:!0},{key:"startDate",sortable:!0},{key:"endDate",sortable:!0}],boolModify:!1,copyName:"",copySurname:"",copySex:"",copyDate:"",copyPhoneNumber:"",copyEmail:"",copyPassword:"",copyAddressStreet:"",copyAddressNumber:"",copyAddressCity:"",copyCardType:"",copyCardName:"",copyCardSurname:"",copyCardExpireMonth:"",copyCardExpireYear:"",copyCardCVV:""}},created:function(){var t,e,a=this;console.log(this.$route.params),void 0!==this.$route.params.id?(t=this.$route.params.id,e=0):(t=this.$route.params.email,e=1),h.getUser(t,e).then((function(t){console.log(t),a.id=t.data.data._id,a.name=t.data.data.userName,a.surname=t.data.data.userSurname,a.birthday=t.data.data.birthday.year+"-"+t.data.data.birthday.month+"-"+t.data.data.birthday.day,a.sex=t.data.data.sex,a.phoneNumber=t.data.data.phoneNumber,a.email=t.data.data.email,a.address.addressStreet=t.data.data.address.addressStreet,a.address.addressNumber=t.data.data.address.addressNumber,a.address.addressCity=t.data.data.address.addressCity,a.payment.cardType=t.data.data.payment.cardType,a.payment.cardName=t.data.data.payment.cardName,a.payment.cardSurname=t.data.data.payment.cardSurname,a.payment.cardExpireMonth=t.data.data.payment.cardExpireMonth,a.payment.cardExpireYear=t.data.data.payment.cardExpireYear,a.payment.cardCVV=t.data.data.payment.cardCVV;var e={filter:a.email,sort:!1};h.getAllReservation(e).then((function(t){if(console.log(t.data.obj),0===t.data.obj.length)console.log("vuoto");else{var e=new Date;for(var o in e=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate(),t.data.obj){var r={};r.productId=r.product={},r.product.id=t.data.obj[o].productId,r.product.title=t.data.obj[o].productTitle+" "+t.data.obj[o].productBrand,r.price=t.data.obj[o].price,r.reservation=t.data.obj[o]._id,r.startDate=t.data.obj[o].startDate.year+"-"+t.data.obj[o].startDate.month+"-"+t.data.obj[o].startDate.day,r.endDate=t.data.obj[o].endDate.year+"-"+t.data.obj[o].endDate.month+"-"+t.data.obj[o].endDate.day,r.endDate>=e&&(r._rowVariant="danger"),a.bookings.push(r)}}}))}))},methods:{modify:function(){this.copyName=this.name,this.copySurname=this.surname,this.copySex=this.sex,this.copyDate=this.birthday,this.copyPhoneNumber=this.phoneNumber,this.copyEmail=this.email,this.copyAddressStreet=this.address.addressStreet,this.copyAddressNumber=this.address.addressNumber,this.copyAddressCity=this.address.addressCity,this.copyCardType=this.payment.cardType,this.copyCardName=this.payment.cardName,this.copyCardSurname=this.payment.cardSurname,this.copyCardExpireMonth=this.payment.cardExpireMonth,this.copyCardExpireYear=this.payment.cardExpireYear,this.copyCardCVV=this.payment.cardCVV,this.boolModify=!0},undoChange:function(){this.boolModify=!1},saveData:function(){var t=this,e={};this.copyName!=this.name&&(e.userName=this.copyName),this.copySurname!=this.surname&&(e.userSurname=this.copySurname),this.copySex!=this.sex&&(e.sex=this.copySex),this.copyDate!=this.date&&(e.date={},e.date.day=this.copyDate.charAt(8)+this.copyDate.charAt(9),e.date.month=this.copyDate.charAt(5)+this.copyDate.charAt(6),e.date.year=this.copyDate.charAt(0)+this.copyDate.charAt(1)+this.copyDate.charAt(2)+this.copyDate.charAt(3)),this.copyPhoneNumber!=this.phoneNumber&&(e.phoneNumber=this.copyPhoneNumber),this.copyEmail!=this.email&&(e.email=this.copyEmail),this.copyAddressStreet==this.address.addressStreet&&this.copyAddressNumber==this.address.addressNumber&&this.copyAddressCity==this.address.addressCity||(e.address={},e.address.addressStreet=this.copyAddressStreet,e.address.addressNumber=this.copyAddressNumber,e.address.addressCity=this.copyAddressCity),this.copyCardType==this.payment.cardType&&this.copyCardName==this.payment.cardName&&this.copyCardSurname==this.payment.cardSurname&&this.copyCardExpireMonth==this.payment.cardExpireMonth&&this.copyCardExpireYear==this.payment.cardExpireYear||(e.payment={},e.payment.cardType=this.copyCardType,e.payment.cardName=this.copyCardName,e.payment.cardSurname=this.copyCardSurname,e.payment.cardExpireMonth=this.copyCardExpireMonth,e.payment.cardExpireYear=this.copyCardExpireYear),console.log(e),console.log(this.id),h.saveDataClient(this.id,e).then((function(){t.name=t.copyName,t.surname=t.copySurname,t.sex=t.copySex,t.phoneNumber=t.copyPhoneNumber,t.email=t.copyEmail,t.birthday=t.copyDate,t.address.addressStreet=t.copyAddressStreet,t.address.addressNumber=t.copyAddressNumber,t.address.addressCity=t.copyAddressCity,t.payment.cardType=t.copyCardType,t.payment.cardName=t.copyCardName,t.payment.cardSurname=t.copyCardSurname,t.payment.cardExpireMonth=t.copyCardExpireMonth,t.payment.cardExpireYear=t.copyCardExpireYear,t.boolModify=!1}))},deleteUser:function(){var t=this;if(0===this.bookings.length)h.deleteUser(this.id).then((function(){t.$router.push({name:"clientCatalog",params:{filter:""}})}));else{for(var e in this.bookings){var a=this.bookings[e].endDate.year+"-"+this.bookings[e].endDate.month+"-"+this.bookings[e].endDate.day,o=new Date;if(o=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),a>=o)return alert("Il prodotto ha ancora prenotazioni attive")}h.deleteUser(this.id).then((function(){t.$router.push({name:"clientCatalog",params:{filter:""}})}))}}}});L()(document).ready((function(){L()("#myInput").on("keyup",(function(){var t=L()(this).val().toLowerCase();L()("#myTable tr").filter((function(){L()(this).toggle(L()(this).text().toLowerCase().indexOf(t)>-1)}))}))}));var Z=W,K=(a("90c6"),Object(f["a"])(Z,G,H,!1,null,null,null)),X=K.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid "},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("b-img",{staticClass:"img-thumbnail",attrs:{src:t.bookedArticles.image}})],1),a("b-col",{attrs:{cols:"6"}},[a("p",[t._v("Id prenotazione: "+t._s(t.reservationId)+" ")]),a("p",[a("router-link",{attrs:{to:{name:"article",params:{id:t.bookedArticles.identifier}}}},[t._v(t._s(t.bookedArticles.title+" "+t.bookedArticles.brand))])],1),a("p",[a("router-link",{attrs:{to:{name:"client1",params:{email:t.clientEmail,choice:1}}}},[t._v(t._s(t.clientEmail))])],1),t.boolModify?[a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("p",[t._v("Prezzo:")])]),a("b-col",{attrs:{cols:"6"}},[a("b-form-input",{attrs:{type:"number"},model:{value:t.copyPrice,callback:function(e){t.copyPrice=e},expression:"copyPrice"}})],1)],1)]:[a("p",[t._v("Prezzo: "+t._s(t.bookedArticles.price)+"€ (da rivedere)")])]],2)],1),a("b-row",[t.boolModify?[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v("Data richiesta prenotazione: ")])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-datepicker",{attrs:{placeholder:t.copyBookingRequest,format:"DD/MM/yyyy"},model:{value:t.copyBookingRequest,callback:function(e){t.copyBookingRequest=e},expression:"copyBookingRequest"}})],1)]:a("p",[t._v("Data richiesta prenotazione: "+t._s(t.bookingRequest))])],2),a("b-row",[t.boolModify||t.boolVerify?t.boolModify?[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v("Data inizio prenotazione: ")])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-datepicker",{attrs:{placeholder:t.copyBookingStart},model:{value:t.copyBookingStart,callback:function(e){t.copyBookingStart=e},expression:"copyBookingStart"}})],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-checkbox",{attrs:{checked:t.copyRentalOccurred},model:{value:t.copyRentalOccurred,callback:function(e){t.copyRentalOccurred=e},expression:"copyRentalOccurred"}},[t._v(" Avvenuta consegna ")])],1)]:[a("b-col",{attrs:{cols:"4"}},[t.boolModify?t._e():a("p",[t._v("Data inizio prenotazione: "+t._s(t.bookingStart))])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-checkbox",{attrs:{checked:t.copyRentalOccurred},model:{value:t.copyRentalOccurred,callback:function(e){t.copyRentalOccurred=e},expression:"copyRentalOccurred"}},[t._v(" Avvenuta consegna ")])],1)]:[a("b-col",{attrs:{cols:"4"}},[t.boolModify?t._e():a("p",[t._v("Data inizio prenotazione: "+t._s(t.bookingStart))])]),a("b-col",{attrs:{cols:"4"}},[t.boolModify?t._e():a("b-form-checkbox",{attrs:{checked:t.rentalOccurred,disabled:!t.boolModify}},[t._v(" Avvenuta consegna ")])],1)]],2),a("b-row",[t.boolModify||t.boolVerify?t.boolModify?[a("b-col",{attrs:{cols:"3"}},[a("p",[t._v("Data Fine prenotazione: ")])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-datepicker",{attrs:{placeholder:t.copyBookingEnd,format:"DD/MM/yyyy"},model:{value:t.copyBookingEnd,callback:function(e){t.copyBookingEnd=e},expression:"copyBookingEnd"}})],1),a("b-col",{attrs:{cols:"3"}},[a("b-form-checkbox",{attrs:{checked:t.copyReturned},model:{value:t.copyReturned,callback:function(e){t.copyReturned=e},expression:"copyReturned"}},[t._v(" Avvenuta Restituzione ")])],1)]:[a("b-col",{attrs:{cols:"4"}},[a("p",[t._v("Data fine prenotazione: "+t._s(t.bookingEnd))])]),a("b-col",{attrs:{cols:"3"}},[a("b-form-checkbox",{attrs:{checked:t.copyReturned},model:{value:t.copyReturned,callback:function(e){t.copyReturned=e},expression:"copyReturned"}},[t._v(" Avvenuta Restituzione ")])],1)]:[a("b-col",{attrs:{cols:"4"}},[a("p",[t._v("Data fine prenotazione: "+t._s(t.bookingEnd))])]),a("b-col",{attrs:{cols:"4"}},[a("b-form-checkbox",{attrs:{checked:t.returned,disabled:!t.boolModify}},[t._v(" Avvenuta Restituzione ")])],1)]],2),a("b-row",[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyNotes,callback:function(e){t.copyNotes=e},expression:"copyNotes"}}):a("p",[t._v(t._s(t.notes))])],1),a("b-row",[t.boolModify?a("b-form-input",{attrs:{type:"text"},model:{value:t.copyPrivateNotes,callback:function(e){t.copyPrivateNotes=e},expression:"copyPrivateNotes"}}):a("p",[t._v(t._s(t.privateNotes))])],1),t.boolModify||t.boolVerify?t._e():a("b-button",{staticClass:"btn btn-lg btn-secondary",attrs:{type:"button"},on:{click:t.modify}},[t._v("Modifica")]),t.boolModify||t.boolVerify?a("b-button",{staticClass:"btn btn-lg btn-success",attrs:{type:"button"},on:{click:t.saveData}},[t._v("Salva")]):t._e(),t.boolModify||t.boolVerify?a("b-button",{staticClass:"btn btn-lg btn-danger",attrs:{type:"button"},on:{click:t.undoChange}},[t._v("Annulla")]):t._e(),a("button",{staticClass:"btn btn-lg btn-danger delete",on:{click:t.deleteReservation}},[t._v(" Cancella prenotazione")])],1)},et=[],at={data:function(){return{reservationId:"",clientEmail:"",bookedArticles:{identifier:"",title:"",brand:"",image:"",price:"",discount:{onSale:!1,onSaleType:!1,onSaleValue:0}},bookingRequest:"",bookingStart:"",bookingEnd:"",rentalOccurred:!0,returned:!1,notes:"",privateNotes:"",boolModify:!1,boolVerify:!1,copyPrice:0,copyOnSale:!1,copyOnSaleType:!1,copyOnSaleValue:"",copyBookingRequest:"",copyBookingStart:"",copyBookingEnd:"",copyRentalOccurred:"",copyReturned:"",copyNotes:"",copyPrivateNotes:""}},created:function(){var t=this;h.getReservation(this.$route.params.id).then((function(e){console.log(e),t.reservationId=t.$route.params.id,t.clientEmail=e.data.data.obj.clientEmail,t.bookedArticles.identifier=e.data.data.obj.productId,t.bookedArticles.title=e.data.data.obj.productTitle,t.bookedArticles.brand=e.data.data.obj.productBrand,t.bookedArticles.image=e.data.data.obj.productImage,t.bookedArticles.price=e.data.data.obj.price,t.bookingRequest=e.data.data.obj.bookingDate.year+"-"+e.data.data.obj.bookingDate.month+"-"+e.data.data.obj.bookingDate.day,t.bookingStart=e.data.data.obj.startDate.year+"-"+e.data.data.obj.startDate.month+"-"+e.data.data.obj.startDate.day,t.bookingEnd=e.data.data.obj.endDate.year+"-"+e.data.data.obj.endDate.month+"-"+e.data.data.obj.endDate.day,t.rentalOccurred=e.data.data.obj.isTaken,t.returned=e.data.data.obj.isReturned,t.notes=e.data.data.obj.description,t.privateNotes=e.data.data.obj.note}))},methods:{modify:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();e>=this.bookingStart?(this.boolVerify=!0,this.copyRentalOccurred=this.rentalOccurred,this.copyReturned=this.returned):(this.copyPrice=this.bookedArticles.price,this.copyOnSale=this.bookedArticles.discount.onSale,this.copyOnSaleType=this.bookedArticles.discount.onSaleType,this.copyOnSaleValue=this.bookedArticles.discount.onSaleValue,this.copyBookingRequest=this.bookingRequest,this.copyBookingStart=this.bookingStart,this.copyBookingEnd=this.bookingEnd,this.copyRentalOccurred=this.rentalOccurred,this.copyReturned=this.returned,this.copyNotes=this.notes,this.copyPrivateNotes=this.privateNotes,this.boolModify=!0)},undoChange:function(){this.boolModify=!1,this.boolVerify=!1},saveData:function(){var t=this;if(this.boolModify){if(this.copyPrice<=0)return alert("Il prezzo deve essere un numero positivo");if(this.copyBookingRequest>this.copyBookingStart)return alert("Il campo Data richiesta prenotazione non può essere superiore rispetto alla data inizio prenotazione");if(this.copyBookingStart>this.copyBookingEnd)return alert("Il campo Data inizio prenotazione non può essere superiore rispetto alla data fine prenotazione");if(0==this.copyRentalOccurred&&this.copyReturned)return alert("L'articolo non può essere stato restituito se non è stato consegnato");var e={};this.copyPrice!=this.bookedArticles.price&&(e.price=this.copyPrice);var a=!1;this.copyBookingRequest!=this.bookingRequest&&(e.bookingDate={},e.bookingDate.day=this.copyBookingRequest.charAt(8)+this.copyBookingRequest.charAt(9),e.bookingDate.month=this.copyBookingRequest.charAt(5)+this.copyBookingRequest.charAt(6),e.bookingDate.year=this.copyBookingRequest.charAt(0)+this.copyBookingRequest.charAt(1)+this.copyBookingRequest.charAt(2)+this.copyBookingRequest.charAt(3)),this.copyBookingStart!=this.bookingStart&&(a=!0,e.startDate={},e.startDate.day=this.copyBookingStart.charAt(8)+this.copyBookingStart.charAt(9),e.startDate.month=this.copyBookingStart.charAt(5)+this.copyBookingStart.charAt(6),e.startDate.year=this.copyBookingStart.charAt(0)+this.copyBookingStart.charAt(1)+this.copyBookingStart.charAt(2)+this.copyBookingStart.charAt(3)),this.copyBookingEnd!=this.bookingEnd&&(a=!0,e.endDate={},e.endDate.day=this.copyBookingEnd.charAt(8)+this.copyBookingEnd.charAt(9),e.endDate.month=this.copyBookingEnd.charAt(5)+this.copyBookingEnd.charAt(6),e.endDate.year=this.copyBookingEnd.charAt(0)+this.copyBookingEnd.charAt(1)+this.copyBookingEnd.charAt(2)+this.copyBookingEnd.charAt(3)),this.copyRentalOccurred!=this.rentalOccurred&&(e.isTaken=this.copyRentalOccurred),this.copyReturned!=this.returned&&(e.isReturned=this.copyReturned),this.copyNotes!=this.notes&&(e.description=this.copyNotes),this.copyPrivateNotes!=this.privateNotes&&(e.note=this.copyPrivateNotes),console.log(e),h.saveReservation(this.reservationId,e).then((function(){a?(console.log("dataModificata"),h.getProduct(t.bookedArticles.identifier).then((function(e){console.log("trovato id"),console.log(e);var a={},o={};o.id=t.bookedArticles.identifier,o.clientId=t.clientEmail,o.startDate={};var r=t.copyBookingStart.split("-");o.startDate.day=r[2],o.startDate.month=r[1],o.startDate.year=r[0];var i=t.copyBookingEnd.split("-");o.endDate={},o.endDate.day=i[2],o.endDate.month=i[1],o.endDate.year=i[0],console.log(e);var s=t.bookingStart.split("-"),n={};n.day=s[2],n.month=s[1],n.year=s[0];var l=t.bookingEnd.split("-"),c={};for(var d in c.day=l[2],c.month=l[1],c.year=l[0],a.bookings=e.data.data.obj.bookings,a.bookings)a.bookings[d].id==o.id&&JSON.stringify(a.bookings[d].startDate)===JSON.stringify(n)&&JSON.stringify(a.bookings[d].endDate)===JSON.stringify(c)&&(a.bookings[d].startDate.day=o.startDate.day,a.bookings[d].startDate.month=o.startDate.month,a.bookings[d].startDate.year=o.startDate.year,a.bookings[d].endDate.day=o.endDate.day,a.bookings[d].endDate.month=o.endDate.month,a.bookings[d].endDate.year=o.endDate.year);h.saveDataProduct(t.bookedArticles.identifier,a).then((function(){t.bookedArticles.price=t.copyPrice,t.bookingRequest=t.copyBookingRequest,t.bookingStart=t.copyBookingStart,t.bookingEnd=t.copyBookingEnd,t.rentalOccurred=t.copyRentalOccurred,t.returned=t.copyReturned,t.notes=t.copyNotes,t.privateNotes=t.copyPrivateNotes,t.boolModify=!1,alert("Modifica data riuscita")}))}))):(t.bookedArticles.price=t.copyPrice,t.bookingRequest=t.copyBookingRequest,t.rentalOccurred=t.copyRentalOccurred,t.returned=t.copyReturned,t.notes=t.copyNotes,t.privateNotes=t.copyPrivateNotes,t.boolModify=!1,alert("Modifica data riuscita"))}))}else if(this.boolVerify){if(console.log("BoolVerify"),0==this.copyRentalOccurred&&this.copyReturned)return alert("L'articolo non può essere stato restituito se non è stato consegnato");if(this.copyRentalOccurred!=this.rentalOccurred||this.copyReturned!=this.returned){var o={};o.isTaken=this.copyRentalOccurred,o.isReturned=this.copyReturned,h.saveReservation(this.reservationId,o).then((function(){console.log("saveReservation"),t.rentalOccurred=t.copyRentalOccurred,t.returned=t.copyReturned,t.boolVerify=!1,alert("Modifica effettuata")}))}}},deleteReservation:function(){var t=this,e=new Date,a=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();if(a>=this.bookingStart)return alert("La prenotazione non è modificabile");if(this.boolModify){if(!this.copyRentalOccurred)return alert("Il prodotto non è stato consegnato");if(!this.copyReturned)return alert("Il prodotto non è stato restituito")}else{if(!this.rentalOccurred)return alert("Il prodotto non è stato consegnato");if(!this.returned)return alert("Il prodotto non è stato restituito")}h.getProduct(this.bookedArticles.identifier).then((function(e){var a={};for(var o in a.bookings=e.data.data.obj.bookings,a.bookings)a.bookings[o].reservationId==t.reservationId&&a.bookings.splice(o,1);h.saveDataProduct(t.bookedArticles.identifier,a).then((function(){h.deleteReservation(t.reservationId),t.$router.push({name:"reservationCatalog",params:{filter:""}})}))}))}}},ot=at,rt=(a("1d91"),Object(f["a"])(ot,tt,et,!1,null,null,null)),it=rt.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid p-5"},t._l(t.catalog,(function(e){return a("div",{key:e._id},[a("b-row",[a("b-col",{attrs:{cols:"5"}},[a("b-img",{attrs:{thumbnail:"",fluid:"",src:e.image,alt:"Image 1"}})],1),a("b-col",{attrs:{cols:"5"}},[a("h2",[a("router-link",{attrs:{to:{name:"article",params:{id:e._id}}}},[t._v(t._s(e.title+" "+e.brand))])],1),a("h2",[t._v(" "+t._s(e.price)+"€ ")]),t._l(parseInt(e.quality),(function(t){return a("span",{key:t,staticClass:"fa fa-star checked big-size"})})),t._l(3-parseInt(e.quality),(function(t){return a("span",{key:t,staticClass:"fa fa-star big-size"})}))],2)],1)],1)})),0)},nt=[],lt={data:function(){return{catalog:[]}},created:function(){var t=this,e=void 0!==this.$route.params.filter?this.$route.params.filter:"",a={filter:e,sort:!1};h.getAllProduct(a).then((function(e){console.log(e),t.catalog=e.data.data}))},methods:{}},ct=lt,dt=Object(f["a"])(ct,st,nt,!1,null,null,null),ut=dt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid p-5"},t._l(t.catalog,(function(e){return a("div",{key:e._id},[a("b-row",[a("b-col",{attrs:{cols:"2"}},[a("b-img",{attrs:{thumbnail:"",fluid:"",src:"https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png",alt:"Image 1"}})],1),a("b-col",{attrs:{cols:"5"}},[a("h2",[a("router-link",{staticClass:"nav-link",attrs:{to:{name:"client",params:{id:e._id}}}},[t._v(t._s(e.userName+" "+e.userSurname))])],1),a("h2",[t._v(" Email: "+t._s(e.email)+" ")]),a("h2",[t._v(" Telefono: "+t._s(e.phoneNumber)+" ")])])],1)],1)})),0)},bt=[],ht={data:function(){return{catalog:[],filter:""}},created:function(){var t=this;this.filter=this.$route.params.filter;var e={filter:this.filter,sort:!1};console.log(e),h.getAllUser(e).then((function(e){console.log(e),t.catalog=e.data.data}))},methods:{}},mt=ht,yt=Object(f["a"])(mt,pt,bt,!1,null,null,null),ft=yt.exports,vt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid p-5"},[a("b-form-select",{attrs:{options:t.reservationFilter},on:{change:function(e){return t.changeFilter()}},model:{value:t.selectedFilter,callback:function(e){t.selectedFilter=e},expression:"selectedFilter"}},[t._v("Filtra")]),t._l(t.reservations,(function(e){return a("div",{key:e._id},[a("b-row",[a("b-col",{attrs:{cols:"3"}},[a("b-img",{attrs:{thumbnail:"",fluid:"",src:e.productImage,alt:"Image"}})],1),a("b-col",{attrs:{cols:"6"}},[a("h2",[t._v("Id prenotazione:"),a("router-link",{attrs:{to:{name:"reservation",params:{id:e._id}}}},[t._v(t._s(e._id))])],1),a("h2",[t._v(t._s(e.clientName+" "+e.clientSurname)+" "),a("h2",[a("router-link",{attrs:{to:{name:"client",params:{email:e.clientEmail}}}},[t._v(t._s(e.clientEmail))])],1),a("h2",[a("router-link",{attrs:{to:{name:"article",params:{id:e.productId}}}},[t._v(t._s(e.productTitle+" "+e.productBrand))])],1)])])],1)],1)}))],2)},gt=[],kt={data:function(){return{reservations:[],catalog:[],selectedFilter:"all",reservationFilter:[{value:"all",text:"Tutte"},{value:"active",text:"Attive"},{value:"old",text:"Passate"}]}},created:function(){var t=this,e={filter:this.$route.params.filter,sort:!1};h.getAllReservation(e).then((function(e){for(var a in console.log(e),t.catalog=e.data.obj,t.catalog)t.reservations.push(t.catalog[a])}))},methods:{changeFilter:function(){var t=new Date,e=t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate();if(this.reservations=[],"all"==this.selectedFilter)for(var a in this.catalog)this.reservations.push(this.catalog[a]);else if("active"==this.selectedFilter)for(var o in this.catalog){var r=this.catalog[o].endDate.year+"-"+this.catalog[o].endDate.month+"-"+this.catalog[o].endDate.day;e<=r&&this.reservations.push(this.catalog[o])}else if("old"==this.selectedFilter)for(var i in this.catalog){var s=this.catalog[i].endDate.year+"-"+this.catalog[i].endDate.month+"-"+this.catalog[i].endDate.day;e>=s&&this.reservations.push(this.catalog[i])}}},computed:{}},_t=kt,St=Object(f["a"])(_t,vt,gt,!1,null,null,null),Mt=St.exports,jt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},xt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"container-fluid"},[a("canvas",{attrs:{id:"myChart"}})])}],Ct=a("30ef"),Dt=a.n(Ct),At={data:function(){return{articles:[],labels:[],price:[],quality:[],firstChart:""}},mounted:function(){var t=this,e={filter:"",sort:!1};h.getAllProduct(e).then((function(e){for(var a in console.log(e),e.data.data)t.labels[a]=e.data.data[a].title+""+e.data.data[a].brand,t.price[a]=e.data.data[a].price,t.quality[a]=e.data.data[a].quality;t.firstChart={type:"bar",data:{labels:t.labels,datasets:[{label:"Prezzo",data:t.price,backgroundColor:"rgba(54,73,93,.5)",borderColor:"#36495d"},{label:"Qualità",data:t.quality,backgroundColor:"rgba(71, 183,132,.5)",borderColor:"#47b784"}]},options:{responsive:!0,lineTension:1,scales:{yAxes:[{ticks:{beginAtZero:!0,padding:25}}]}}};var o=document.getElementById("myChart");new Dt.a(o,t.firstChart)}))}},wt=At,Et=Object(f["a"])(wt,jt,xt,!1,null,null,null),Nt=Et.exports;o["default"].use(k["a"]);var zt=new k["a"]({mode:"history",routes:[{path:"/home",name:"home",component:C},{path:"/createArticle",component:R},{path:"/createReservation",name:"createReservation",component:B},{path:"/article:id",name:"article",component:Q},{path:"/client:id",name:"client",component:X},{path:"/client1:email",name:"client1",component:X},{path:"/reservation:id",name:"reservation",component:it},{path:"/articleCatalog",name:"articleCatalog",component:ut},{path:"/clientCatalog:filter",name:"clientCatalog",component:ft},{path:"/reservationCatalog:filter",name:"reservationCatalog",component:Mt},{path:"/chart",name:"chart",component:Nt}]}),Rt=a("5f5b"),Pt=a("b1e0");a("f9e3"),a("2dd8");o["default"].use(Rt["a"]),o["default"].use(Pt["a"]),o["default"].config.productionTip=!1,new o["default"]({router:zt,render:function(t){return t(g)}}).$mount("#app")},"85ec":function(t,e,a){},"8d0e":function(t,e,a){"use strict";a("de78")},"90c6":function(t,e,a){"use strict";a("f18b")},db49:function(t,e){var a={site202131Url:"http://site202131.tw.cs.unibo.it"};t.exports=a},de78:function(t,e,a){},f18b:function(t,e,a){}});
//# sourceMappingURL=app.74aa9820.js.map