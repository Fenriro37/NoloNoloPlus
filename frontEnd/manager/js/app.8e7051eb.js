(function(e){function t(t){for(var i,s,n=t[0],l=t[1],c=t[2],u=0,m=[];u<n.length;u++)s=n[u],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&m.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);d&&d(t);while(m.length)m.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],i=!0,n=1;n<a.length;n++){var l=a[n];0!==o[l]&&(i=!1)}i&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var i={},o={app:0},r=[];function s(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=i,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(a,i,function(t){return e[t]}.bind(null,i));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=t,n=n.slice();for(var c=0;c<n.length;c++)t(n[c]);var d=l;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";a("85ec")},"21b7":function(e,t,a){"use strict";a("b91a")},2934:function(e,t,a){},"337f":function(e,t,a){},"36fc":function(e,t,a){"use strict";a("2934")},4678:function(e,t,a){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function o(e){var t=r(e);return a(t)}function r(e){if(!a.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id="4678"},"4aea":function(e,t,a){},"53dd":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),o=a("2b27"),r=a.n(o),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-dark bg-dark"},[e._m(0),a("div",{staticClass:"input-group"},[a("button",{staticClass:"btn btn-secondary dropdown-toggle",attrs:{id:"dropNavBar",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(e._s(e.selected))]),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selected="Articoli"}}},[e._v("Articoli")]),a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selected="Clienti"}}},[e._v("Clienti")]),a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selected="Prenotazioni"}}},[e._v("Prenotazioni")])]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.text,expression:"text"}],staticClass:"form-control",attrs:{id:"searchText",type:"text",placeholder:"Cerca...","aria-label":"Barra di ricerca"},domProps:{value:e.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search.apply(null,arguments)},input:function(t){t.target.composing||(e.text=t.target.value)}}}),a("button",{staticClass:"btn btn-secondary",attrs:{type:"button",id:"searchButton"},on:{click:function(t){return e.search()}}},[e._v("Cerca")])]),e._m(1)]),a("div",{staticClass:"collapse text-center text-light bg-dark",attrs:{id:"navbarToggleExternalContent"}},[a("div",{staticClass:"bg-dark p-2 row"},[a("div",{staticClass:"col-2"}),a("div",{staticClass:"col-4"},[a("p",[a("a",{staticClass:"text-light",attrs:{href:"/public/login.html"},on:{click:e.logOut}},[e._v("Logout")])]),e._m(2),e._m(3)]),a("div",{staticClass:"col-4"},[a("p",[a("a",{staticClass:"text-light",attrs:{href:"javascript:void(null);"},on:{click:e.create}},[e._v(" Aggiungi articolo ")])]),a("p",[a("a",{staticClass:"text-light",attrs:{href:"javascript:void(null);"},on:{click:e.analyticsClient}},[e._v("Analytics Clienti")])]),a("p",[a("a",{staticClass:"text-light",attrs:{href:"javascript:void(null);"},on:{click:e.analyticsAll}},[e._v("Analytics Catalogo")])])]),a("div",{staticClass:"col-2"})])]),a("router-view",{key:e.$route.fullPath,on:{clicked:e.backToCatalog}})],1)},n=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("a",{attrs:{href:"/manager/index.html"}},[a("img",{staticClass:"moveright",attrs:{src:"https://cdn.discordapp.com/attachments/888778821262790686/926860373775249469/nolonoloplus.png",alt:"logo NoloNoloPlus",height:"40px"}})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("button",{staticClass:"navbar-toggler moveleft",attrs:{type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarToggleExternalContent","aria-controls":"navbarToggleExternalContent","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("a",{staticClass:"text-light",attrs:{href:"http://site202131.tw.cs.unibo.it/user/index.html"}},[e._v("Front Offcice")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("p",[a("a",{staticClass:"text-light",attrs:{href:"http://site202131.tw.cs.unibo.it/worker/index.html"}},[e._v("Back Office")])])}],l=a("d4ec"),c=a("bee2"),d=(a("4de4"),a("4e82"),a("bc3a")),u=a.n(d),m=a("db49"),p=a.n(m),v=u.a.create({baseURL:p.a.site202131Url,headers:{"Content-type":"application/json","Access-Control-Allow-Origin":"*",dataType:"jsonp",credentials:"include"}}),b=function(){function e(){Object(l["a"])(this,e)}return Object(c["a"])(e,[{key:"checkCookie",value:function(){console.log("Cookie"),v.get("/api/public/auth").then((function(e){2!==e.data.obj&&(window.location=p.a.site202131Url+"/public/login.html")})).catch((function(e){window.location=p.a.site202131Url+"/public/login.html"}))}},{key:"getProduct",value:function(e){return v.get("/api/product/?id="+e)}},{key:"getAllProduct",value:function(e){return v.get("/api/product/all/?filter="+e.filter+"&sort="+e.sort)}},{key:"saveDataProduct",value:function(e,t){return v.post("/api/product?id="+e,t)}},{key:"addProduct",value:function(e){return v.post("/api/product",e)}},{key:"deleteProduct",value:function(e){return v.delete("/api/product?id="+e)}},{key:"getUser",value:function(e){return v.get("/api/user?email="+e)}},{key:"getAllUser",value:function(e){return v.get("/api/user/all?filter="+e.filter+"&sort="+e.sort)}},{key:"saveDataClient",value:function(e,t){return v.post("/api/user?id="+e,t)}},{key:"deleteUser",value:function(e){return v.delete("/api/user?id="+e)}},{key:"getReservation",value:function(e){return v.get("/api/reservation/?id="+e)}},{key:"getAllReservation",value:function(e){return v.get("/api/reservation/all?filter="+e.filter+"&sort="+e.sort)}},{key:"saveReservation",value:function(e,t){return v.post("/api/reservation?id="+e,t)}},{key:"addReservation",value:function(e){return v.post("/api/reservation",e)}},{key:"deleteReservation",value:function(e){return v.delete("/api/reservation/?id="+e)}},{key:"getTags",value:function(e){return v.get("/api/stat/?tag="+e)}}]),e}(),h=new b,f=(a("ab8b"),a("7b17"),{data:function(){return{catalog:[],text:"",selected:"Articoli",choice:0}},created:function(){h.checkCookie()},methods:{search:function(){this.request=this.text,"Articoli"==this.selected?this.$router.push({name:"articleCatalog",params:{filter:this.text}}).catch((function(){})):"Clienti"==this.selected?this.$router.push({name:"clientCatalog",params:{filter:this.text}}).catch((function(){})):this.$router.push({name:"reservationCatalog",params:{filter:this.text}}).catch((function(){}))},logOut:function(){this.$cookies.remove("jwt")},create:function(){this.$router.push({path:"/createArticle"}).catch((function(){}))},analyticsClient:function(){this.$router.push({name:"clientChart",params:{id:""}}).catch((function(){}))},analyticsAll:function(){this.$router.push({name:"chartCatalog"}).catch((function(){}))}}}),g=f,y=(a("034f"),a("2877")),C=Object(y["a"])(g,s,n,!1,null,null,null),S=C.exports,k=a("8c4f"),x=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid p-2"},e._l(e.catalog,(function(t){return a("div",{key:t._id},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("div",{staticClass:"card mb-1 mt-1 w-100",staticStyle:{height:"10em",width:"90%"}},[a("div",{staticClass:"card-body h-100 w-100"},[a("div",{staticClass:"row h-100"},[a("div",{staticClass:"col-5 d-flex align-items-center h-100"},[a("img",{staticClass:"myImg",attrs:{tabindex:"0",alt:"immagine "+t.title+" "+t.brand,src:t.image}})]),a("div",{staticClass:"col-7 p-2",staticStyle:{height:"100%"}},[a("h2",{staticClass:"mb-2 text-truncate"},[a("router-link",{attrs:{to:{name:"article",params:{id:t._id}}}},[e._v(e._s(t.title+" "+t.brand))])],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-5"},[t.discount.onSale?a("div",{staticClass:"mb-2 price",attrs:{tabindex:"0","aria-label":"Prezzo fisso: "+e.discount(t)}},[a("s",[e._v(e._s(t.fixedPrice)+"€ ")]),e._v(" "+e._s(e.discount(t))+"€ ")]):a("div",{staticClass:"mb-2 price",attrs:{tabindex:"0","aria-label":"Prezzo fisso: "+t.fixedPrice}},[e._v(e._s(t.fixedPrice)+"€")])]),a("div",{staticClass:"col-5"},[a("div",{staticClass:"mb-2 price",attrs:{tabindex:"0","aria-label":"Prezzo giornaliero: "+t.price}},[e._v(" "+e._s(t.price)+" €/giorno ")])])]),a("div",{attrs:{tabindex:"0","aria-label":t.quality+" stella/e su tre"}},[e._l(parseInt(t.quality),(function(e){return a("span",{key:e,staticClass:"fa fa-star checked big-size"})})),e._l(3-parseInt(t.quality),(function(e){return a("span",{key:e,staticClass:"fa fa-star big-size"})}))],2)])])])])])])})),0)},_=[],D=(a("b680"),{data:function(){return{catalog:[]}},mounted:function(){this.getArticles()},update:function(){this.catalog=[],this.getArticles()},methods:{getArticles:function(){var e=this,t=void 0!==this.$route.params.filter?this.$route.params.filter:"",a={filter:t,sort:!1};h.getAllProduct(a).then((function(t){console.log(t),e.catalog=t.data.data})).catch((function(t){e.$router.push({name:"home",params:{filter:""}})}))},discount:function(e){return e.discount.onSaleType?(e.fixedPrice-e.fixedPrice*e.discount.onSaleValue/100).toFixed(2):(e.fixedPrice-e.discount.onSaleValue).toFixed(2)}}}),P=D,w=(a("21b7"),Object(y["a"])(P,x,_,!1,null,null,null)),z=w.exports,M=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid p-2"},e._l(e.catalog,(function(t){return a("div",{key:t._id},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("div",{staticClass:"card mt-1 mb-1 w-100",staticStyle:{height:"10em",width:"90%"}},[a("div",{staticClass:"card-body h-100 w-100"},[a("div",{staticClass:"row h-100"},[e._m(0,!0),a("div",{staticClass:"col-8 p-2 text-truncate",staticStyle:{height:"100%"}},[a("h2",[a("router-link",{attrs:{tabindex:"0","aria-label":"link a cliente"+t.email,to:{name:"client",params:{email:t.email}}}},[e._v(e._s(t.userName+" "+t.userSurname))])],1),a("h4",{attrs:{tabindex:"0"}},[e._v("Email: "+e._s(t.email))]),a("h4",{attrs:{tabindex:"0","aria-label":"numero di telefono: "+t.phoneNumber}},[e._v("Telefono: "+e._s(t.phoneNumber))])])])])])])])})),0)},T=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-4 align-items-center h-100"},[a("img",{staticClass:"myImg ",attrs:{src:"https://upload.wikimedia.org/wikipedia/commons/9/99/Sample_User_Icon.png",tabindex:"0",alt:"Immagine utente generica"}})])}],j={data:function(){return{catalog:[]}},mounted:function(){var e=this,t=void 0!==this.$route.params.filter?this.$route.params.filter:"",a={filter:t,sort:!1};console.log(a),h.getAllUser(a).then((function(t){console.log(t),e.catalog=t.data.data})).catch((function(t){alert("Problema nel caricamento dei dati"),e.$router.push({name:"home",params:{filter:""}})}))}},O=j,V=Object(y["a"])(O,M,T,!1,null,null,null),I=V.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid "},[a("button",{staticClass:"btn btn-secondary dropdown-toggle mb-1",attrs:{id:"dropNavRes","aria-label":"selettore delle prenotazioni",type:"button","data-bs-toggle":"dropdown","aria-expanded":"false"}},[e._v(e._s(e.text))]),a("div",{staticClass:"dropdown-menu dropdown-menu-right"},[a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selectedFilter="all",e.changeFilter()}}},[e._v("Tutte")]),a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selectedFilter="active",e.changeFilter()}}},[e._v("Attive")]),a("button",{staticClass:"dropdown-item",attrs:{type:"button"},on:{click:function(t){e.selectedFilter="old",e.changeFilter()}}},[e._v("Passate")])]),e._l(e.reservations,(function(t){return a("div",{key:t._id},[a("div",{staticClass:"d-flex justify-content-center align-items-center"},[a("div",{staticClass:"card mb-1 mt-1 w-100",staticStyle:{height:"10em",width:"90%"}},[a("div",{staticClass:"card-body h-100 w-100"},[a("div",{staticClass:"row h-100"},[a("div",{staticClass:"col-5 align-items-center h-100"},[a("img",{staticClass:"myImg ",attrs:{tabindex:"0",alt:"immagine"+t.productTitle+" "+t.productBrand,src:t.productImage}})]),a("div",{staticClass:"col-7 p-2",staticStyle:{height:"100%"}},[a("h4",{staticClass:"text-truncate"},[e._v("Id: "),a("router-link",{attrs:{"aria-label":"Id prenoatazione"+t._id,to:{name:"reservation",params:{id:t._id}}}},[e._v(e._s(t._id))])],1),a("h4",{staticClass:"text-truncate"},[e._v("Articolo: "),a("router-link",{attrs:{"aria-label":"Articolo prenotato: "+t.productTitle+" "+t.productBrand,to:{name:"article",params:{id:t.productId}}}},[e._v(e._s(t.productTitle+" "+t.productBrand))])],1),a("h4",{staticClass:"text-truncate"},[e._v("Cliente: "),a("router-link",{attrs:{"aria-label":"email cliente prenotante"+t.clientEmail,to:{name:"client",params:{email:t.clientEmail}}}},[e._v(e._s(t.clientEmail))])],1)])])])])])])}))],2)},F=[],q={data:function(){return{text:"Tutte",reservations:[],catalog:[],selectedFilter:"all"}},mounted:function(){var e=this,t=void 0!==this.$route.params.filter?this.$route.params.filter:"",a={filter:t,sort:!1};h.getAllReservation(a).then((function(t){for(var a in console.log(t),e.catalog=t.data.obj,e.catalog)e.reservations.push(e.catalog[a])})).catch((function(t){alert("Problema nel caricamento dei dati"),e.$router.push({name:"home",params:{filter:""}})}))},methods:{changeFilter:function(){var e=new Date,t=e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate();if(this.reservations=[],"all"==this.selectedFilter)for(var a in this.text="Tutte",this.catalog)this.reservations.push(this.catalog[a]);else if("active"==this.selectedFilter)for(var i in this.text="Attive",this.catalog){var o=this.catalog[i].endDate.year+"-"+this.catalog[i].endDate.month+"-"+this.catalog[i].endDate.day;t<=o&&this.reservations.push(this.catalog[i])}else if("old"==this.selectedFilter)for(var r in this.text="Passate",this.catalog){var s=this.catalog[r].endDate.year+"-"+this.catalog[r].endDate.month+"-"+this.catalog[r].endDate.day;t>=s&&this.reservations.push(this.catalog[r])}}},computed:{}},E=q,A=Object(y["a"])(E,N,F,!1,null,null,null),$=A.exports,R=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center"},[a("div",{staticClass:"w-100"},[a("form",{attrs:{name:"myform"},on:{submit:function(t){return t.preventDefault(),e.createArticle.apply(null,arguments)}}},[a("h1",{staticClass:"mb-4"},[e._v(" Aggiungi articolo ")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.title,expression:"title"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Titolo, campo obbligatorio",required:""},domProps:{value:e.title},on:{input:function(t){t.target.composing||(e.title=t.target.value)}}}),a("label",{attrs:{for:"title"}},[e._v(" Titolo*")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.brand,expression:"brand"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Brand"},domProps:{value:e.brand},on:{input:function(t){t.target.composing||(e.brand=t.target.value)}}}),a("label",{attrs:{for:"brand"}},[e._v(" Brand ")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.image,expression:"image"}],staticClass:"form-control",attrs:{type:"url","aria-label":"Immagine, inserire URL campo obbligatorio",required:""},domProps:{value:e.image},on:{input:function(t){t.target.composing||(e.image=t.target.value)}}}),a("label",{attrs:{for:"image"}},[e._v(" Immagine* (Inserisci URL)")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tags,expression:"tags"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Categorie, separare con spazio o virgola"},domProps:{value:e.tags},on:{input:function(t){t.target.composing||(e.tags=t.target.value)}}}),a("label",{attrs:{for:"tags"}},[e._v(" Etichette (separare con spazio o virgola)")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quality,expression:"quality"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"3",step:"1","aria-label":"Qualità: da 1 a 3",required:""},domProps:{value:e.quality},on:{input:function(t){t.target.composing||(e.quality=t.target.value)}}}),a("label",{attrs:{for:"quality"}},[e._v(" Qualità*")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fixedPrice,expression:"fixedPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01","aria-label":"Prezzo fisso, campo obbligatorio",required:""},domProps:{value:e.fixedPrice},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.fixedPrice=t.target.value)}}}),a("label",{attrs:{for:"fixedPrice"}},[e._v(" Prezzo Fisso*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(0),a("div",{staticClass:"col-9 "},[a("div",{staticClass:" form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSale,expression:"onSale"}],staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"seleziona per scegliere sconto percentuale o fisso sul prezzo fisso"},domProps:{checked:Array.isArray(e.onSale)?e._i(e.onSale,null)>-1:e.onSale},on:{change:[function(t){var a=e.onSale,i=t.target,o=!!i.checked;if(Array.isArray(a)){var r=null,s=e._i(a,r);i.checked?s<0&&(e.onSale=a.concat([r])):s>-1&&(e.onSale=a.slice(0,s).concat(a.slice(s+1)))}else e.onSale=o},e.newPrice]}}),e.onSale?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("Il prodotto non è scontato")])])])]),e.onSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfo"}},[a("div",{staticClass:"row"},[e._m(1),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleType,expression:"onSaleType"}],staticClass:"form-check-input",attrs:{"aria-label":"Sconto percentuale, seleziona uno dei due",type:"radio",id:"percentage",required:""},domProps:{value:!0,checked:e._q(e.onSaleType,!0)},on:{click:e.changeType,change:function(t){e.onSaleType=!0}}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentage"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleType,expression:"onSaleType"}],staticClass:"form-check-input",attrs:{tabindex:"0","aria-label":"Sconto fisso, seleziona uno dei due",type:"radio",id:"flat",required:""},domProps:{value:!1,checked:e._q(e.onSaleType,!1)},on:{click:e.changeType,change:function(t){e.onSaleType=!1}}}),a("label",{staticClass:"form-check-label",attrs:{for:"flat"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleValue,expression:"onSaleValue"}],staticClass:"form-control",attrs:{type:"number","aria-label":"valore sconto, campo obbligatorio",min:"1",step:".01",id:"saleValue",required:""},domProps:{value:e.onSaleValue},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.onSaleValue=t.target.value)}}})])]),a("div",{staticClass:"row mt-2 mb-2"},[a("div",{staticClass:"col-3"},[e._v("Prezzo scontato:")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newTotal,expression:"newTotal"}],staticClass:"form-control",attrs:{type:"number",tabindex:"0","aria-label":"Prezzo fisso scontato, sola lettura. Se negativo questo valore è negativo non si potrà aggiungere il prodotto al catalogo"+e.newTotal,id:"newValue",readonly:""},domProps:{value:e.newTotal},on:{input:function(t){t.target.composing||(e.newTotal=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dailyPrice,expression:"dailyPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01","aria-label":"Prezzo giornaliero, campo obbligatorio",required:""},domProps:{value:e.dailyPrice},on:{input:function(t){t.target.composing||(e.dailyPrice=t.target.value)}}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Giornaliero*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(3),a("div",{staticClass:"col-9 "},[a("div",{staticClass:" form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSale,expression:"overOnSale"}],staticClass:"form-check-input",attrs:{type:"checkbox",id:"dailySale","aria-label":"seleziona per scegliere sconto percentuale o fisso sul prezzo giornaliero"},domProps:{checked:Array.isArray(e.overOnSale)?e._i(e.overOnSale,null)>-1:e.overOnSale},on:{click:e.changeDailySale,change:function(t){var a=e.overOnSale,i=t.target,o=!!i.checked;if(Array.isArray(a)){var r=null,s=e._i(a,r);i.checked?s<0&&(e.overOnSale=a.concat([r])):s>-1&&(e.overOnSale=a.slice(0,s).concat(a.slice(s+1)))}else e.overOnSale=o}}}),e.overOnSale?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"dailySale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"dailySale"}},[e._v("Il prodotto non è scontato")])])])]),e.overOnSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfoOver"}},[a("div",{staticClass:"row"},[e._m(4),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSaleType,expression:"overOnSaleType"}],staticClass:"form-check-input",attrs:{type:"radio","aria-label":"Sconto percentuale, seleziona uno dei due",id:"percentageOver",required:""},domProps:{value:!0,checked:e._q(e.overOnSaleType,!0)},on:{change:function(t){e.overOnSaleType=!0}}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentageOver"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSaleType,expression:"overOnSaleType"}],staticClass:"form-check-input",attrs:{type:"radio","aria-label":"Sconto fisso, seleziona uno dei due",id:"flatOver",required:""},domProps:{value:!1,checked:e._q(e.overOnSaleType,!1)},on:{change:function(t){e.overOnSaleType=!1}}}),a("label",{staticClass:"form-check-label",attrs:{for:"flatOver"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row"},[e._m(5),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSaleValue,expression:"overOnSaleValue"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01",id:"saleValueOVer","aria-label":"valore sconto, campo obbligatorio",required:""},domProps:{value:e.overOnSaleValue},on:{input:function(t){t.target.composing||(e.overOnSaleValue=t.target.value)}}})])]),a("div",{staticClass:"row mt-2 mb-2"},[a("div",{staticClass:"col-3"},[e._v("Giorni da superare per sconto:")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overDays,expression:"overDays"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:"1",id:"daysDiscount","aria-label":"giorni da superare per ottenere sconto, campo obbligatorio",required:""},domProps:{value:e.overDays},on:{input:function(t){t.target.composing||(e.overDays=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"row mb-3"},[e._m(6),a("div",{staticClass:"col-9"},[a("div",{staticClass:" form-check"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.available,expression:"available"}],staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"Selezionare per rendere disponibile il prodotto"},domProps:{checked:e.available,checked:Array.isArray(e.available)?e._i(e.available,null)>-1:e.available},on:{click:e.changeAvailable,change:function(t){var a=e.available,i=t.target,o=!!i.checked;if(Array.isArray(a)){var r=null,s=e._i(a,r);i.checked?s<0&&(e.available=a.concat([r])):s>-1&&(e.available=a.slice(0,s).concat(a.slice(s+1)))}else e.available=o}}}),e.available?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"available"}},[e._v("L'articolo sarà disponibile")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"available"}},[e._v("L'articolo non sarà disponile")])])])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.description,expression:"description"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Descrizione prodotto, campo obbligatorio",required:""},domProps:{value:e.description},on:{input:function(t){t.target.composing||(e.description=t.target.value)}}}),a("label",{attrs:{for:"description"}},[e._v(" Descrizione*")])]),a("div",{staticClass:"form-floating mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.note,expression:"note"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Note non visibili ai clienti"},domProps:{value:e.note},on:{input:function(t){t.target.composing||(e.note=t.target.value)}}}),a("label",{attrs:{for:"note"}},[e._v(" Note (non visibili ai clienti)")])]),a("div",{staticClass:"row mb-5"},[a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"submit","aria-label":"Bottone salva. Dopo la crezioe rimane su questa pagina e resetta i campi",disabled:e.enter||e.newTotal<0}},[e._v("Salva")])]),a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-lg btn-danger delete",attrs:{type:"reset","aria-label":"Bottone annulla, pulirà i campi",disabled:e.enter},on:{click:e.cancel}},[e._v("Annulla")])])])],2)])])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo fisso:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo giornaliero:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Disponibilità:")])])])}],Y=a("2909"),L=(a("ac1f"),a("5319"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("1276"),a("a434"),a("a4d3"),a("e01a"),{name:"create-article",data:function(){return{enter:!1,title:"",brand:"",image:"",tags:"",quality:1,fixedPrice:"",dailyPrice:"",overDays:"",overOnSale:!1,overOnSaleType:!1,overOnSaleValue:"",onSale:!1,onSaleType:!1,onSaleValue:0,newTotal:"",available:!1,description:"",note:""}},methods:{changeSale:function(){this.onSale?(this.onSale=!1,this.onSaleType=!1,this.onSaleValue=0):this.onSale=!0,this.newPrice()},changeType:function(){this.onSaleType=!this.onSaleType,this.newPrice()},changeDailySale:function(){this.overOnSale?(this.overOnSale=!1,this.overOnSaleType=!1,this.overOnSaleValue=0,this.overDays=0):this.overOnSale=!0},changeAvailable:function(){this.available=!this.available},newPrice:function(){this.onSale&&(this.onSaleType?this.newTotal=(this.fixedPrice-this.fixedPrice*this.onSaleValue/100).toFixed(2):this.newTotal=this.fixedPrice-this.onSaleValue)},createArticle:function(){var e=this;this.enter=!0;var t={};if(t.title=this.title,t.brand=this.brand,t.image=this.image,""==this.tags)t.tags="";else{var a=this.tags.replace(/,/g," ");a=Object(Y["a"])(new Set(a.split(" ")));for(var i=0;i<a.length;i++)""==a[i]&&a.splice(i,1);t.tags=a}t.discount={},t.discount.onSale=this.onSale,this.onSale?(t.discount.onSaleType=this.onSaleType,t.discount.onSaleValue=parseFloat(this.onSaleValue)):(t.discount.onSaleType=!1,t.discount.onSaleValue=0),t.overDays={},this.overOnSale?(t.overDays.onSale=this.overOnSale,t.overDays.onSaleType=this.overOnSaleType,t.overDays.onSaleValue=parseFloat(this.overOnSaleValue),t.overDays.days=parseInt(this.overDays)):(t.overDays.onSale=!1,t.overDays.onSaleType=!1,t.overDays.onSaleValue=0,t.overDays.days=0),t.price=parseFloat(this.dailyPrice),t.fixedPrice=parseFloat(this.fixedPrice),t.quality=parseInt(this.quality),t.available=this.available,t.description=this.description,t.note=this.note,t.bookings=[],console.log(t),h.addProduct(t).then((function(){e.cancel(),e.enter=!1,alert("Creazione riuscita")})).catch((function(e){alert("Problema nel caricamento dei dati")}))},cancel:function(){this.title="",this.brand="",this.image="",this.tags="",this.quality=1,this.fixedPrice="",this.dailyPrice="",this.onSale&&this.changeSale(),this.overOnSale&&this.changeDailySale(),this.available=!1,this.description="",this.note="",this.newTotal=""}}}),G=L,U=(a("d0aa"),Object(y["a"])(G,R,B,!1,null,null,null)),Z=U.exports,Q=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("form",{attrs:{name:"myform",id:"formId"},on:{submit:function(t){return t.preventDefault(),e.createReservation.apply(null,arguments)}}},[a("h1",{staticClass:"mb-4",attrs:{tabindex:"0"}},[e._v(" Aggiungi prenotazione ")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"email","aria-label":"Email cliente, campo obbligatorio",required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("label",{attrs:{for:"email"}},[e._v(" Email cliente*")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.articleId,expression:"articleId"}],staticClass:"form-control",attrs:{type:"text",tabindex:"0",id:"articleId","aria-label":"Id articolo:"+e.articleId,readonly:""},domProps:{value:e.articleId},on:{input:function(t){t.target.composing||(e.articleId=t.target.value)}}}),a("label",{attrs:{for:"articleId"}},[e._v(" ID articolo*")])]),a("div",{staticClass:"row mb-3"},[e._m(0),a("div",{staticClass:"col-7"},[a("date-picker",{attrs:{"input-attr":{required:"true"},id:"date",placeholder:"GG-MM-YYYY GG-MM-YYYY",range:"","range-separator":" ",lang:e.lang,"disabled-date":e.dateDisabled,format:"DD-MM-YYYY",required:""},on:{change:e.changeData},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})],1)]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fixedPrice,expression:"fixedPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01","aria-label":"Prezzo fisso, campo obbligatorio",required:""},domProps:{value:e.fixedPrice},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.fixedPrice=t.target.value)}}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Fisso*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(1),a("div",{staticClass:"col-9 "},[a("div",{staticClass:" form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"Sconto prezzo fisso, seleziona per abilitare"},domProps:{checked:e.onSale},on:{click:e.changeSale}}),e.onSale?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("Il prodotto non è scontato")])])])]),e.onSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfo"}},[a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"sconto percentuale, seleziona uno dei due",type:"radio",id:"percentage",required:""},domProps:{value:!0,checked:e.onSaleType},on:{click:e.changeOnSaleType}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentage"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"sconto fisso, seleziona uno dei due",type:"radio",id:"flat",required:""},domProps:{value:!1,checked:!e.onSaleType},on:{click:e.changeOnSaleType}}),a("label",{staticClass:"form-check-label",attrs:{for:"flat"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row mb-3"},[e._m(3),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleValue,expression:"onSaleValue"}],staticClass:"form-control",attrs:{type:"number","aria-label":"valore sconto, campo obbligatorio",min:"1",step:".01",id:"saleValue",required:""},domProps:{value:e.onSaleValue},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.onSaleValue=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dailyPrice,expression:"dailyPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01","aria-label":"Prezzo giornaliero, campo obbligatorio",required:""},domProps:{value:e.dailyPrice},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.dailyPrice=t.target.value)}}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Giornaliero*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(4),a("div",{staticClass:"col-9 "},[a("div",{staticClass:" form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"sconto prezzo giornaliero, seleziona per abilitare"},domProps:{checked:e.overOnSale},on:{click:e.changeDailySale}}),e.overOnSale?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"sale"}},[e._v("Il prodotto non è scontato")])])])]),e.overOnSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfoOver"}},[a("div",{staticClass:"row"},[e._m(5),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"sconto giornaliero percentuale, seleziona uno dei due",type:"radio",id:"percentageOver",required:""},domProps:{value:!0,checked:e.overOnSaleType},on:{click:e.changeType}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentage"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"sconto giornaliero fisso, seleziona uno dei due",type:"radio",id:"flatOver",required:""},domProps:{value:!1,checked:!e.overOnSaleType},on:{click:e.changeType}}),a("label",{staticClass:"form-check-label",attrs:{for:"flat"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row"},[e._m(6),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSaleValue,expression:"overOnSaleValue"}],staticClass:"form-control",attrs:{type:"number","aria-label":"valore sconto giornaliero, campo obbligatorio ",min:"1",step:".01",id:"saleValueOVer",required:""},domProps:{value:e.overOnSaleValue},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.overOnSaleValue=t.target.value)}}})])]),a("div",{staticClass:"row mt-2 mb-2"},[a("div",{staticClass:"col-3"},[e._v("Giorni da superare per sconto:")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overDaysCount,expression:"overDaysCount"}],staticClass:"form-control",attrs:{type:"number","aria-label":"giorni da superare per ottenere sconto, campo obbligatorio",min:"1",step:"1",id:"daysDiscount",required:""},domProps:{value:e.overDaysCount},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.overDaysCount=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"number","aria-label":"Prezzo totale prenotazione"+e.newTotal+"€. Se negativo o uguale a zero non si potrà creare la prenotazione",readonly:""},domProps:{value:e.newTotal}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Totale")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.notes,expression:"notes"}],staticClass:"form-control",attrs:{type:"text",id:"notes","aria-label":"Descrizione prenotazione"},domProps:{value:e.notes},on:{input:function(t){t.target.composing||(e.notes=t.target.value)}}}),a("label",{attrs:{for:"notes"}},[e._v(" Descrizione")])]),a("div",{staticClass:"form-floating mb-4"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.privateNotes,expression:"privateNotes"}],staticClass:"form-control",attrs:{type:"text",id:"privateNotes","aria-label":"Note non visibili ai clienti"},domProps:{value:e.privateNotes},on:{input:function(t){t.target.composing||(e.privateNotes=t.target.value)}}}),a("label",{attrs:{for:"privateNotes"}},[e._v(" Note (non visibili ai clienti)")])]),a("div",{staticClass:"row"},[a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-lg btn-success",attrs:{type:"submit","aria-label":"bottone crea prenotazione, dopo la creazione rimane su questa pagina pulendo i campi tranne i prezzi",id:"save",disabled:e.enter||e.negativePrice}},[e._v("Salva")])]),a("div",{staticClass:"col-6"},[a("button",{staticClass:"btn btn-lg btn-danger delete",attrs:{type:"button","aria-label":"bottone annulla, pulisce i campi tranne i prezzi",id:"clear",disabled:e.enter},on:{click:e.cancel}},[e._v("Annulla")])])])],2)])])},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-5"},[a("label",{staticClass:"mr-3",attrs:{tabindex:"0","aria-label":"Etichetta periodo prenotazione, separare le due date con uno spazio. Le date devono essere nel formato GG trattino MM trattino YYYY. Campo obbligatorio",for:"date"}},[e._v("Periodo Prenotazione* ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo fisso:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo giornaliero:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])}],W=a("ec45"),H=(a("411c"),{name:"create-article",components:{DatePicker:W["a"]},data:function(){return{enter:!1,article:{},email:"",articleId:"",dailyPrice:"",fixedPrice:"",newTotal:"",onSale:!1,onSaleType:!1,onSaleValue:0,overDaysCount:"",overOnSale:!1,overOnSaleType:!1,overOnSaleValue:0,notes:"",privateNotes:"",negativePrice:!1,time:null,lang:{formatLocale:{firstDayOfWeek:1,months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Augosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdaysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"]},monthBeforeYear:!1}}},created:function(){var e=this;this.articleId=this.$route.params.id,h.getProduct(this.articleId).then((function(t){e.article=t.data.data.obj,console.log(e.article),e.dailyPrice=e.article.price,e.fixedPrice=e.article.fixedPrice,e.onSale=e.article.discount.onSale,e.onSaleType=e.article.discount.onSaleType,e.onSaleValue=e.article.discount.onSaleValue,e.overDaysCount=e.article.overDays.days,e.overOnSale=e.article.overDays.onSale,e.overOnSaleType=e.article.overDays.onSaleType,e.overOnSaleValue=e.article.overDays.onSaleValue})).catch((function(t){alert("La pagina non esiste"),e.$router.push({name:"home"})}))},methods:{changeSale:function(){this.onSale?(this.onSale=!1,this.onSaleType=!1,this.onSaleValue=0):this.onSale=!0,this.newPrice()},changeOnSaleType:function(){this.onSaleType=!this.onSaleType,this.newPrice()},changeDailySale:function(){this.overOnSale?(this.overOnSale=!1,this.overOnSaleType=!1,this.overOnSaleValue=0,this.overDaysCount=0):this.overOnSale=!0,this.newPrice()},changeType:function(){this.overOnSaleType=!this.overOnSaleType,this.newPrice()},createReservation:function(){var e=this;this.enter=!0;var t={};t.clientEmail=this.email,t.productId=this.articleId,t.isTaken=!1,t.isReturned=!1,t.description=this.notes,t.note=this.privateNotes;var a=this.time[0].getDate(),i=this.time[0].getMonth()+1,o=this.time[0].getFullYear(),r=this.time[1].getDate(),s=this.time[1].getMonth()+1,n=this.time[1].getFullYear(),l=new Date;t.bookingDate={},t.bookingDate.day=parseInt(l.getDate()),t.bookingDate.month=parseInt(l.getMonth()+1),t.bookingDate.year=parseInt(l.getFullYear()),t.startDate={},t.startDate.day=parseInt(a),t.startDate.month=parseInt(i),t.startDate.year=parseInt(o),t.endDate={},t.endDate.day=parseInt(r),t.endDate.month=parseInt(s),t.endDate.year=parseInt(n),t.productTitle=this.article.title,t.productBrand=this.article.brand,t.productImage=this.article.image,t.variablePrice=parseFloat(this.dailyPrice),t.fixedPrice=parseFloat(this.fixedPrice),t.totalPrice=parseFloat(this.newTotal),t.fixedDiscount={},this.onSale?(t.fixedDiscount.onSale=!0,t.fixedDiscount.onSaleType=this.onSaleType,t.fixedDiscount.onSaleValue=parseFloat(this.onSaleValue)):(t.fixedDiscount.onSale=!1,t.fixedDiscount.onSaleType=!1,t.fixedDiscount.onSaleValue=0),t.variableDiscount={},this.overOnSale?(t.variableDiscount.onSale=!0,t.variableDiscount.onSaleType=this.overOnSaleType,t.variableDiscount.days=parseInt(this.overDaysCount),t.variableDiscount.onSaleValue=parseFloat(this.overOnSaleValue)):(t.variableDiscount.days=0,t.variableDiscount.onSale=!1,t.variableDiscount.onSaleType=!1,t.variableDiscount.onSaleValue=0),h.getUser(this.email,1).then((function(l){console.log("GETUSER"),console.log(l),t.clientName=l.data.data.userName,t.clientSurname=l.data.data.userSurname,console.log(t),h.addReservation(t).then((function(t){console.log(t);var l={};l.id=e.articleId,l.clientId=e.email,l.reservationId=t.data.data._id,l.startDate={},l.startDate.day=parseInt(a),l.startDate.month=parseInt(i),l.startDate.year=parseInt(o),l.endDate={},l.endDate.day=parseInt(r),l.endDate.month=parseInt(s),l.endDate.year=parseInt(n),l.total=parseFloat(e.newTotal);var c={};c.bookings=e.article.bookings,c.bookings.push(l),h.saveDataProduct(e.articleId,c).then((function(){e.cancel(),e.enter=!1,alert("Creazione riuscita")})).catch((function(e){alert("Problema nella creazione della prenotazione")}))})).catch((function(e){alert("Problema nella creazione della prenotazione")}))})).catch((function(t){alert("Errore, la mail non esiste"),e.enter=!1}))},cancel:function(){this.time=null,this.email="",this.notes="",this.privateNotes="",this.dailyPrice=this.article.price,this.fixedPrice=this.article.fixedPrice,this.onSale=this.article.discount.onSale,this.onSaleType=this.article.discount.onSaleType,this.onSaleValue=this.article.discount.onSaleValue,this.overDaysCount=this.article.overDays.days,this.overOnSale=this.article.overDays.onSale,this.overOnSaleType=this.article.overDays.onSaleType,this.overOnSaleValue=this.article.overDays.onSaleValue,this.newPrice()},newPrice:function(){if(null!=this.time){var e,t,a=new Date(this.time[0].getFullYear(),this.time[0].getMonth(),this.time[0].getDate()),i=new Date(this.time[1].getFullYear(),this.time[1].getMonth(),this.time[1].getDate()),o=i-a,r=Math.ceil(o/864e5)+1;e=this.onSale?this.onSaleType?this.fixedPrice-this.fixedPrice*this.onSaleValue/100:this.fixedPrice-this.onSaleValue:this.fixedPrice,t=this.overOnSale&&r>this.overDaysCount?this.overOnSaleType?this.dailyPrice*r-this.dailyPrice*r*this.overOnSaleValue/100:this.dailyPrice*r-this.overOnSaleValue:this.dailyPrice*r,console.log(r+"-"+e+"-"+t),this.newTotal=parseFloat((parseFloat(e)+parseFloat(t)).toFixed(2)),this.newTotal<=0?this.negativePrice=!0:this.negativePrice=!1}},changeData:function(){if(null!=this.time){var e=new Date(this.time[0].getFullYear(),this.time[0].getMonth(),this.time[0].getDate()),t=new Date(this.time[1].getFullYear(),this.time[1].getMonth(),this.time[1].getDate());for(var a in this.article.bookings)if(this.article.bookings[a].reservationId!=this.reservationId){var i=new Date(this.article.bookings[a].endDate.year,this.article.bookings[a].endDate.month-1,this.article.bookings[a].endDate.day),o=new Date(this.article.bookings[a].startDate.year,this.article.bookings[a].startDate.month-1,this.article.bookings[a].startDate.day);e<=o&&i<=t&&(this.time=null)}this.newPrice()}},dateDisabled:function(e){var t=new Date;if(e<t)return!0;for(var a in this.article.bookings){var i=new Date(this.article.bookings[a].startDate.year,this.article.bookings[a].startDate.month-1,this.article.bookings[a].startDate.day),o=new Date(this.article.bookings[a].endDate.year,this.article.bookings[a].endDate.month-1,this.article.bookings[a].endDate.day);if(i<=e&&e<=o)return!0}return!1}}}),K=H,X=Object(y["a"])(K,Q,J,!1,null,null,null),ee=X.exports,te=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"row mb-3 mt-3"},[a("div",{staticClass:"col-6 d-flex align-items-center",staticStyle:{height:"15em"}},[a("img",{staticClass:"myImg",attrs:{id:"img",tabindex:"0",alt:"immagine"+e.title+e.brand,src:e.image}})]),a("div",{staticClass:"col-6"},[a("div",{attrs:{id:"productidentifier"}},[a("span",{attrs:{tabindex:"0","aria-label":"Identificativo:"+e.identifier}},[e._v(" ID: "+e._s(e.identifier)+" ")])]),a("div",[a("h4",{attrs:{tabindex:"0","aria-label":"Articolo:"+e.title+e.brand}},[e._v(e._s(e.title+" "+e.brand)+" ")])]),a("div",{attrs:{tabindex:"0","aria-label":e.quality+"stelle su tre"}},[e._l(parseInt(e.quality),(function(e){return a("span",{key:e,staticClass:"fa fa-star checked big-size"})})),e._l(3-parseInt(e.quality),(function(e){return a("span",{key:e,staticClass:"fa fa-star big-size"})}))],2),a("div",{staticClass:"mt-1 mb-1"},[a("span",{attrs:{tabindex:"0","aria-label":"Prezzo fisso:"+e.fixedPrice+"€"}},[e._v(e._s("Prezzo Fisso: "+e.fixedPrice+"€")+" "),a("span",{attrs:{id:"fixedPrice"}})])]),a("div",{staticClass:"mt-1 mb-1"},[e.discount.onSale?a("span",{attrs:{tabindex:"0","aria-label":"Prezzo fisso scontato:"+e.getDiscountedPrice()+"€"}},[a("span",{attrs:{id:"onSalePrice"}},[e._v(e._s("Prezzo fisso scontato: "+e.getDiscountedPrice())+"€")])]):e._e()]),a("div",{staticClass:"mt-1 mb-1"},[a("span",{attrs:{tabindex:"0","aria-label":"Prezzo giornaliero:"+e.dailyPrice+"€"}},[e._v(e._s("Prezzo giornaliero: "+e.dailyPrice+"€/giorno")+" "),a("span",{attrs:{id:"PriceforDay"}})])]),a("div",{staticClass:"mt-1 mb-1"},[e.overDays.onSale?a("span",{attrs:{tabindex:"0","aria-label":"Noleggia oltre "+e.overDays.days+" giorni per ottenere sconto giornaliero"}},[e._v(e._s("Noleggia oltre "+e.overDays.days+" giorni per ricevere sconto giornaliero")+" "),a("span",{attrs:{id:"fixedPrice"}})]):e._e()])])]),a("div",{staticClass:"row d-flex justify-content-between"},[a("div",{staticClass:"col align-items-center"},[a("b-button",{staticClass:"btn btn-lg btn-warning m-1",attrs:{id:"rentProduct","aria-label":"Bottone affitta. Porta alla pagina per la creazione di una prenotazione",disabled:e.enter||!e.available},on:{click:e.rent}},[e._v("Affitta")]),a("b-button",{staticClass:"btn btn-lg m-1",attrs:{type:"button","aria-label":"Bottone Modifica. Apre una finestra dove modificare i campi dell'articolo",variant:"primary",disabled:e.enter},on:{click:e.getModalData}},[e._v("Modifica")]),a("b-button",{staticClass:"btn btn-lg btn-danger m-1",attrs:{type:"button","aria-label":"Bottone elimina. Cancella l'articolo e porta sulla pagina del catalogo",disabled:e.boolDelete||e.enter},on:{click:e.deleteProduct}},[e._v("Elimina")]),a("b-button",{staticClass:"btn btn-lg btn-warning m-1",attrs:{"aria-label":"Bottone analytics. Porta alla pagina per vedere le statistiche di questo prodotto",disabled:0===e.bookings.length||e.enter},on:{click:e.stats}},[e._v(" Analytics ")])],1)]),a("div",{staticClass:"form-check form-switch m-1"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.available,expression:"available"}],staticClass:"form-check-input custom-switch ",attrs:{type:"checkbox",id:"flexSwitchCheckDefault",disabled:e.enter},domProps:{checked:e.available,checked:Array.isArray(e.available)?e._i(e.available,null)>-1:e.available},on:{click:e.changeInStock,change:function(t){var a=e.available,i=t.target,o=!!i.checked;if(Array.isArray(a)){var r=null,s=e._i(a,r);i.checked?s<0&&(e.available=a.concat([r])):s>-1&&(e.available=a.slice(0,s).concat(a.slice(s+1)))}else e.available=o}}}),e.available?a("label",{staticClass:"form-check-label",attrs:{"ria-label":"Bottone per cambiare la disponibilità articolo",for:"flexSwitchCheckDefault"}},[e._v("Modifica per disattivare articolo")]):a("label",{staticClass:"form-check-label",attrs:{for:"flexSwitchCheckDefault"}},[e._v("Modifica per attivare articolo")])]),a("b-modal",{ref:"myModal",staticClass:"modal",attrs:{"hide-footer":"","hide-header":"",id:"myModal"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("h4",{staticClass:"modal-title"},[e._v("Modifica prodotto")]),a("button",{staticClass:"btn-close",attrs:{type:"button","aria-label":"Bottone chiudi finestra di modifica"},on:{click:e.hideModal}})]),a("div",{staticClass:"modal-body"},[a("form",{attrs:{name:"myform",id:"formId"},on:{submit:function(t){return t.preventDefault(),e.saveData.apply(null,arguments)}}},[a("b-row",[a("b-col",{attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productName"}},[e._v("Nome*")])]),a("b-col",{attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productModel"}},[e._v("Marca")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{attrs:{cols:"6"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text","aria-label":"Titolo, Campo obbligatorio",id:"productname",required:""},model:{value:e.titleModal,callback:function(t){e.titleModal=t},expression:"titleModal"}})],1),a("b-col",{attrs:{cols:"6"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text","aria-label":"Brand, Campo obbligatorio",id:"productModel"},model:{value:e.brandModal,callback:function(t){e.brandModal=t},expression:"brandModal"}})],1)],1),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productTags"}},[e._v("Etichette (separare con uno spazio)")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.tagsModal,expression:"tagsModal"}],staticClass:"form-control w-80",attrs:{id:"productTags",rows:"3"},domProps:{value:e.tagsModal},on:{input:function(t){t.target.composing||(e.tagsModal=t.target.value)}}})])],1),a("b-row",{staticClass:"mb-3 d-flex align-items-center justify-content-between"},[a("b-col",{attrs:{cols:"4"}},[a("label",{staticClass:"form-label",attrs:{for:"imageLink"}},[e._v("Immagine* (link)")])]),a("b-col",{attrs:{cols:"8"}},[a("b-form-input",{staticClass:"form-control",attrs:{type:"text","aria-label":"L` mmagine deve essere in forma di URL. Campo obbligatorio"+e.imageModal,id:"imageLink",required:""},model:{value:e.imageModal,callback:function(t){e.imageModal=t},expression:"imageModal"}})],1)],1),a("b-row",[a("b-col",{staticClass:"mt-2 mb-3",attrs:{cols:"6"}},[a("label",{staticClass:"form-label",attrs:{for:"productQuality"}},[e._v("Qualità")])]),a("b-col",{staticClass:"mt-2 mb-3",attrs:{cols:"6"}},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.qualityModal,expression:"qualityModal"}],staticClass:"form-select",attrs:{"aria-label":"qualità:"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.qualityModal=t.target.multiple?a:a[0]}}},[a("option",{domProps:{value:1}},[e._v("1 - Condizioni accettabili")]),a("option",{attrs:{selected:""},domProps:{value:2}},[e._v("2 - Buone condizioni")]),a("option",{domProps:{value:3}},[e._v("3 - Come nuovo")])])])],1),a("hr"),a("b-row",[a("b-col",{staticClass:"mt-3 mb-3",attrs:{cols:"6"}},[a("label",{attrs:{for:"productPrice"}},[e._v("Prezzo Fisso*")])]),a("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("b-form-input",{staticClass:"form-control text-end",attrs:{type:"number",min:"1",step:".01",id:"productPrice","aria-label":"Prezzo fisso: campo obbligatorio",required:""},on:{keyup:e.changeDiscountValue},model:{value:e.fixedModal,callback:function(t){e.fixedModal=t},expression:"fixedModal"}}),a("span",{staticClass:"input-group-text justify-content-center"},[e._v("€")])],1)])],1),a("b-row",{staticClass:"mb-2 d-flex align-items-center justify-content-between"},[a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"onSale"},domProps:{checked:e.onSaleModal},on:{click:e.changeOnSale}}),a("label",{staticClass:"form-check-label",attrs:{for:"onSale"}},[e._v("Sconto fisso")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"discount","aria-label":"sconto percentuale. Seleziona uno dei due",id:"discountPercentage",disabled:!e.onSaleModal},domProps:{value:!0,checked:e.onSaleModal&&e.onSaleTypeModal},on:{click:e.changeDiscountType}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountPercentage"}},[e._v("Percentuale")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{id:"discountAmount",type:"radio","aria-label":"sconto fisso. Seleziona uno dei due",name:"discount",disabled:!e.onSaleModal},domProps:{value:!1,checked:e.onSaleModal&&0==e.onSaleTypeModal},on:{click:e.changeDiscountType}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountAmount"}},[e._v("Fisso")])])])],1),a("b-row",{staticClass:"mb-2 d-flex justify-content-end"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[e._v(" Sconto applicato ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text justify-content-center"},[e._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleValueModal,expression:"onSaleValueModal"}],staticClass:"form-control text-end",attrs:{type:"text",min:"1",step:".01","aria-label":"valore sconto prezzo fisso. Campo obbligatorio",disabled:!e.onSaleModal,required:""},domProps:{value:e.onSaleValueModal},on:{keyup:e.changeDiscountValue,input:function(t){t.target.composing||(e.onSaleValueModal=t.target.value)}}}),e.onSaleTypeModal?a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[e._v("%")]):a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[e._v("€")])])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[e._v(" Prezzo Fisso scontato ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.discountTotal,expression:"discountTotal"}],staticClass:"form-control text-end",attrs:{type:"text","aria-label":"Prezzo fisso scontato. Sola lettura. Se negativo non sarà possibile modificare il prodotto.",readonly:e.onSaleModal,disabled:!e.onSaleModal},domProps:{value:e.discountTotal},on:{input:function(t){t.target.composing||(e.discountTotal=t.target.value)}}}),a("span",{staticClass:"input-group-text justify-content-center"},[e._v("€")])])])],1),a("hr"),a("b-row",[a("b-col",{staticClass:"mt-3 mb-3",attrs:{cols:"6"}},[a("label",{attrs:{for:"dailyPrice"}},[e._v("Prezzo Giornaliero*")])]),a("b-col",{staticClass:"mt-2 mb-2",attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dailyModal,expression:"dailyModal"}],staticClass:"form-control text-end",attrs:{type:"number",min:"1",step:".01",id:"dailyPrice","aria-label":"Prezzo giornaliero. Campo obbligatorio",required:""},domProps:{value:e.dailyModal},on:{input:function(t){t.target.composing||(e.dailyModal=t.target.value)}}}),a("span",{staticClass:"input-group-text justify-content-center"},[e._v("€")])])])],1),a("b-row",{staticClass:"mb-2 d-flex align-items-center justify-content-between"},[a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox",id:"overSale"},domProps:{checked:e.overSaleModal},on:{click:e.changeOnSaleOverDays}}),a("label",{staticClass:"form-check-label",attrs:{for:"overSale"}},[e._v("Sconto")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio",name:"discountOver","aria-label":"sconto percentuale. Seleziona uno dei due",id:"overPercentage",disabled:!e.overSaleModal},domProps:{value:!0,checked:e.overSaleModal&&1==e.overSaleTypeModal},on:{click:e.changeDiscountTypeOverDays}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountPercentage"}},[e._v("Percentuale")])])]),a("b-col",{attrs:{cols:"3"}},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{id:"overFlat","aria-label":"sconto fisso. Seleziona uno dei due",type:"radio",name:"discountOver",disabled:!e.overSaleModal},domProps:{value:!1,checked:e.overSaleModal&&0==e.overSaleTypeModal},on:{click:e.changeDiscountTypeOverDays}}),a("label",{staticClass:"form-check-label",attrs:{for:"discountAmount"}},[e._v("Fisso")])])])],1),a("b-row",{staticClass:"mb-2 d-flex justify-content-end"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[e._v(" Sconto applicato ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("span",{staticClass:"input-group-text justify-content-center"},[e._v("-")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.overSaleValueModal,expression:"overSaleValueModal"}],staticClass:"form-control text-end",attrs:{type:"text","aria-label":"valore sconto giornaliero.",min:"1",step:".01",disabled:!e.overSaleModal,required:""},domProps:{value:e.overSaleValueModal},on:{input:function(t){t.target.composing||(e.overSaleValueModal=t.target.value)}}}),e.overSaleTypeModal?a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[e._v("%")]):a("span",{staticClass:"input-group-text justify-content-center",attrs:{id:"pd"}},[e._v("€")])])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",{staticClass:"d-flex align-items-center",attrs:{cols:"6"}},[e._v(" Giorni per sconto ")]),a("b-col",{attrs:{cols:"6"}},[a("div",{staticClass:"input-group"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overDaysModal,expression:"overDaysModal"}],staticClass:"form-control text-end",attrs:{type:"number","aria-label":"giorni da superare per ottenere sconto giornaliero.",min:"1",step:"1",disabled:!e.overSaleModal,required:""},domProps:{value:e.overDaysModal},on:{input:function(t){t.target.composing||(e.overDaysModal=t.target.value)}}})])])],1),a("hr"),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productDescription"}},[e._v("Descrizione*")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.descriptionModal,expression:"descriptionModal"}],staticClass:"form-control w-80",attrs:{"aria-label":"Descrizione, campo obbligatorio",id:"productDescription",rows:"3",required:""},domProps:{value:e.descriptionModal},on:{input:function(t){t.target.composing||(e.descriptionModal=t.target.value)}}})])],1),a("b-row",[a("b-col",[a("label",{staticClass:"form-label",attrs:{for:"productNote"}},[e._v("Note (non sono visibli al cliente)")])])],1),a("b-row",{staticClass:"mb-3"},[a("b-col",[a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.noteModal,expression:"noteModal"}],staticClass:"form-control w-80",attrs:{id:"productNote",rows:"3"},domProps:{value:e.noteModal},on:{input:function(t){t.target.composing||(e.noteModal=t.target.value)}}})])],1),a("div",{staticClass:"modal-footer d-flex justify-content-between"},[a("b-button",{staticClass:"float-left",attrs:{type:"submit","aria-label":"Bottone salva. Salva le modifiche e chiude la finestra di modifica",variant:"primary",disabled:e.discountTotal<=0}},[e._v("Salva")]),a("b-button",{staticClass:"btn-danger float-right",attrs:{type:"button","aria-label":"bottone annulla. Chiude la finestra di modifica senza salvare"},on:{click:e.hideModal}},[e._v("Chiudi")])],1)],1)])])])]),a("div",{staticClass:"row mt-3"},[a("h3",{attrs:{tabindex:"0","aria-label":"Categorie articolo"}},[e._v("Categorie")]),a("div",e._l(e.tags,(function(t){return a("span",{key:t,staticClass:"badge rounded-pill bg-primary m-1",attrs:{tabindex:"0","aria-label":t}},[e._v(e._s(t))])})),0)]),a("b-row",{staticClass:"mt-3"},[a("h3",[e._v("Descrizione")])]),a("b-row",{staticClass:"p-3 border border-secondary border-3 bg-white",attrs:{tabindex:"0","aria-label":"descrizione"+e.description}},[e._v(" "+e._s(e.description)+" ")]),a("b-row",{staticClass:"mt-3"},[a("h3",[e._v("Note")])]),a("b-row",{staticClass:"mb-3 p-3 border border-secondary border-3 bg-white",attrs:{tabindex:"0","aria-label":"note non visibili ai clienti"+e.note}},[e._v(" "+e._s(e.note)+" ")]),0!==e.tmpbookings.length?[a("b-row",{staticClass:"mt-3"},[a("h3",{attrs:{tabindex:"0"}},[e._v("Tabella prenotazioni")])]),a("b-row",{staticClass:"p-0 border border-secondary border-3 bg-white mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Barra di ricerca per filtrare le prenotazioni sottostanti in base ai dati inseriti",placeholder:"Filtra..."},domProps:{value:e.filter},on:{keyup:e.filtTable,input:function(t){t.target.composing||(e.filter=t.target.value)}}}),a("b-table",{staticClass:"m-0",attrs:{striped:"",bordered:"",hover:"",items:e.bookings,fields:e.fields},scopedSlots:e._u([{key:"cell(email)",fn:function(t){var i=t.item;return[a("router-link",{attrs:{"aria-label":"email:"+i.clientId,to:{name:"client",params:{email:i.clientId}}}},[e._v(e._s(i.clientId))])]}},{key:"cell(totale)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"totale prenotazione: "+i.total.toFixed(2)+" €"}},[e._v(e._s(i.total.toFixed(2)+" €"))])]}},{key:"cell(prenotazione)",fn:function(t){var i=t.item;return[a("router-link",{attrs:{"aria-label":"identificativo: prenotazione"+i.reservationId,to:{name:"reservation",params:{id:i.reservationId}}}},[e._v(" Prenotazione")])]}},{key:"cell(inizio)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"inizio prenotazione"+i.startDate.day+"-"+i.startDate.month+"-"+i.startDate.year}},[e._v(e._s(i.startDate.day+"-"+i.startDate.month+"-"+i.startDate.year))])]}},{key:"cell(fine)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"fine prenotazione"+i.endDate.day+"-"+i.endDate.month+"-"+i.endDate.year}},[e._v(e._s(i.endDate.day+"-"+i.endDate.month+"-"+i.endDate.year))])]}}],null,!1,4028416705)})],1)]:e._e()],2)])},ae=[],ie=(a("a15b"),a("caad"),a("2532"),{data:function(){return{enter:!0,identifier:"",title:"",brand:"",image:"",tags:[],quality:0,fixedPrice:0,dailyPrice:0,overDays:{days:"",onSale:!1,onSaleType:!1,onSaleValue:!1},discount:{onSale:!1,onSaleType:!1,onSaleValue:0},description:"",note:"",titleModal:"",brandModal:"",imageModal:"",tagsModal:[],qualityModal:0,dailyModal:0,fixedModal:0,onSaleModal:!1,onSaleTypeModal:!1,onSaleValueModal:0,discountTotal:"",overDaysModal:"",overSaleModal:!1,overSaleTypeModal:!1,overSaleValueModal:0,descriptionModal:"",noteModal:"",available:!1,boolDelete:!1,bookings:[],tmpbookings:[],filter:"",fields:[{key:"email",sortable:!1},{key:"prenotazione",sortable:!1},{key:"totale"},{key:"inizio"},{key:"fine"}]}},created:function(){var e=this;h.getProduct(this.$route.params.id).then((function(t){for(var a in console.log(t),e.article=t.data.data.obj,e.identifier=e.$route.params.id,e.title=e.article.title,e.brand=e.article.brand,e.image=e.article.image,e.tags=e.article.tags,e.quality=e.article.quality,e.dailyPrice=e.article.price,e.fixedPrice=e.article.fixedPrice,e.discount.onSale=e.article.discount.onSale,e.discount.onSaleType=e.article.discount.onSaleType,e.discount.onSaleValue=e.article.discount.onSaleValue,e.overDays.days=e.article.overDays.days,e.overDays.onSale=e.article.overDays.onSale,e.overDays.onSaleType=e.article.overDays.onSaleType,e.overDays.onSaleValue=e.article.overDays.onSaleValue,e.available=e.article.available,e.description=e.article.description,e.bookings=[],e.tmpbookings=e.article.bookings,e.tmpbookings)e.bookings.push(e.tmpbookings[a]);console.log(e.bookings),e.note=e.article.note;var i=new Date;for(var o in e.bookings){var r=new Date(e.bookings[o].endDate.year,e.bookings[o].endDate.month-1,e.bookings[o].endDate.day,23,59,59);r>=i&&(e.boolDelete=!0)}e.enter=!1}),(function(t){alert("La pagina non esiste"),e.$router.push({name:"home"})}))},methods:{showModal:function(){this.$refs["myModal"].show()},hideModal:function(){this.$refs["myModal"].hide()},rent:function(){this.$router.push({name:"createReservation",params:{id:this.identifier}})},stats:function(){this.$router.push({name:"chartArticle",params:{id:this.identifier}})},getModalData:function(){this.showModal(),this.titleModal=this.title,this.brandModal=this.brand,this.imageModal=this.image,this.tagsModal=this.tags,this.qualityModal=this.quality,this.dailyModal=this.dailyPrice,this.fixedModal=this.fixedPrice,this.onSaleModal=this.discount.onSale,this.onSaleTypeModal=this.discount.onSaleType,this.onSaleValueModal=this.discount.onSaleValue,this.onSaleModal&&(this.discountTotal=this.getDiscountedPrice()),this.overDaysModal=this.overDays.days,this.overSaleModal=this.overDays.onSale,this.overSaleTypeModal=this.overDays.onSaleType,this.overSaleValueModal=this.overDays.onSaleValue,this.descriptionModal=this.description,this.noteModal=this.note},changeInStock:function(){var e=this;this.enter=!0;var t={};t.available=!this.available,h.saveDataProduct(this.identifier,t).then((function(){alert("Modifica disponibilità riuscita"),e.enter=!1})).catch((function(){alert("Problema nell' invio dei dati"),e.enter=!1}))},changeOnSale:function(){this.onSaleModal?(this.onSaleModal=!1,this.discountTotal="",this.onSaleValueModal=""):(this.onSaleModal=!0,this.changeDiscountValue())},changeDiscountType:function(){this.onSaleTypeModal?(this.onSaleTypeModal=!1,this.overSaleValueModal="",this.overDaysModal=""):this.onSaleTypeModal=!0,this.changeDiscountValue()},changeOnSaleOverDays:function(){this.overSaleModal?this.overSaleModal=!1:this.overSaleModal=!0},changeDiscountTypeOverDays:function(){this.overSaleTypeModal?this.overSaleTypeModal=!1:this.overSaleTypeModal=!0},saveData:function(){var e=this;this.enter=!0;var t={};this.titleModal!=this.title&&(t.title=this.titleModal),this.imageModal!=this.image&&(t.image=this.imageModal),this.dailyModal!=this.dailyPrice&&(t.price=parseFloat(this.dailyModal)),this.fixedModal!=this.fixedPrice&&(t.fixedPrice=parseFloat(this.fixedModal)),this.descriptionModal!=this.description&&""!=this.descriptionModal&&(t.description=this.descriptionModal);var a=[];""==this.tagsModal||("string"!==typeof this.tagsModal&&(this.tagsModal=this.tagsModal.join(" ")),this.tagsModal=this.tagsModal.replace(/,/g," "),a=Object(Y["a"])(new Set(this.tagsModal.split(/\s+/))),""==a[a.length-1]&&a.pop()),t.tags=a,this.brand!=this.brandModal&&(t.brand=this.brandModal),this.quality!=this.qualityModal&&(t.quality=parseInt(this.qualityModal)),this.noteModal!=this.note&&(t.note=this.noteModal),t.discount={},this.onSaleModal?(t.discount.onSale=!0,t.discount.onSaleType=this.onSaleTypeModal,t.discount.onSaleValue=parseFloat(this.onSaleValueModal)):(t.discount.onSale=!1,t.discount.onSaleType=!1,t.discount.onSaleValue=0),t.overDays={},this.overSaleModal?(t.overDays.onSale=!0,t.overDays.onSaleType=this.overSaleTypeModal,t.overDays.days=parseInt(this.overDaysModal),t.overDays.onSaleValue=parseFloat(this.overSaleValueModal)):(t.overDays.days=0,t.overDays.onSale=!1,t.overDays.onSaleType=!1,t.overDays.onSaleValue=0),this.enter=!1,console.log(t),this.$refs["myModal"].hide(),h.saveDataProduct(this.identifier,t).then((function(){e.title=e.titleModal,e.brand=e.brandModal,e.image=e.imageModal,e.tags=a,e.quality=e.qualityModal,e.dailyPrice=e.dailyModal,e.fixedPrice=e.fixedModal,e.discount.onSale=e.onSaleModal,e.discount.onSaleType=e.onSaleTypeModal,e.discount.onSaleValue=e.onSaleValueModal,e.overDays.day=e.overDaysModal,e.overDays.onSale=e.overSaleModal,e.overDays.onSaleType=e.overSaleTypeModal,e.overDays.onSaleValue=e.overSaleValueModal,e.description=e.descriptionModal,e.note=e.noteModal,alert("Modifica riuscita"),e.enter=!1})).catch((function(t){alert("Problema nella modifica dei dati"),e.enter=!1}))},deleteProduct:function(){var e=this;this.enter=!0,h.deleteProduct(this.identifier).then((function(){alert("Operazione riuscita"),e.$router.push({name:"articleCatalog",params:{filter:""}})})).catch((function(t){alert("Problema nell' eliminazione dell'articolo"),e.enter=!1}))},changeDiscountValue:function(){this.onSaleTypeModal?this.discountTotal=(this.fixedModal-this.fixedModal*this.onSaleValueModal/100).toFixed(2):this.discountTotal=(this.fixedModal-this.onSaleValueModal).toFixed(2)},getDiscountedPrice:function(){return console.log(this.fixedPrice),this.discount.onSaleType?(this.fixedPrice-this.fixedPrice*this.discount.onSaleValue/100).toFixed(2):(this.fixedPrice-this.discount.onSaleValue).toFixed(2)},filtTable:function(){if(""==this.filter)for(var e in this.bookings=[],this.tmpbookings)this.bookings.push(this.tmpbookings[e]);else{this.bookings=[];var t=this.filter.toLowerCase();for(var a in this.tmpbookings){var i=this.tmpbookings[a].startDate.day+"-"+this.tmpbookings[a].startDate.month+"-"+this.tmpbookings[a].startDate.year,o=this.tmpbookings[a].endDate.day+"-"+this.tmpbookings[a].endDate.month+"-"+this.tmpbookings[a].endDate.year;(this.tmpbookings[a].clientId.toLowerCase().includes(t)||(this.tmpbookings[a].total+" €").includes(t)||i.includes(t)||o.includes(t))&&this.bookings.push(this.tmpbookings[a])}}}}}),oe=ie,re=(a("8d0e"),Object(y["a"])(oe,te,ae,!1,null,null,null)),se=re.exports,ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("form",{attrs:{name:"myform",id:"formId"},on:{submit:function(t){return t.preventDefault(),e.saveData.apply(null,arguments)}}},[a("h1",{staticClass:"mb-3",attrs:{tabindex:"0"}},[e._v(" Account ")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.name,expression:"name"}],staticClass:"form-control",attrs:{type:"text",id:"name","aria-label":"Nome:Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.name},on:{input:function(t){t.target.composing||(e.name=t.target.value)}}}),a("label",{attrs:{for:"name"}},[e._v(" Nome ")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.surname,expression:"surname"}],staticClass:"form-control",attrs:{type:"text",id:"surname","aria-label":"cognome:Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.surname},on:{input:function(t){t.target.composing||(e.surname=t.target.value)}}}),a("label",{attrs:{for:"surname"}},[e._v(" Cognome")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"identifier","aria-label":"identificativoCampo non modificabile",disabled:!e.boolModify,readonly:e.boolModify,required:""},domProps:{value:e.id}}),a("label",{attrs:{for:"identifier"}},[e._v(" ID"),e.boolModify?a("span",[e._v("(non modificabile)")]):e._e()])]),a("div",{staticClass:"form-floating mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.sex,expression:"sex"}],staticClass:"form-select zIndex mb-5",attrs:{id:"sex",disabled:!e.boolModify,"aria-label":"sesso:Campo obbligatorio"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.sex=t.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"male"}},[e._v("M")]),a("option",{attrs:{value:"female"}},[e._v("F")]),a("option",{attrs:{value:"other"}},[e._v("Altro")])]),a("label",{attrs:{for:"sex"}},[e._v(" Sesso ")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.phoneNumber,expression:"phoneNumber"}],staticClass:"form-control",attrs:{type:"tel",id:"phone","aria-label":"numero telefono:Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.phoneNumber},on:{input:function(t){t.target.composing||(e.phoneNumber=t.target.value)}}}),a("label",{attrs:{for:"phone"}},[e._v(" Numero di telefono")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.email,expression:"email"}],staticClass:"form-control",attrs:{type:"email",id:"mail","aria-label":"email:Campo non modificabile",disabled:!e.boolModify,readonly:e.boolModify,required:""},domProps:{value:e.email},on:{input:function(t){t.target.composing||(e.email=t.target.value)}}}),a("label",{attrs:{for:"mail"}},[e._v(" E-mail "),e.boolModify?a("span",[e._v("(non modificabile)")]):e._e()])]),a("hr"),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.birthday,expression:"birthday"}],staticClass:"form-control",attrs:{id:"birthday",type:"date",min:"1900-01-01",max:"2003-01-01","aria-label":"Data di nascita: Campo obbligatorio'",disabled:!e.boolModify,required:""},domProps:{value:e.birthday},on:{input:function(t){t.target.composing||(e.birthday=t.target.value)}}}),a("label",{attrs:{for:"birthday"}},[e._v(" Data di nascita")])]),a("hr"),a("div",{staticClass:"row mb-3"},[a("h3",{attrs:{tabindex:"0","aria-label":e.boolModify?"Fine informazioni personali. Inizio informazioni sulla abitazione":"Informazioni sulla abitazione. Clicca modifica in fondo alla pagina per modificare"}},[e._v("Indirizzo")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.address.addressStreet,expression:"address.addressStreet"}],staticClass:"form-control",attrs:{type:"text",id:"street","aria-label":"Via:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.address.addressStreet},on:{input:function(t){t.target.composing||e.$set(e.address,"addressStreet",t.target.value)}}}),a("label",{attrs:{for:"street"}},[e._v(" Via")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.address.addressNumber,expression:"address.addressNumber"}],staticClass:"form-control",attrs:{type:"text",id:"num","aria-label":"numero:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.address.addressNumber},on:{input:function(t){t.target.composing||e.$set(e.address,"addressNumber",t.target.value)}}}),a("label",{attrs:{for:"num"}},[e._v(" Numero")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.address.addressCity,expression:"address.addressCity"}],staticClass:"form-control",attrs:{type:"text",id:"city","aria-label":"Città:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.address.addressCity},on:{input:function(t){t.target.composing||e.$set(e.address,"addressCity",t.target.value)}}}),a("label",{attrs:{for:"city"}},[e._v(" Città")])]),a("hr"),a("div",{staticClass:"row mb-3"},[a("h3",{attrs:{tabindex:"0","aria-label":e.boolModify?"Fine informazioni indirizzo, inizio informazioni metodo di pagamento":"inizio informazioni metodo di pagamento. Clicca modifica  in fondo alla pagina per modificare"}},[e._v("Metodo di pagamento")])]),a("div",{staticClass:"form-floating mb-3"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.payment.cardType,expression:"payment.cardType"}],staticClass:"form-select zIndex mb-5",attrs:{id:"cardType",disabled:!e.boolModify},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.payment,"cardType",t.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"prepaid"}},[e._v("Prepagata")]),a("option",{attrs:{value:"debit"}},[e._v("Debito")]),a("option",{attrs:{value:"credit"}},[e._v("Credito")])]),a("label",{attrs:{for:"cardType"}},[e._v(" Tipo di carta ")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payment.cardCode,expression:"payment.cardCode"}],staticClass:"form-control",attrs:{type:"number",id:"cardCode","aria-label":"numero carta:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.payment.cardCode},on:{input:function(t){t.target.composing||e.$set(e.payment,"cardCode",t.target.value)}}}),a("label",{attrs:{for:"cardCode"}},[e._v(" Numero carta")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payment.cardOwner,expression:"payment.cardOwner"}],staticClass:"form-control",attrs:{type:"text",id:"owner","aria-label":"proprietario:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.payment.cardOwner},on:{input:function(t){t.target.composing||e.$set(e.payment,"cardOwner",t.target.value)}}}),a("label",{attrs:{for:"owner"}},[e._v(" Proprietario")])]),e._m(0),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payment.cardExpireMonth,expression:"payment.cardExpireMonth"}],staticClass:"form-control",attrs:{type:"number",min:"1",max:"12",step:"1",id:"cardMonth","aria-label":"Mese scadenza carta:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.payment.cardExpireMonth},on:{input:function(t){t.target.composing||e.$set(e.payment,"cardExpireMonth",t.target.value)}}}),a("label",{attrs:{for:"cardMonth"}},[e._v(" Mese")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.payment.cardExpireYear,expression:"payment.cardExpireYear"}],staticClass:"form-control",attrs:{type:"number",min:"2021",max:"2030",step:"1",id:"cardYear","aria-label":"Anno scadenza carta:. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.payment.cardExpireYear},on:{input:function(t){t.target.composing||e.$set(e.payment,"cardExpireYear",t.target.value)}}}),a("label",{attrs:{for:"cardYear"}},[e._v(" Anno")])]),a("div",{staticClass:"row",attrs:{id:"myButtons"}},[a("div",{staticClass:"col"},[e.boolModify?e._e():a("b-button",{staticClass:"btn btn-lg btn-secondary mb-2 mt-2",attrs:{type:"button","aria-label":"Bottone modifica. Premendo questo bottone scomparirà e appariranno i bottoni salva e annulla",disabled:e.enter},on:{click:e.modify}},[e._v("Modifica")]),e.boolModify?a("b-button",{staticClass:"btn btn-lg btn-success m-2",attrs:{type:"submit","aria-label":"Bottone salva. Salva le modifiche e rimette i campi disabilitati. Per ulteriori modifiche premi il bottone modifica",disabled:e.enter}},[e._v("Salva")]):e._e(),e.boolModify?a("b-button",{staticClass:"btn btn-lg btn-danger mb-2 mt-2",attrs:{type:"button","aria-label":"Bottone annulla. Ripristina le informazioni iniziali",disabled:e.enter},on:{click:e.undoChange}},[e._v("Annulla")]):e._e()],1),a("div",{staticClass:"col"},[a("b-button",{staticClass:"btn btn-lg btn-danger mb-2 mt-2",attrs:{type:"button","aria-label":"Bottone analytics. Porta alla pagina delle statisctiche di questo cliente",disabled:0===e.bookings.length||e.enter},on:{click:e.chart}},[e._v("Analytics")])],1),a("div",{staticClass:"col"},[a("b-button",{staticClass:"btn btn-lg btn-danger mb-2 mt-2",attrs:{type:"button","aria-label":"Bottone elimina cliente. Rimanda al elenco dei clienti ",disabled:e.boolDelete||e.enter},on:{click:e.deleteUser}},[e._v("Elimina cliente")])],1)])]),0!==e.tmpBookings.length?[a("hr"),a("h3",{attrs:{tabindex:"0"}},[e._v("Tabella prenotazioni")]),a("div",{staticClass:"p-3"},[a("b-row",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.filter,expression:"filter"}],staticClass:"form-control",attrs:{type:"text","aria-label":"Barra di ricerca per filtrare le prenotazioni sottostanti in base ai dati inseriti",placeholder:"Filtra..."},domProps:{value:e.filter},on:{keyup:e.filtTable,input:function(t){t.target.composing||(e.filter=t.target.value)}}}),a("b-table",{attrs:{hover:"",items:e.bookings,fields:e.fields},scopedSlots:e._u([{key:"cell(prodotto)",fn:function(t){var i=t.item;return[a("router-link",{attrs:{"aria-label":"Articolo: "+i.title,to:{name:"article",params:{id:i.id}}}},[e._v(e._s(i.title))])]}},{key:"cell(prezzo)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"totale prenotazione: "+i.price+"€"}},[e._v(e._s(i.price+" €"))])]}},{key:"cell(prenotazione)",fn:function(t){var i=t.item;return[a("router-link",{attrs:{"aria-label":"identificativo prenotazione: "+i.reservation,to:{name:"reservation",params:{id:i.reservation}}}},[e._v("Prenotazione")])]}},{key:"cell(DataInizio)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"inizio prenotazione"+i.startDate}},[e._v(e._s(i.startDate))])]}},{key:"cell(DataFine)",fn:function(t){var i=t.item;return[a("span",{attrs:{tabindex:"0","aria-label":"fine prenotazione"+i.endDate}},[e._v(e._s(i.endDate))])]}}],null,!1,1038516771)})],1)],1)]:e._e()],2)])},le=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"row mb-3"},[a("b",[e._v("Data scadenza")])])}],ce=(a("b0c0"),a("1157"),{data:function(){return{enter:!0,user:{},id:"",name:"",surname:"",sex:"",birthday:"",phoneNumber:"",email:"",password:"",address:{addressStreet:"",addressNumber:"",addressCity:""},payment:{cardType:"",cardCode:"",cardOwner:"",cardExpireMonth:"",cardExpireYear:"",cardCVV:""},bookings:[],tmpBookings:[],filter:"",fields:[{key:"prodotto"},{key:"prenotazione"},{key:"prezzo"},{key:"DataInizio"},{key:"DataFine"}],boolModify:!1,boolDelete:!1}},created:function(){var e,t=this;e=this.$route.params.email,h.getUser(e).then((function(e){t.user=e.data.data,console.log(t.user),t.undoChange(),t.enter=!1})).catch((function(e){alert("La pagina non esiste"),t.$router.push({name:"clientCatalog",params:{filter:""}})}));var a={filter:this.$route.params.email,sort:!1};h.getAllReservation(a).then((function(e){console.log(e.data.obj);var a=new Date;for(var i in e.data.obj){var o={};o.title=e.data.obj[i].productTitle,o.id=e.data.obj[i].productId,o.price=e.data.obj[i].totalPrice,o.reservation=e.data.obj[i]._id,o.startDate=e.data.obj[i].startDate.day+"-"+e.data.obj[i].startDate.month+"-"+e.data.obj[i].startDate.year,o.endDate=e.data.obj[i].endDate.day+"-"+e.data.obj[i].endDate.month+"-"+e.data.obj[i].endDate.year;var r=new Date(e.data.obj[i].endDate.year,e.data.obj[i].endDate.month-1,e.data.obj[i].endDate.day,23,59,59);r>=a&&(t.boolDelete=!0),t.tmpBookings.push(o),t.bookings.push(o)}console.log(t.tmpBookings)})).catch((function(e){alert("Problema nel caricamento dei dati"),t.$router.push({name:"home",params:{filter:""}})}))},methods:{modify:function(){this.boolModify=!0},undoChange:function(){this.id=this.user._id,this.name=this.user.userName,this.surname=this.user.userSurname;var e=this.user.birthday.month;String(e).length<2&&parseInt(this.user.birthday.month)<10&&(e="0"+String(e));var t=this.user.birthday.day;String(t).length<2&&parseInt(this.user.birthday.day)<10&&(t="0"+String(t)),this.birthday=this.user.birthday.year+"-"+e+"-"+t,this.sex=this.user.sex,this.phoneNumber=this.user.phoneNumber,this.email=this.user.email,this.address.addressStreet=this.user.address.addressStreet,this.address.addressNumber=this.user.address.addressNumber,this.address.addressCity=this.user.address.addressCity,this.payment.cardType=this.user.payment.cardType,this.payment.cardCode=this.user.payment.cardCode,this.payment.cardOwner=this.user.payment.cardOwner,this.payment.cardExpireMonth=this.user.payment.cardExpireMonth,this.payment.cardExpireYear=this.user.payment.cardExpireYear,this.boolModify=!1},saveData:function(){var e=this;this.enter=!0;var t={};this.user.userName!=this.name&&(t.userName=this.name),this.user.userSurname!=this.surname&&(t.userSurname=this.surname),this.user.sex!=this.sex&&(t.sex=this.sex);var a=this.birthday.split("-");a[0]==this.user.birthday.year&&a[1]==this.user.birthday.month&&a[2]==this.user.birthday.day||(t.birthday={},t.birthday.day=parseInt(a[2]),t.birthday.month=parseInt(a[1]),t.birthday.year=parseInt(a[0])),this.user.phoneNumber!=this.phoneNumber&&(t.phoneNumber=parseInt(this.phoneNumber)),this.user.email!=this.email&&(t.email=this.email),this.user.address.addressStreet==this.address.addressStreet&&this.user.address.addressNumber==this.address.addressNumber&&this.user.address.addressCity==this.address.addressCity||(t.address={},t.address.addressStreet=this.address.addressStreet,t.address.addressNumber=String(this.address.addressNumber),t.address.addressCity=this.address.addressCity),this.user.payment.cardType==this.payment.cardType&&this.user.payment.cardCode==this.payment.cardCode&&this.user.payment.cardOwner==this.payment.cardOwner&&this.user.payment.cardExpireMonth==this.payment.cardExpireMonth&&this.user.payment.cardExpireYear==this.payment.cardExpireYear||(t.payment={},t.payment.cardType=this.payment.cardType,t.payment.cardCode=parseInt(this.payment.cardCode),t.payment.cardOwner=this.payment.cardOwner,t.payment.cardExpireMonth=parseInt(this.payment.cardExpireMonth),t.payment.cardExpireYear=parseInt(this.payment.cardExpireYear)),console.log(t),h.saveDataClient(this.id,t).then((function(){alert("modifica riuscita"),e.user.userName=e.name,e.user.userSurname=e.surname,e.user.sex=e.sex,e.user.phoneNumber=e.phoneNumber,e.user.email=e.email,e.user.birthday=a[0]+"-"+a[1]+"-"+a[2],e.user.address.addressStreet=e.address.addressStreet,e.user.address.addressNumber=e.address.addressNumber,e.user.address.addressCity=e.address.addressCity,e.user.payment.cardType=e.payment.cardType,e.user.payment.cardCode=e.payment.cardCode,e.user.payment.cardOwner=e.payment.cardOwner,e.user.payment.cardExpireMonth=e.payment.cardExpireMonth,e.user.payment.cardExpireYear=e.payment.cardExpireYear,e.boolModify=!1,e.enter=!1})).catch((function(e){alert("Problema nell'invio dei dati")}))},deleteUser:function(){var e=this;this.enter=!0,h.deleteUser(this.id).then((function(){alert("Operazione riuscita"),e.$router.push({name:"clientCatalog",params:{filter:""}})})).catch((function(e){alert("Problema nella cancellazione dei dati")}))},chart:function(){this.$router.push({name:"clientChart",params:{email:this.email}})},filtTable:function(){if(console.log("this.bookings"),console.log(this.bookings),console.log(this.tmpBookings),console.log(this.filter),""==this.filter)for(var e in this.bookings=[],this.tmpBookings)this.bookings.push(this.tmpBookings[e]);else{this.bookings=[];var t=this.filter.toLowerCase();for(var a in this.tmpBookings){var i=this.tmpBookings[a].startDate,o=this.tmpBookings[a].endDate;(this.tmpBookings[a].title.toLowerCase().includes(t)||(this.tmpBookings[a].price+" €").includes(t)||i.includes(t)||o.includes(t))&&this.bookings.push(this.tmpBookings[a])}}}}}),de=ce,ue=(a("ef6d"),Object(y["a"])(de,ne,le,!1,null,"16f1fca4",null)),me=ue.exports,pe=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-6 d-flex align-items-center justify-content-center",attrs:{id:"img"}},[a("b-img",{staticClass:"myImg",attrs:{src:e.reservation.productImage,tabindex:"0",alt:"Immagine"+e.reservation.productTitle+" "+e.reservation.productBrand}})],1),a("div",{staticClass:"col-6",attrs:{id:"info"}},[a("p",{attrs:{tabindex:"0","aria-label":"Identificativo prenotazione"+e.reservationId}},[e._v("Id prenotazione: "+e._s(e.reservationId)+" ")]),a("p",[a("router-link",{attrs:{"aria-label":"Prodotto"+e.reservation.productTitle+" "+e.reservation.productBrand,to:{name:"article",params:{id:e.reservation.productId}}}},[e._v(e._s(e.reservation.productTitle+" "+e.reservation.productBrand))])],1),a("p",[a("router-link",{attrs:{"aria-label":"Email cliente"+e.reservation.clientEmail,to:{name:"client",params:{email:e.reservation.clientEmail}}}},[e._v(e._s(e.reservation.clientEmail))])],1),e.boolOld?a("p",[a("router-link",{attrs:{"aria-label":"Fattura",to:{name:"invoice",params:{id:e.reservationId}}}},[e._v("Fattura")])],1):e._e()])]),a("form",{attrs:{name:"myform",id:"formId"},on:{submit:function(t){return t.preventDefault(),e.saveData.apply(null,arguments)}}},[a("div",{staticClass:"form-floating mb-3 mt-3"},[a("input",{staticClass:"form-control",attrs:{id:"bookingRequest",type:"text",readonly:""},domProps:{value:e.bookingRequest}}),a("label",{attrs:{for:"bookingRequest"}},[e._v(" Data richiesta prenotazione (sola lettura)")])]),a("div",{staticClass:"row mb-3"},[e._m(0),a("div",{staticClass:"col-7"},[e.boolModify&&e.available?[a("date-picker",{attrs:{id:"date",placeholder:e.bookingStart+" "+e.bookingEnd,range:"","range-separator":" ",lang:e.lang,"disabled-date":e.dateDisabled,format:"DD-MM-YYYY",required:""},on:{change:e.changeData},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})]:[a("input",{staticClass:"form-control",attrs:{type:"text",id:"date","aria-label":"Periodo Prenotazione. Sola lettura",readonly:""},domProps:{value:e.bookingStart+" "+e.bookingEnd}}),!e.available&&e.boolModify?a("label",{staticClass:"mr-3",attrs:{tabindex:"0","aria-label":"Impossibile cambiare data prenotazione perchè non disponibile in giorni diversi",for:"date"}},[e._v("Non disponibile in giorni diversi ")]):e._e()]],2)]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.fixedPrice,expression:"fixedPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01",disabled:!e.boolModify,"aria-label":"prezzo fisso. Campo obbligatorio ",required:""},domProps:{value:e.fixedPrice},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.fixedPrice=t.target.value)}}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Fisso*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(1),a("div",{staticClass:"col-9 "},[a("div",{staticClass:" form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"Seleziona per applicare/togliere sconto fisso",disabled:!e.boolModify},domProps:{checked:e.onSale},on:{click:e.changeSale}}),e.onSale?a("label",{staticClass:"form-check-label",attrs:{for:"sale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{for:"sale"}},[e._v("Il prodotto non è scontato")])])])]),e.onSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfo"}},[a("div",{staticClass:"row"},[e._m(2),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio","aria-label":" sconto percentuale prezzo fisso. Seleziona uno dei due",disabled:!e.boolModify,id:"percentage",required:""},domProps:{value:!0,checked:e.onSaleType},on:{click:e.changeOnSaleType}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentage"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"radio","aria-label":" sconto fisso prezzo fisso. Seleziona uno dei due",disabled:!e.boolModify,id:"flat",required:""},domProps:{value:!1,checked:!e.onSaleType},on:{click:e.changeOnSaleType}}),a("label",{staticClass:"form-check-label",attrs:{for:"flat"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row mb-3"},[e._m(3),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.onSaleValue,expression:"onSaleValue"}],staticClass:"form-control",attrs:{type:"number","aria-label":" valore sconto prezzo fisso. Campo obbligatorio",min:"1",step:".01",disabled:!e.boolModify,id:"saleValue",required:""},domProps:{value:e.onSaleValue},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.onSaleValue=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dailyPrice,expression:"dailyPrice"}],staticClass:"form-control",attrs:{type:"number",min:"1",step:".01","aria-label":" prezzo giornaliero. Campo obbligatorio",disabled:!e.boolModify,required:""},domProps:{value:e.dailyPrice},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.dailyPrice=t.target.value)}}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Giornaliero*")])]),a("div",{staticClass:"row mb-3",attrs:{id:"saleRow"}},[e._m(4),a("div",{staticClass:"col-9 "},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{type:"checkbox","aria-label":"Seleziona per applicare/togliere sconto giornaliero",disabled:!e.boolModify},domProps:{checked:e.overOnSale},on:{click:e.changeDailySale}}),e.overOnSale?a("label",{staticClass:"form-check-label",attrs:{for:"sale"}},[e._v("L'articolo verrà scontato")]):a("label",{staticClass:"form-check-label",attrs:{for:"sale"}},[e._v("Il prodotto non è scontato")])])])]),e.overOnSale?[a("div",{staticClass:"mt-2",attrs:{id:"saleInfoOver"}},[a("div",{staticClass:"row"},[e._m(5),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":" sconto percentuale prezzo giornaliero. Seleziona uno dei due",type:"radio",disabled:!e.boolModify,id:"percentageOver",required:""},domProps:{value:!0,checked:e.overOnSaleType},on:{click:e.changeType}}),a("label",{staticClass:"form-check-label",attrs:{for:"percentage"}},[e._v("Percentuale")])])]),a("div",{staticClass:"col-3"},[a("div",{staticClass:"form-check"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":" sconto fisso prezzo giornaliero. Seleziona uno dei due",type:"radio",disabled:!e.boolModify,id:"flatOver",required:""},domProps:{value:!1,checked:!e.overOnSaleType},on:{click:e.changeType}}),a("label",{staticClass:"form-check-label",attrs:{for:"flat"}},[e._v("Fisso")])])])]),a("div",{staticClass:"row"},[e._m(6),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overOnSaleValue,expression:"overOnSaleValue"}],staticClass:"form-control",attrs:{type:"number","aria-label":" valore sconto prezzo giornaliero. Campo obbligatorio",min:"1",step:".01",disabled:!e.boolModify,id:"saleValueOVer",required:""},domProps:{value:e.overOnSaleValue},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.overOnSaleValue=t.target.value)}}})])]),a("div",{staticClass:"row mt-2 mb-2"},[a("div",{staticClass:"col-3"},[e._v("Giorni per sconto:")]),a("div",{staticClass:"col-9"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.overDaysCount,expression:"overDaysCount"}],staticClass:"form-control",attrs:{type:"number","aria-label":" giorni da superare per applivare sconto giornaliero. Campo obbligatorio",min:"1",step:"1",disabled:!e.boolModify,id:"daysDiscount",required:""},domProps:{value:e.overDaysCount},on:{keyup:e.newPrice,input:function(t){t.target.composing||(e.overDaysCount=t.target.value)}}})])])])]:e._e(),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"number","aria-label":"Prezzo totale. Sola lettura. Se negativo non si potrà modificare la prenotazione",readonly:""},domProps:{value:e.newTotal}}),a("label",{attrs:{for:"price"}},[e._v(" Prezzo Totale")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.notes,expression:"notes"}],staticClass:"form-control",attrs:{type:"text",id:"notes",disabled:!e.boolModify},domProps:{value:e.notes},on:{input:function(t){t.target.composing||(e.notes=t.target.value)}}}),a("label",{attrs:{for:"notes"}},[e._v(" Descrizione")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.privateNotes,expression:"privateNotes"}],staticClass:"form-control",attrs:{type:"text",id:"privateNotes",disabled:!e.boolModify},domProps:{value:e.privateNotes},on:{input:function(t){t.target.composing||(e.privateNotes=t.target.value)}}}),a("label",{attrs:{for:"privateNotes"}},[e._v(" Note (non visibili ai clienti)")])]),a("div",{staticClass:"row mb-3"},[a("div",{staticClass:"col-6"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"seleziona per indicare che il prodotto è stato ritirato",type:"checkbox",disabled:!e.boolModify&&!e.boolDelete||e.boolOld,id:"flexCheckDefault1"},domProps:{checked:e.rentalOccurred},on:{click:e.changeRentalOccured}}),e.rentalOccurred?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"flexCheckDefault"}},[e._v(" Il prodotto è stato ritirato")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"flexCheckDefault"}},[e._v("Il prodotto non è stato ritirato")])]),a("div",{staticClass:"col-6"},[a("input",{staticClass:"form-check-input",attrs:{"aria-label":"seleziona per indicare che il prodotto è stato restituito in tempo",type:"checkbox",disabled:!e.boolModify&&!e.boolDelete||e.boolOld,id:"flexCheckDefault2"},domProps:{checked:e.returned},on:{click:e.changeReturned}}),e.returned?a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"flexCheckDefault"}},[e._v(" Il prodotto è stato restituito in tempo ")]):a("label",{staticClass:"form-check-label",attrs:{tabindex:"0",for:"flexCheckDefault"}},[e._v(" Il prodotto non è stato restituito in tempo ")])])]),e.boolModify||e.boolDelete?e._e():a("b-button",{staticClass:"btn btn-lg btn-secondary mb-2 mt-2 mr-2",attrs:{type:"button","aria-label":"Bottone modifica. Permette di modificare i campi. Se la prenotazione è attiva o già conclusa non sarà possibile modificarne i dati. Se il prodotto non è disponibile non sarà possibile modificare il periodo di prenotazione",disabled:e.boolOld||e.enter},on:{click:e.modify}},[e._v("Modifica")]),e.boolModify||e.boolDelete?a("b-button",{staticClass:"btn btn-lg btn-success m-2",attrs:{type:"submit","aria-label":"Bottone salva. Salva le modifiche e le applica alla pagina",disabled:e.enter||e.negativePrice}},[e._v("Salva")]):e._e(),e.boolModify||e.boolDelete?a("b-button",{staticClass:"btn btn-lg btn-danger m-2",attrs:{type:"button","aria-label":"Bottone annulla. Reimposta i campo al loro stato iniziale. Premere il tasto modificare per modificare nuovamente",disabled:e.enter},on:{click:e.undoChange}},[e._v("Annulla")]):e._e(),a("button",{staticClass:"btn btn-lg btn-danger delete mb-2 mt-2 ml-2",attrs:{"aria-label":"Bottone elimina. Elimina la prenotazione e porta alla lista delle prenotazioni",disabled:e.boolActive||e.enter},on:{click:e.deleteReservation}},[e._v(" Cancella prenotazione")])],2)])])},ve=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-5"},[a("label",{staticClass:"mr-3",attrs:{tabindex:"0","aria-label":"Etichetta periodo prenotazione, separare le due date con uno spazio. Le date devono essere nel formato GG trattino MM trattino YYYY. Campo obbligatorio",for:"date"}},[e._v("Periodo Prenotazione ")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo fisso:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("label",[a("b",[e._v("Sconto Prezzo giornaliero:")])])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Tipo di sconto:")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"col-3"},[a("p",[e._v(" Valore sconto:")])])}],be={components:{DatePicker:W["a"]},data:function(){return{enter:!0,reservation:{},bookings:[],available:"",reservationId:"",bookingRequest:"",bookingStart:"",bookingEnd:"",dailyPrice:"",fixedPrice:"",newTotal:"",onSale:!1,onSaleType:!1,onSaleValue:0,overDaysCount:"",overOnSale:!1,overOnSaleType:!1,overOnSaleValue:0,rentalOccurred:!0,returned:!1,notes:"",privateNotes:"",time:null,lang:{formatLocale:{firstDayOfWeek:1,months:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Augosto","Settembre","Ottobre","Novembre","Dicembre"],monthsShort:["Gen","Feb","Mar","Apr","Mag","Giu","Lug","Ago","Set","Ott","Nov","Dic"],weekdaysMin:["Do","Lu","Ma","Me","Gi","Ve","Sa"],separator:" "},monthBeforeYear:!1},boolModify:!1,boolDelete:!1,boolActive:!1,boolOld:!1,negativePrice:!1}},created:function(){var e=this;h.getReservation(this.$route.params.id).then((function(t){e.reservationId=e.$route.params.id,e.reservation=t.data.data.obj,console.log(e.reservation),e.undoChange();var a=new Date,i=new Date(e.reservation.startDate.year,e.reservation.startDate.month-1,e.reservation.startDate.day,0,0,0),o=new Date(e.reservation.endDate.year,e.reservation.endDate.month-1,e.reservation.endDate.day,23,59,59);i<=a&&a<=o&&(e.boolActive=!0),a>o&&(e.boolActive=!0,e.boolOld=!0),h.getProduct(e.reservation.productId).then((function(t){e.bookings=t.data.data.obj.bookings,console.log(e.bookings),e.available=t.data.data.obj.available,e.enter=!1})).catch((function(t){alert("Problema nel caricamento dei dati"),e.$router.push({name:"home",params:{filter:""}})}))})).catch((function(t){alert("La pagina non esiste"),e.$router.push({name:"home",params:{filter:""}})}))},methods:{modify:function(){this.boolActive||this.boolOld?this.boolDelete=!0:this.boolModify=!0},undoChange:function(){var e,t,a,i;this.dailyPrice=this.reservation.variablePrice,this.fixedPrice=this.reservation.fixedPrice,this.newTotal=this.reservation.totalPrice,this.onSale=this.reservation.fixedDiscount.onSale,this.onSaleType=this.reservation.fixedDiscount.onSaleType,this.onSaleValue=this.reservation.fixedDiscount.onSaleValue,this.overDaysCount=this.reservation.variableDiscount.days,this.overOnSale=this.reservation.variableDiscount.onSale,this.overOnSaleType=this.reservation.variableDiscount.onSaleType,this.overOnSaleValue=this.reservation.variableDiscount.onSaleValue,this.bookingRequest=this.reservation.bookingDate.day+"-"+this.reservation.bookingDate.month+"-"+this.reservation.bookingDate.year,t=this.reservation.startDate.month,String(t).length<2&&parseInt(t)<10&&(t="0"+String(t)),e=this.reservation.startDate.day,String(e).length<2&&parseInt(e)<10&&(e="0"+String(e)),i=this.reservation.endDate.month,String(i).length<2&&parseInt(i)<10&&(i="0"+String(i)),a=this.reservation.endDate.day,String(a).length<2&&parseInt(a)<10&&(a="0"+String(a)),this.bookingStart=String(e)+"-"+String(t)+"-"+String(this.reservation.startDate.year),this.bookingEnd=String(a)+"-"+String(i)+"-"+String(this.reservation.endDate.year),console.log(this.bookingStart+" "+this.bookingEnd),this.rentalOccurred=this.reservation.isTaken,this.returned=this.reservation.isReturned,this.notes=this.reservation.description,this.privateNotes=this.reservation.note,this.time=null,this.boolModify=!1,this.boolDelete=!1},saveData:function(){var e=this;this.enter=!0;var t={};if(this.dailyPrice!=this.reservation.variablePrice&&(t.variablePrice=parseFloat(this.dailyPrice)),this.fixedPrice!=this.reservation.fixedPrice&&(t.fixedPrice=parseFloat(this.fixedPrice)),this.onSale==this.reservation.fixedDiscount.onSale&&this.onSaleType==this.reservation.fixedDiscount.onSaleType&&this.onSaleValue==this.reservation.fixedDiscount.onSaleValue||(t.fixedDiscount={},t.fixedDiscount.onSale=this.onSale,t.fixedDiscount.onSaleType=this.onSaleType,t.fixedDiscount.onSaleValue=parseFloat(this.onSaleValue)),this.overDaysCount==this.reservation.variableDiscount.days&&this.overOnSale==this.reservation.variableDiscount.onSale&&this.overOnSaleType==this.reservation.variableDiscount.onSaleType&&this.overOnSaleValue==this.reservation.variableDiscount.onSaleValue||(t.variableDiscount={},t.variableDiscount.onSale=this.overOnSale,t.variableDiscount.onSaleType=this.overOnSaleType,t.variableDiscount.days=parseInt(this.overDaysCount),t.variableDiscount.onSaleValue=parseFloat(this.overOnSaleValue)),this.rentalOccurred!=this.reservation.isTaken&&(t.isTaken=this.rentalOccurred),this.returned!=this.reservation.isReturned&&(t.isReturned=this.returned),this.notes!=this.reservation.description&&(t.description=this.notes),this.privateNotes!=this.reservation.note&&(t.note=this.privateNotes),null!=this.time||this.newTotal!=this.reservation.totalPrice){if(t.totalPrice=parseFloat(this.newTotal),null!=this.time){var a=parseInt(this.time[0].getDate()),i=parseInt(this.time[0].getMonth()+1),o=parseInt(this.time[0].getFullYear()),r=parseInt(this.time[1].getDate()),s=parseInt(this.time[1].getMonth()+1),n=parseInt(this.time[1].getFullYear());for(var l in t.startDate={},t.startDate.day=a,t.startDate.month=i,t.startDate.year=o,t.endDate={},t.endDate.day=r,t.endDate.month=s,t.endDate.year=n,this.bookingStart=a+"-"+i+"-"+o,this.bookingEnd=r+"-"+s+"-"+n,this.bookings)this.reservationId==this.bookings[l].reservationId&&(this.bookings[l].startDate.day=a,this.bookings[l].startDate.month=i,this.bookings[l].startDate.year=o,this.bookings[l].endDate.day=r,this.bookings[l].endDate.month=s,this.bookings[l].endDate.year=n,this.bookings[l].total=parseFloat(this.newTotal))}else for(var c in this.bookings)this.reservationId==this.bookings[c].reservationId&&(this.bookings[c].total=parseFloat(this.newTotal));var d={};d.bookings=this.bookings,h.saveDataProduct(this.reservation.productId,d).then((function(){})).catch((function(e){alert("Problema nell'invio dei dati")}))}console.log(t),h.saveReservation(this.reservationId,t).then((function(){alert("Modifica Riuscita"),e.reservation.variablePrice=e.dailyPrice,e.reservation.fixedPrice=e.fixedPrice,e.reservation.totalPrice=e.newTotal,e.reservation.fixedDiscount.onSale=e.onSale,e.reservation.fixedDiscount.onSaleType=e.onSaleType,e.reservation.fixedDiscount.onSaleValue=e.onSaleValue,e.reservation.variableDiscount.days=e.overDaysCount,e.reservation.variableDiscount.onSale=e.overOnSale,e.reservation.variableDiscount.onSaleType=e.overOnSaleType,e.reservation.variableDiscount.onSaleValue=e.overOnSaleValue,e.reservation.isTaken=e.rentalOccurred,e.reservation.isReturned=e.returned,e.reservation.description=e.notes,e.reservation.note=e.privateNotes,e.time=null,e.boolModify=!1,e.boolDelete=!1,e.enter=!1})).catch((function(e){alert("Problema nell'invio dei dati")}))},deleteReservation:function(){var e=this;this.enter=!0;var t={};for(var a in this.bookings)if(this.bookings[a].reservationId!=this.reservationId){this.bookings.splice(a,1);break}t.bookings=this.bookings,h.saveDataProduct(this.reservation.productId,t).then((function(){h.deleteReservation(e.reservationId).then((function(){alert("Operazione riuscita"),e.$router.push({name:"reservationCatalog",params:{filter:""}})})).catch((function(e){alert("Problema nella cancellazione dei dati")}))})).catch((function(e){alert("Problema nella modifica dei dati")}))},changeRentalOccured:function(){this.rentalOccurred?this.rentalOccurred=!1:this.rentalOccurred=!0,this.returned=!1},changeReturned:function(){this.returned?this.returned=!1:(this.returned=!0,this.rentalOccurred=!0)},changeSale:function(){this.onSale?(this.onSale=!1,this.onSaleType=!1,this.onSaleValue=0):this.onSale=!0,this.newPrice()},changeOnSaleType:function(){this.onSaleType=!this.onSaleType,this.newPrice()},changeDailySale:function(){this.overOnSale?(this.overOnSale=!1,this.overOnSaleType=!1,this.overOnSaleValue=0,this.overDaysCount=0):this.overOnSale=!0,this.newPrice()},changeType:function(){this.overOnSaleType=!this.overOnSaleType,this.newPrice()},changeData:function(){var e=new Date(this.time[0].getFullYear(),this.time[0].getMonth(),this.time[0].getDate()),t=new Date(this.time[1].getFullYear(),this.time[1].getMonth(),this.time[1].getDate());for(var a in this.bookings)if(this.bookings[a].reservationId!=this.reservationId){var i=new Date(this.bookings[a].endDate.year,this.bookings[a].endDate.month-1,this.bookings[a].endDate.day),o=new Date(this.bookings[a].startDate.year,this.bookings[a].startDate.month-1,this.bookings[a].startDate.day);e<=o&&i<=t&&(this.time=null)}this.newPrice()},newPrice:function(){var e,t;null!=this.time?(e=new Date(this.time[0].getFullYear(),this.time[0].getMonth(),this.time[0].getDate()),t=new Date(this.time[1].getFullYear(),this.time[1].getMonth(),this.time[1].getDate())):(e=new Date(this.reservation.startDate.year,this.reservation.startDate.month-1,this.reservation.startDate.day),t=new Date(this.reservation.endDate.year,this.reservation.endDate.month-1,this.reservation.endDate.day));var a,i,o=t-e,r=Math.ceil(o/864e5)+1;a=this.onSale?this.onSaleType?this.fixedPrice-this.fixedPrice*this.onSaleValue/100:this.fixedPrice-this.onSaleValue:this.fixedPrice,i=this.overOnSale&&r>this.overDaysCount?this.overOnSaleType?this.dailyPrice*r-this.dailyPrice*r*this.overOnSaleValue/100:this.dailyPrice*r-this.overOnSaleValue:this.dailyPrice*r,console.log(r+"-"+a+"-"+i),this.newTotal=parseFloat((parseFloat(a)+parseFloat(i)).toFixed(2)),this.newTotal<=0?this.negativePrice=!0:this.negativePrice=!1},dateDisabled:function(e){var t=new Date;if(e<t)return!0;for(var a in this.bookings)if(this.bookings[a].reservationId!=this.reservationId){var i=new Date(this.bookings[a].startDate.year,this.bookings[a].startDate.month-1,this.bookings[a].startDate.day),o=new Date(this.bookings[a].endDate.year,this.bookings[a].endDate.month-1,this.bookings[a].endDate.day);if(i<=e&&e<=o)return!0}return!1}}},he=be,fe=Object(y["a"])(he,pe,ve,!1,null,null,null),ge=fe.exports,ye=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("form",{attrs:{name:"myform",id:"formId"},on:{submit:function(t){return t.preventDefault(),e.createChart.apply(null,arguments)}}},[a("div",{staticClass:"input-group mb-3 mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.user,expression:"user"}],staticClass:"form-control",attrs:{type:"email",placeholder:"Cerca un cliente",required:""},domProps:{value:e.user},on:{input:function(t){t.target.composing||(e.user=t.target.value)}}}),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"submit"}},[e._v("Cerca")])])]),0===e.newTotal&&e.boolChart?[a("textarea",{staticClass:"form-control",attrs:{id:"TextareaError",rows:"3",disabled:""}},[e._v("Il cliente non esiste o non ha effettuato prenotazioni")])]:e._e(),a("div",[0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Fatturato/Periodo")]):e._e(),a("canvas",{attrs:{id:"user-Chart"}}),0!==e.newTotal?a("hr"):e._e(),0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Prenotazioni per mese")]):e._e(),a("canvas",{attrs:{id:"month-Chart"}})]),0!==e.newTotal?[a("div",{staticClass:"mb-5 mt-3"},[a("h4",[e._v("Statistiche")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation number",readonly:""},domProps:{value:e.price.length}}),a("label",{attrs:{for:"Reservation number"}},[e._v(" Totale noleggi")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation total",readonly:""},domProps:{value:e.newTotal.toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation total"}},[e._v(" Totale fatturato")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averagePrice",readonly:""},domProps:{value:(e.newTotal/e.price.length).toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation averagePrice"}},[e._v(" Media costo prenotazione")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averageDays",readonly:""},domProps:{value:(e.totalDays/e.price.length).toFixed(2)+" giorni"}}),a("label",{attrs:{for:"Reservation averageDays"}},[e._v(" Media durata noleggio")])])])]:e._e()],2)])},Ce=[],Se=(a("159b"),a("30ef")),ke=a.n(Se),xe=a("6612"),_e=a.n(xe),De={data:function(){return{user:"",userChart:null,monthChart:null,chart1:null,chart2:null,labels:[],price:[],days:[],bookings:[],monthfrequence:[],newTotal:0,totalDays:0,boolChart:!1}},mounted:function(){void 0!=this.$route.params.email&&this.createChart()},beforeDestroy:function(){this.chart&&this.chart.destroy()},methods:{createChart:function(){var e=this;this.labels=[],this.price=[],this.days=[],this.monthfrequence=[],this.newTotal=0,this.totalDays=0,null!=this.chart1&&(this.chart1.destroy(),this.chart2.destroy(),this.userChart=null,this.monthChart=null);var t="";t=""!=this.user?this.user:this.$route.params.email,console.log(t);for(var a={filter:t,sort:!1},i=0;i<12;i++)this.monthfrequence[i]=0;h.getAllReservation(a).then((function(t){if(console.log(t.data.obj),e.bookings=[],e.bookings=t.data.obj,0===e.bookings.length)e.boolChart=!0;else{e.bookings.forEach((function(t){e.labels.push(t.productTitle+t.productBrand),e.price.push(t.totalPrice),e.newTotal+=t.totalPrice;var a=new Date(t.endDate.year,t.endDate.month-1,t.endDate.day),i=new Date(t.startDate.year,t.startDate.month-1,t.startDate.day),o=a-i,r=Math.ceil(o/864e5)+1;e.totalDays+=r,e.days.push(r),e.monthfrequence[t.bookingDate.month-1]++})),e.userChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.price,label:"Prezzo Prenotazione",borderColor:"rgba(50, 115, 220)",backgroundColor:"rgb(50, 115, 220)"},{data:e.days,label:"Giorni prenotazione",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var a=document.getElementById("user-Chart");e.chart1=new ke.a(a,e.userChart),e.monthChart={type:"bar",data:{labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],datasets:[{data:e.monthfrequence,label:"Prenotazioni mensili",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var i=document.getElementById("month-Chart");e.chart2=new ke.a(i,e.monthChart),e.boolChart=!1}})).catch((function(e){alert("Problema nel caricamento dei dati")}))}}},Pe=De,we=(a("36fc"),Object(y["a"])(Pe,ye,Ce,!1,null,"11a03cc7",null)),ze=we.exports,Me=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[0===e.newTotal?[a("textarea",{staticClass:"form-control",attrs:{id:"TextareaError",rows:"3",disabled:""}},[e._v("L'articolo non è mai stato prenotato")])]:e._e(),a("div",[0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Fatturato/Periodo")]):e._e(),a("canvas",{attrs:{id:"article-Chart"}}),0!==e.newTotal?a("hr"):e._e(),0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Prenotazioni per mese")]):e._e(),a("canvas",{attrs:{id:"month-Chart"}})]),0!==e.newTotal?[a("div",{staticClass:"mb-5 mt-3"},[a("h4",[e._v("Statistiche")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation number",readonly:""},domProps:{value:e.price.length}}),a("label",{attrs:{for:"Reservation number"}},[e._v(" Totale noleggi")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation total",readonly:""},domProps:{value:parseFloat(e.newTotal).toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation total"}},[e._v(" Totale fatturato")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averagePrice",readonly:""},domProps:{value:parseFloat(e.newTotal/e.price.length).toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation averagePrice"}},[e._v(" Media costo prenotazione")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averageDays",readonly:""},domProps:{value:parseFloat(e.totalDays/e.price.length).toFixed(2)+" giorni"}}),a("label",{attrs:{for:"Reservation averageDays"}},[e._v(" Media durata noleggio")])])])]:e._e()],2)])},Te=[],je={data:function(){return{articleChart:null,monthChart:null,labels:[],price:[],days:[],monthfrequence:[],newTotal:0,totalDays:0}},mounted:function(){for(var e=this,t=0;t<12;t++)this.monthfrequence[t]=0;h.getProduct(this.$route.params.id).then((function(t){console.log(t.data.data.obj),t.data.data.obj.bookings.forEach((function(t){e.labels.push(t.clientId),e.price.push(t.total),e.newTotal+=t.total;var a=new Date(t.endDate.year,t.endDate.month-1,t.endDate.day),i=new Date(t.startDate.year,t.startDate.month-1,t.startDate.day),o=a-i,r=Math.ceil(o/864e5)+1;e.totalDays+=r,e.days.push(r),e.monthfrequence[t.startDate.month-1]++})),e.articleChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.price,label:"Prezzo Prenotazione",borderColor:"rgba(50, 115, 220, 0.5)",backgroundColor:"rgb(50, 115, 220)"},{data:e.days,label:"Giorni prenotazione",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var a=document.getElementById("article-Chart");new ke.a(a,e.articleChart),e.monthChart={type:"bar",data:{labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],datasets:[{data:e.monthfrequence,label:"Prenotazioni mensili",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var i=document.getElementById("month-Chart");new ke.a(i,e.monthChart)})).catch((function(t){alert("La pagina non esiste"),e.$router.push({name:"home"})}))},beforeDestroy:function(){this.chart&&this.chart.destroy()}},Oe=je,Ve=(a("6d92"),Object(y["a"])(Oe,Me,Te,!1,null,"1a4ddde9",null)),Ie=Ve.exports,Ne=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("div",{staticClass:"input-group mb-3 mt-2"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.tag,expression:"tag"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Cerca una categoria"},domProps:{value:e.tag},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.createChart.apply(null,arguments)},input:function(t){t.target.composing||(e.tag=t.target.value)}}}),a("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button",id:"button-addon2",placeholder:"Cerca utenti"},on:{click:e.createChart}},[e._v("Button")])]),0===e.newTotal&&e.boolChart?[a("textarea",{staticClass:"form-control",attrs:{id:"TextareaError",rows:"3",disabled:""}},[e._v("La categoria non esiste")])]:e._e(),a("div",[0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Fatturato/Periodo")]):e._e(),a("canvas",{attrs:{id:"catalog-Chart"}}),0!==e.newTotal?a("hr"):e._e(),0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Prenotazioni per mese")]):e._e(),a("canvas",{attrs:{id:"month-Chart"}}),0!==e.newTotal?a("hr"):e._e(),0!==e.newTotal?a("h4",{staticClass:"mb-2 mt-3"},[e._v("Qualità")]):e._e(),a("canvas",{attrs:{id:"quality-Chart"}})]),0!==e.newTotal?[a("div",{staticClass:"mb-5 mt-3"},[a("h4",[e._v("Statistiche")]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation number",readonly:""},domProps:{value:e.reservationCount}}),a("label",{attrs:{for:"Reservation number"}},[e._v(" Totale noleggi")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation total",readonly:""},domProps:{value:parseFloat(e.newTotal).toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation total"}},[e._v(" Totale fatturato")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averagePrice",readonly:""},domProps:{value:(e.newTotal/e.reservationCount).toFixed(2)+"€"}}),a("label",{attrs:{for:"Reservation averagePrice"}},[e._v(" Media costo prenotazione")])]),a("div",{staticClass:"form-floating mb-3"},[a("input",{staticClass:"form-control",attrs:{type:"text",id:"Reservation averageDays",readonly:""},domProps:{value:(e.totalDays/e.reservationCount).toFixed(2)+" giorni"}}),a("label",{attrs:{for:"Reservation averageDays"}},[e._v(" Media durata noleggio")])])])]:e._e()],2)])},Fe=[],qe={data:function(){return{tag:"",catalogChart:null,monthChart:null,qualityChart:null,chart1:null,chart2:null,chart3:null,labels:[],price:[],days:[],quality:[],monthfrequence:[],reservationCount:0,newTotal:0,totalDays:0,boolChart:!1}},mounted:function(){this.createChart()},beforeDestroy:function(){this.chart&&this.chart.destroy()},methods:{createChart:function(){var e=this;this.labels=[],this.price=[],this.days=[],this.monthfrequence=[],this.quality=[],this.newTotal=0,this.totalDays=0,this.reservationCount=0,null!=this.chart1&&(this.chart1.destroy(),this.chart2.destroy(),this.chart3.destroy(),this.catalogChart=null,this.monthChart=null,this.qualityChart=null);var t="";""!=this.tag&&(t=this.tag);for(var a={filter:t,sort:!1},i=0;i<12;i++)this.monthfrequence[i]=0;""!=this.tag?h.getTags(this.tag).then((function(t){if(console.log(t.data.data),0===t.data.data.length)e.boolChart=!0;else{t.data.data.products.forEach((function(t){var a=0,i=0;e.labels.push(t.title+t.brand),e.quality.push(t.quality),t.bookings.forEach((function(t){e.reservationCount++,a+=t.total;var o=new Date(t.endDate.year,t.endDate.month-1,t.endDate.day),r=new Date(t.startDate.year,t.startDate.month-1,t.startDate.day),s=o-r,n=Math.ceil(s/864e5)+1;i+=n,e.monthfrequence[t.startDate.month-1]++})),e.newTotal+=a,e.totalDays+=i,e.price.push(a),e.days.push(i)})),e.catalogChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.price,label:"Prezzo Prenotazione",borderColor:"rgba(50, 115, 220, 0.5)",backgroundColor:"rgb(50, 115, 220)"},{data:e.days,label:"Giorni prenotazione",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var a=document.getElementById("catalog-Chart");e.chart1=new ke.a(a,e.catalogChart),e.monthChart={type:"bar",data:{labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],datasets:[{data:e.monthfrequence,label:"Prenotazioni mensili",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var i=document.getElementById("month-Chart");e.chart2=new ke.a(i,e.monthChart),e.qualityChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.quality,label:"Qualità prodotti",borderColor:"rgba(50, 115, 220, 0.5)",backgroundColor:"rgb(50, 115, 220)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var o=document.getElementById("quality-Chart");e.chart3=new ke.a(o,e.qualityChart),e.boolChart=!1}})).catch((function(e){alert("Problema nel caricamento dei dati")})):h.getAllProduct(a).then((function(t){if(console.log(t.data.data),0===t.data.data.length)e.boolChart=!0;else{t.data.data.forEach((function(t){var a=0,i=0;e.labels.push(t.title+t.brand),e.quality.push(t.quality),t.bookings.forEach((function(t){e.reservationCount++,a+=t.total;var o=new Date(t.endDate.year,t.endDate.month-1,t.endDate.day),r=new Date(t.startDate.year,t.startDate.month-1,t.startDate.day),s=o-r,n=Math.ceil(s/864e5)+1;i+=n,e.monthfrequence[t.startDate.month-1]++})),e.newTotal+=parseFloat(a),e.totalDays+=i,e.price.push(a),e.days.push(i)})),e.catalogChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.price,label:"Prezzo Prenotazione",borderColor:"rgba(50, 115, 220, 0.5)",backgroundColor:"rgb(50, 115, 220)"},{data:e.days,label:"Giorni prenotazione",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var a=document.getElementById("catalog-Chart");e.chart1=new ke.a(a,e.catalogChart),e.monthChart={type:"bar",data:{labels:["Gennaio","Febbraio","Marzo","Aprile","Maggio","Giugno","Luglio","Agosto","Settembre","Ottobre","Novembre","Dicembre"],datasets:[{data:e.monthfrequence,label:"Prenotazioni mensili",borderColor:"rgba(255, 56, 96, 0.5)",backgroundColor:"rgb(255, 56, 96)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var i=document.getElementById("month-Chart");e.chart2=new ke.a(i,e.monthChart),e.qualityChart={type:"bar",data:{labels:e.labels,datasets:[{data:e.quality,label:"Qualità prodotti",borderColor:"rgba(50, 115, 220, 0.5)",backgroundColor:"rgb(50, 115, 220)"}]},options:{scales:{yAxes:[{ticks:{beginAtZero:!0,callback:function(e){return _e()(e).format("0")}}}]}}};var o=document.getElementById("quality-Chart");e.chart3=new ke.a(o,e.qualityChart),e.boolChart=!1}})).catch((function(e){alert("Problema nel caricamento dei dati")}))}}},Ee=qe,Ae=(a("9c0b"),Object(y["a"])(Ee,Ne,Fe,!1,null,"07742505",null)),$e=Ae.exports,Re=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container-fluid d-flex justify-content-center",attrs:{id:"main"}},[a("div",{staticClass:"w-100"},[a("table",{staticClass:"table invoice p-2",attrs:{role:"table",tabindex:"0","aria-label":"Tabella Fattura"}},[a("tbody",{attrs:{role:"rowgroup"}},[a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v(e._s("Ricevente: "+e.reservation.clientName+" "+e.reservation.clientSurname+"-"+e.reservation.clientEmail))]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v("Emittente: NoloNoloPlus")])]),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v("Fattura: "+e._s(e.reservation._id))]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v("Data: "+e._s(e.date))])]),a("tr",{attrs:{role:"row"}},[a("td",{staticClass:"inner",staticStyle:{"border-top":"none"},attrs:{colspan:"2"}},[a("table",{staticClass:"table inner"},[a("tbody",[e._m(0),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(e.reservation.productTitle+" "+e.reservation.productBrand+" (fisso)"))]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v("1")]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.prezzoFissoSenzaIva.toFixed(2)+" €"))]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.scontoFisso.toFixed(2)+"%"))]),a("td",{attrs:{role:"cell",tabindex:"0"}},[e._v("22%")]),a("td",{staticClass:"text-end",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.imponibileFisso.toFixed(2)+" €"))])]),a("tr",{staticClass:"inner",attrs:{role:"row"}},[a("td",{staticClass:"noborder",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(e.reservation.productTitle+" "+e.reservation.productBrand+" (variabile)"))]),a("td",{staticClass:"noborder",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.days))]),a("td",{staticClass:"noborder",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.prezzoVariabileSenzaIva.toFixed(2)+" €"))]),a("td",{staticClass:"noborder",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.scontoVariabile.toFixed(2)+"%"))]),a("td",{staticClass:"noborder",attrs:{role:"cell",tabindex:"0"}},[e._v("22%")]),a("td",{staticClass:"noborder text-end",attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.imponibileVariabile.toFixed(2)+" €"))])])])])])]),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"rowheader",tabindex:"0"}},[e._v("Totale imponibile")]),a("td",{staticStyle:{"text-align":"right"},attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.totale.toFixed(2)+" €"))])]),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"rowheader",tabindex:"0"}},[e._v("IVA")]),a("td",{staticStyle:{"text-align":"right"},attrs:{role:"cell",tabindex:"0"}},[e._v(e._s((.22*this.totale).toFixed(2)+" €"))])]),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{role:"rowheader",tabindex:"0"}},[e._v("Penale")]),a("td",{staticStyle:{"text-align":"right"},attrs:{role:"cell",tabindex:"0"}},[e._v(e._s(this.penale.toFixed(2)+" €"))])]),a("tr",{staticClass:"totale",attrs:{role:"row"}},[a("td",{attrs:{role:"rowheader",tabindex:"0"}},[e._v("Totale")]),a("td",{staticStyle:{"text-align":"right"},attrs:{role:"cell",tabindex:"0"}},[e._v(" "+e._s((this.totale+.22*this.totale+this.penale).toFixed(2)+" €"))])]),a("tr",{attrs:{role:"row"}},[a("td",{attrs:{colspan:"{2}"}},[a("span",{staticStyle:{"font-weight":"700"},attrs:{role:"row",tabindex:"0"}},[e._v("Note:")]),e._v(" "+e._s(e.reservation.description)+" ")])])])])])])},Be=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("tr",{attrs:{role:"row"}},[a("td",{staticClass:"noborder",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("Descrizione")])]),a("td",{staticClass:"noborder",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("Qnt")])]),a("td",{staticClass:"noborder",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("Prezzo")])]),a("td",{staticClass:"noborder",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("Sconto")])]),a("td",{staticClass:"noborder",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("IVA")])]),a("td",{staticClass:"noborder text-end",attrs:{role:"columnheader",tabindex:"0"}},[a("b",[e._v("Imponibile")])])])}],Ye={data:function(){return{reservation:{},days:0,date:"",prezzoFissoSenzaIva:0,prezzoVariabileSenzaIva:0,imponibileFisso:0,imponibileVariabile:0,scontoFisso:0,scontoVariabile:0,totale:0,penale:0}},created:function(){var e=this;h.getReservation(this.$route.params.id).then((function(t){console.log(t.data.data.obj),e.reservation=t.data.data.obj;var a=new Date(e.reservation.startDate.year,e.reservation.startDate.month-1,e.reservation.startDate.day),i=new Date(e.reservation.endDate.year,e.reservation.endDate.month-1,e.reservation.endDate.day),o=i-a;e.days=Math.ceil(o/864e5)+1,e.date=e.reservation.endDate.day+"/"+e.reservation.endDate.month+"/"+e.reservation.endDate.year,e.prezzoFissoSenzaIva=e.scorporo(e.reservation.fixedPrice),e.prezzoVariabileSenzaIva=e.scorporo(e.reservation.variablePrice),e.imponibileFisso=e.prezzoFissoSenzaIva,1==e.reservation.fixedDiscount.onSale&&(1==e.reservation.fixedDiscount.onSaleType?e.imponibileFisso=e.scorporo(e.reservation.fixedPrice*(100-parseFloat(e.reservation.fixedDiscount.onSaleValue))/100):e.imponibileFisso=e.scorporo(e.reservation.fixedPrice)-e.scorporo(parseFloat(e.reservation.fixedDiscount.onSaleValue))),e.imponibileVariabile=e.prezzoVariabileSenzaIva*e.days,1==e.reservation.variableDiscount.onSale&&e.days>e.reservation.variableDiscount.days&&(1==e.reservation.variableDiscount.onSaleType?e.imponibileVariabile=e.scorporo(e.reservation.variablePrice*e.days*(100-parseFloat(e.reservation.variableDiscount.onSaleValue))/100):e.imponibileVariabile=e.scorporo(e.reservation.variablePrice*e.days-parseFloat(e.reservation.variableDiscount.onSaleValue))),1==e.reservation.fixedDiscount.onSale&&(1==e.reservation.fixedDiscount.onSaleType?e.scontoFisso=parseFloat(e.reservation.fixedDiscount.onSaleValue):e.scontoFisso=100-e.imponibileFisso/e.prezzoFissoSenzaIva*100),1==e.reservation.variableDiscount.onSale&&e.days>e.reservation.variableDiscount.days&&(1==e.reservation.variableDiscount.onSaleType?e.scontoVariabile=parseFloat(e.reservation.variableDiscount.onSaleValue):e.scontoVariabile=100-e.imponibileVariabile/e.days/e.prezzoVariabileSenzaIva*100),e.totale=e.imponibileFisso+e.imponibileVariabile,new Date>new Date(e.reservation.endDate.year,e.reservation.endDate.month-1,e.reservation.endDate.day)&&0==e.reservation.isReturned&&1==e.reservation.isTaken&&(e.penale=1.22*(e.imponibileFisso+e.imponibileVariabile)*.1)})).catch((function(t){alert("La pagina non esiste"),e.$router.push({name:"home",params:{filter:""}})}))},methods:{scorporo:function(e){return e/122*100}}},Le=Ye,Ge=(a("8130"),Object(y["a"])(Le,Re,Be,!1,null,"a52e9394",null)),Ue=Ge.exports;i["default"].use(k["a"]);var Ze=new k["a"]({mode:"hash",routes:[{path:"/",name:"home",component:z},{path:"/articleCatalog:filter",name:"articleCatalog",component:z},{path:"/clientCatalog:filter",name:"clientCatalog",component:I},{path:"/reservationCatalog:filter",name:"reservationCatalog",component:$},{path:"/createArticle",name:"createArticle",component:Z},{path:"/createReservation:id",name:"createReservation",component:ee},{path:"/article:id",name:"article",component:se},{path:"/client:email",name:"client",component:me},{path:"/reservation:id",name:"reservation",component:ge},{path:"/chartClient",name:"clientChart",component:ze},{path:"/chartArticle:id",name:"chartArticle",component:Ie},{path:"/chartCatalog",name:"chartCatalog",component:$e},{path:"/invoice:id",name:"invoice",component:Ue}]}),Qe=a("5f5b"),Je=a("b1e0");a("f9e3"),a("2dd8");i["default"].use(r.a),i["default"].use(Qe["a"]),i["default"].use(Je["a"]),i["default"].use(Je["b"]),i["default"].config.productionTip=!1,new i["default"]({router:Ze,render:function(e){return e(S)}}).$mount("#app")},"6d92":function(e,t,a){"use strict";a("4aea")},8130:function(e,t,a){"use strict";a("8305")},8305:function(e,t,a){},"85ec":function(e,t,a){},"8d0e":function(e,t,a){"use strict";a("de78")},"9c0b":function(e,t,a){"use strict";a("337f")},"9e83":function(e,t,a){},b91a:function(e,t,a){},d0aa:function(e,t,a){"use strict";a("53dd")},db49:function(e,t){var a={site202131Url:"http://localhost:8081"};e.exports=a},de78:function(e,t,a){},ef6d:function(e,t,a){"use strict";a("9e83")}});
//# sourceMappingURL=app.8e7051eb.js.map