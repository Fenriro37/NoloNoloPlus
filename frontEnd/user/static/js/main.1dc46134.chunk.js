(this.webpackJsonpuser=this.webpackJsonpuser||[]).push([[0],{144:function(e,t){e.exports={site202131Url:"http://site202131.tw.cs.unibo.it"}},180:function(e,t,s){},181:function(e,t,s){},211:function(e,t,s){"use strict";s.r(t);var a=s(0),i=s.n(a),n=s(47),r=s.n(n),c=(s(180),s(181),s(182),s(18)),o=s(19),d=s(24),l=s(23),h=s(22),u=s(74),j=s.n(u),b=s(143),v=s.n(b),p=s(144),O=s.n(p),x=v.a.create({baseURL:O.a.site202131Url,headers:{"Content-type":"application/json",dataType:"jsonp",withCredentials:!0}}),m=new(function(){function e(){Object(c.a)(this,e)}return Object(o.a)(e,[{key:"test",value:function(){return x.get("/test")}},{key:"login",value:function(e,t){var s={email:e,plainTextPassword:t};return x.post("/api/public/login",s)}},{key:"getUser",value:function(e){var t=e?"?id="+e:"";return x.get("/api/user/"+t)}},{key:"postUser",value:function(e,t){return null!=e?x.post("/api/user?id="+e,t):x.post("/api/user",t)}},{key:"getProduct",value:function(e){return x.get("/api/product/?id="+e)}},{key:"getAllProduct",value:function(e,t){return x.get("/api/product/all?filter="+e+"&&sort="+t)}},{key:"postProduct",value:function(e,t){return x.post("/api/product/?id="+e,t)}},{key:"getAllReservation",value:function(e,t){return x.get("/api/reservation/all?filter="+e+"&&sort="+t)}},{key:"postReservation",value:function(e){return x.post("/api/reservation",e)}}]),e}()),f=s(269),g=s(149),y=s(3),k=s(262),w=s(275),D=s(247),N=s(263),P=s(265),S=s(268),A=s(257);function C(e){return{day:e.getDate().toString(),month:(e.getMonth()+1).toString(),year:e.getFullYear().toString()}}function R(e,t){return Math.round((t-e)/864e5)+1}function I(e,t){return!!e.find((function(e){return new Date(e).getTime()==t.getTime()}))}function z(e){var t=0,s=[];for(t in e)for(var a=new Date(parseInt(e[t].startDate.year),parseInt(e[t].startDate.month)-1,parseInt(e[t].startDate.day)),i=new Date(parseInt(e[t].endDate.year),parseInt(e[t].endDate.month)-1,parseInt(e[t].endDate.day)),n=a;n<=i;)s.push(new Date(n)),n=n.addDays(1);return s}Date.prototype.addDays=function(e){var t=new Date(this.valueOf());return t.setDate(t.getDate()+e),t};var T=s(1),F=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;Object(c.a)(this,s),a=t.call(this,e);var i=z(e.bookings).map((function(e){return e.getTime()}));return a.state={value:[null,null],dates:i,bookings:e.bookings,price:e.finalPrice,product:e.product,isAuthenticated:e.isAuthenticated,show:!1,loading:!0,done:!1},a.disabledDays=a.disabledDays.bind(Object(d.a)(a)),a.checkDateRange=a.checkDateRange.bind(Object(d.a)(a)),a.bookReservation=a.bookReservation.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleShow=a.handleShow.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"handleClose",value:function(){this.setState({show:!1}),window.location.reload(!1)}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"disabledDays",value:function(e){return null==this.state.dates?null:this.state.dates.includes(e.getTime())}},{key:"checkDateRange",value:function(e){if(2==e.length&&null!=this.state.dates&&e[0]&&e[1]){for(var t=e[0],s=e[1];t<=s;){if(1==I(this.state.dates,t))return!1;t=t.addDays(1)}return!0}return!1}},{key:"bookReservation",value:function(){var e=this;if(!this.state.value[0]||!this.state.value[1])return alert("Data prenotazione non valida");this.setState({loading:!0}),this.handleShow(),m.getUser().then((function(t){var s={clientEmail:t.data.data.email,clientName:t.data.data.userName,clientSurname:t.data.data.userSurname,productId:e.state.product._id,prodcutTitle:e.state.product.title,productBrand:e.state.product.brand,productImage:e.state.product.image,bookingDate:C(new Date),startDate:C(e.state.value[0]),endDate:C(e.state.value[1]),isTaken:!1,isReturned:!1,price:(R(e.state.value[0],e.state.value[1])*e.state.price).toFixed(2),description:"",note:""};m.postReservation(s).then((function(s){var a={productId:e.state.product._id,clientId:t.data.data.email,reservationId:s.data.data._id,startDate:C(e.state.value[0]),endDate:C(e.state.value[1])},i=e.state.bookings;i.push(a),m.postProduct(e.state.product._id,{bookings:i}).then((function(){e.setState({loading:!1,done:!0})}))}))}))}},{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{className:"pb-0 mt-2",children:[Object(T.jsx)(w.a,{className:"d-flex justify-content-center mb-2",children:Object(T.jsx)(D.b,{dateAdapter:k.a,children:Object(T.jsx)(N.a,{disablePast:!0,shouldDisableDate:this.disabledDays,startText:"Data di inizio",endText:"Data di fine",value:this.state.value,onChange:function(t){e.setState({value:t})},renderInput:function(e,t){return Object(T.jsxs)(i.a.Fragment,{children:[Object(T.jsx)(P.a,Object(y.a)({},e)),Object(T.jsx)(w.a,{sx:{mx:1},children:"a"}),Object(T.jsx)(P.a,Object(y.a)({},t))]})},inputFormat:"dd/MM/yyyy"})})}),Object(T.jsxs)("div",{children:["Giorni di noleggio: ",this.state.value[0]&&this.state.value[1]?R(this.state.value[0],this.state.value[1]):0]}),Object(T.jsxs)("div",{children:["Prezzo totale: ",this.state.value[0]&&this.state.value[1]?(R(this.state.value[0],this.state.value[1])*this.state.price).toFixed(2):"0.00"," \u20ac"]}),this.state.isAuthenticated?Object(T.jsx)(g.a,{disabled:!this.checkDateRange(this.state.value),className:"mt-3 w-100",onClick:function(t){t.preventDefault(),e.bookReservation()},children:this.checkDateRange(this.state.value)?Object(T.jsx)("span",{children:"Prenota ora"}):Object(T.jsx)("span",{children:"Seleziona una data valida"})}):Object(T.jsx)(g.a,{className:"mt-2 w-100",href:"/public/login.html",children:"Accedi per prenotare"}),Object(T.jsxs)(S.a,{show:this.state.show,onHide:this.handleClose,backdrop:"static",keyboard:!1,centered:!0,children:[Object(T.jsx)(S.a.Body,{children:this.state.loading?Object(T.jsxs)("div",{className:"d-flex align-items-center",children:["Effetuo la prenotazione\xa0",Object(T.jsx)(A.a,{animation:"border",role:"status",children:Object(T.jsx)("span",{className:"visually-hidden",children:"Caricamento..."})})]}):this.state.done?Object(T.jsx)(T.Fragment,{children:"Prenotazione effettuata."}):Object(T.jsx)(T.Fragment,{children:"Errore durante la prenotazione."})}),Object(T.jsx)(S.a.Footer,{children:Object(T.jsx)(g.a,{variant:"secondary",onClick:this.handleClose,disabled:!this.state.done,children:"Chiudi"})})]})]})}}]),s}(i.a.Component),B=s(272),M=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){var e=parseInt(this.props.quality);return Object(T.jsxs)("div",{className:"d-flex align-items-center",children:[Object(T.jsx)("b",{children:"Qualit\xe0:"}),Object(T.jsx)(B.a,{name:"read-only",value:e,max:3,readOnly:!0})]})}}]),s}(i.a.Component),L=s(258),U=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){var e=this.props.tags.map((function(e){return Object(T.jsx)(L.a,{pill:!0,bg:"primary",className:"m-1",children:e},e)}));return Object(T.jsxs)("div",{children:[Object(T.jsx)("b",{children:"Categoria:"}),Object(T.jsx)("div",{className:"d-flex justify-content-center flex-wrap",children:e})]})}}]),s}(i.a.Component),E=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={originalPrice:parseFloat(a.props.originalPrice),discountedPrice:parseFloat(a.props.discountedPrice)},a}return Object(o.a)(s,[{key:"render",value:function(){return this.state.originalPrice!=this.state.discountedPrice?Object(T.jsxs)("div",{children:[Object(T.jsxs)("span",{style:{textDecorationLine:"line-through"},children:[Object(T.jsx)("b",{children:"Prezzo: "})," ",this.state.originalPrice," \u20ac ",Object(T.jsx)("span",{style:{fontSize:"0.75em"},children:"al giorno"})]}),Object(T.jsx)("br",{}),Object(T.jsxs)("span",{style:{color:"red"},children:[Object(T.jsx)("b",{children:"Prezzo scontato: "})," ",this.state.discountedPrice," \u20ac ",Object(T.jsx)("span",{style:{fontSize:"0.75em"},children:"al giorno"})]})]}):Object(T.jsxs)("div",{children:[Object(T.jsx)("b",{children:"Prezzo: "})," ",this.state.originalPrice," \u20ac ",Object(T.jsx)("span",{style:{fontSize:"0.75em"},children:"al giorno"})]})}}]),s}(i.a.Component),W=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={product:e.product,isAuthenticated:e.isAuthenticated,discountedPrice:e.product.discount.onSaleType?(e.product.price*(100-e.product.discount.onSaleValue)/100).toFixed(2):(e.product.price-e.product.discount.onSaleValue).toFixed(2)},a}return Object(o.a)(s,[{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){return Object(T.jsx)(f.a,{className:"m-2 bg-light rounded-3 border border-dark",children:Object(T.jsxs)(f.a.Item,{eventKey:"0",children:[Object(T.jsx)(f.a.Header,{children:Object(T.jsxs)("div",{className:"row",style:{width:"95%",height:"12.5vh"},children:[Object(T.jsx)("div",{className:"col-6 h-100 d-flex align-items-center",children:Object(T.jsx)("img",{className:"img-fluid img-responsive mx-auto d-block",style:{maxHeight:"100%",maxWidth:"100%"},src:this.state.product.image,alt:"Immagine"})}),Object(T.jsx)("div",{className:"col-6 d-flex align-items-center",children:Object(T.jsxs)("div",{children:[Object(T.jsx)("b",{children:this.state.product.title}),Object(T.jsx)("br",{}),this.state.product.brand]})})]})}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsx)(U,{tags:this.state.product.tags}),Object(T.jsxs)("div",{style:{textAlign:"justify"},children:[Object(T.jsx)("b",{children:"Descrizione:"}),Object(T.jsx)("br",{}),this.state.product.description]}),Object(T.jsx)(M,{quality:this.state.product.quality}),Object(T.jsx)(E,{discountedPrice:this.state.discountedPrice,originalPrice:this.state.product.price}),Object(T.jsx)("hr",{}),Object(T.jsx)("div",{className:"mb-2",children:Object(T.jsx)("b",{children:"Prenotazione:"})}),this.state.product.available?Object(T.jsx)(F,{bookings:this.state.product.bookings,finalPrice:this.state.product.discount.onSale?this.state.discountedPrice:this.state.product.price,isAuthenticated:this.state.isAuthenticated,product:this.state.product}):Object(T.jsx)(g.a,{disabled:!0,className:"w-100",children:"Prodotto non disponibile"})]})]})})}}]),s}(i.a.Component),_=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){return Object(c.a)(this,s),t.call(this,e)}return Object(o.a)(s,[{key:"render",value:function(){return Object(T.jsx)(g.a,{className:"w-100",disabled:!0,children:"Richiedi fattura"})}}]),s}(i.a.Component),H=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;Object(c.a)(this,s),a=t.call(this,e);var i=z(e.bookings).map((function(e){return e.getTime()}));return a.state={value:[null,null],dates:i,show:!1,dailyPrice:0,reservation:e.reservation},a.disabledDays=a.disabledDays.bind(Object(d.a)(a)),a.checkDateRange=a.checkDateRange.bind(Object(d.a)(a)),a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleShow=a.handleShow.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"disabledDays",value:function(e){return null==this.state.dates?null:this.state.dates.includes(e.getTime())}},{key:"checkDateRange",value:function(e){if(2==e.length&&null!=this.state.dates&&e[0]&&e[1]){for(var t=e[0],s=e[1];t<=s;){if(1==I(this.state.dates,t))return!1;t=t.addDays(1)}return!0}return!1}},{key:"render",value:function(){var e=this;return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(g.a,{className:"w-100",variant:"primary",onClick:this.handleShow,children:"Modifica prenotazione"}),Object(T.jsxs)(S.a,{show:this.state.show,onHide:this.handleClose,backdrop:"static",keyboard:!1,children:[Object(T.jsx)(S.a.Header,{closeButton:!0,children:Object(T.jsx)(S.a.Title,{children:"Modifica prenotazione"})}),Object(T.jsxs)(S.a.Body,{className:"pb-0 mt-2",children:[Object(T.jsx)(w.a,{className:"d-flex justify-content-center mb-2",children:Object(T.jsx)(D.b,{dateAdapter:k.a,children:Object(T.jsx)(N.a,{disabled:!0,disablePast:!0,shouldDisableDate:this.disabledDays,startText:"Data di inizio",endText:"Data di fine",value:this.state.value,onChange:function(t){e.setState({value:t})},renderInput:function(e,t){return Object(T.jsxs)(i.a.Fragment,{children:[Object(T.jsx)(P.a,Object(y.a)({},e)),Object(T.jsx)(w.a,{sx:{mx:1},children:"a"}),Object(T.jsx)(P.a,Object(y.a)({},t))]})},inputFormat:"dd/MM/yyyy"})})}),Object(T.jsxs)("div",{children:["Giorni di noleggio: ",this.state.value[0]&&this.state.value[1]?R(this.state.value[0],this.state.value[1]):0]}),Object(T.jsxs)("div",{children:["Prezzo totale: ",this.state.value[0]&&this.state.value[1]?(R(this.state.value[0],this.state.value[1])*this.state.price).toFixed(2):"0.00"," \u20ac"]})]}),Object(T.jsxs)(S.a.Footer,{className:"d-flex justify-content-between",children:[Object(T.jsx)(g.a,{disabled:!this.checkDateRange(this.state.value),className:"mt-3 w-100",variant:"success",onClick:function(t){t.preventDefault(),e.bookReservation()},children:this.checkDateRange(this.state.value)?Object(T.jsx)("span",{children:"Prenota ora"}):Object(T.jsx)("span",{children:"Seleziona una data valida"})}),Object(T.jsx)(g.a,{variant:"secondary",onClick:this.handleClose,children:"Esci"}),Object(T.jsx)(g.a,{variant:"danger",children:"Cancella prenotazione"})]})]})]})}}]),s}(i.a.Component),q=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={reservation:e.reservation,isAuthenticated:e.isAuthenticated,bookings:[],show:!1,status:""},a.handleClose=a.handleClose.bind(Object(d.a)(a)),a.handleShow=a.handleShow.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"handleClose",value:function(){this.setState({show:!1})}},{key:"handleShow",value:function(){this.setState({show:!0})}},{key:"componentDidMount",value:function(){var e=this,t="";0==this.state.reservation.isTaken&&0==this.state.reservation.isReturned?t="Prenotato":1==this.state.reservation.isTaken&&0==this.state.reservation.isReturned?t="Attivo":1==this.state.reservation.isTaken&&1==this.state.reservation.isReturned&&(t="Concluso"),this.setState({status:t}),m.getProduct(this.state.reservation.productId).then((function(t){e.setState({bookings:t.data.data.obj.bookings})}))}},{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){return Object(T.jsx)(f.a,{className:"m-2 bg-light rounded-3 border border-dark",children:Object(T.jsxs)(f.a.Item,{eventKey:"0",children:[Object(T.jsx)(f.a.Header,{children:Object(T.jsxs)("div",{className:"row",style:{width:"95%",height:"12.5vh"},children:[Object(T.jsx)("div",{className:"col-6 h-100 d-flex align-items-center",children:Object(T.jsx)("img",{className:"img-fluid img-responsive mx-auto d-block",style:{maxHeight:"100%",maxWidth:"100%"},src:this.state.reservation.productImage,alt:"Immagine"})}),Object(T.jsx)("div",{className:"col-6 d-flex align-items-center",children:Object(T.jsxs)("div",{children:[Object(T.jsx)("b",{children:this.state.reservation.productTitle}),Object(T.jsx)("br",{}),this.state.reservation.productBrand,Object(T.jsx)("br",{}),Object(T.jsxs)("b",{children:[this.state.reservation.bookingDate.day,"/",this.state.reservation.bookingDate.month,"/",this.state.reservation.bookingDate.year]})]})})]})}),Object(T.jsxs)(f.a.Body,{children:[Object(T.jsxs)("div",{children:["Identificativo della prenotazione:",Object(T.jsx)("br",{}),Object(T.jsx)("b",{children:this.state.reservation._id})]}),Object(T.jsx)("hr",{}),Object(T.jsxs)("div",{children:[Object(T.jsxs)("div",{className:"row d-flex justify-content-between",children:[Object(T.jsx)("div",{className:"col-8",children:"Data prenotazione:"}),Object(T.jsxs)("div",{className:"col-4 text-end",children:[this.state.reservation.bookingDate.day,"/",this.state.reservation.bookingDate.month,"/",this.state.reservation.bookingDate.year]})]}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col-8",children:"Status:"}),Object(T.jsx)("div",{className:"col-4 text-end",children:Object(T.jsx)("b",{children:this.state.status})})]}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col-8",children:"Data di inizio noleggio:"}),Object(T.jsxs)("div",{className:"col-4 text-end",children:[this.state.reservation.startDate.day,"/",this.state.reservation.startDate.month,"/",this.state.reservation.startDate.year]})]}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col-8",children:"Data di fine noleggio:"}),Object(T.jsxs)("div",{className:"col-4 text-end",children:[this.state.reservation.endDate.day,"/",this.state.reservation.endDate.month,"/",this.state.reservation.endDate.year]})]}),Object(T.jsxs)("div",{className:"row",children:[Object(T.jsx)("div",{className:"col-8",children:"Prezzo totale:"}),Object(T.jsxs)("div",{className:"col-4 text-end",children:[this.state.reservation.price," \u20ac"]})]}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:"Dettagli:"})}),Object(T.jsx)("div",{className:"row",children:Object(T.jsx)("div",{className:"col-12",children:this.state.reservation.description})})]}),Object(T.jsx)("hr",{}),"Prenotato"==this.state.status?Object(T.jsx)(H,{reservation:this.state.reservation,bookings:this.state.bookings}):"Attivo"==this.state.status?Object(T.jsx)(g.a,{className:"w-100",disabled:!0,children:"Prenotazione attiva"}):Object(T.jsx)(_,{})]})]})})}}]),s}(i.a.Component),V=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={isAuthenticated:e.isAuthenticated},a}return Object(o.a)(s,[{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){var e=this;if(0==this.props.elements.length)return Object(T.jsx)("div",{style:{height:"75vh"},className:"d-flex justify-content-center align-items-center",children:"Non ci sono contenuti"});if("product"==this.props.type){var t=this.props.elements.map((function(t){return Object(T.jsx)(W,{product:t,isAuthenticated:e.state.isAuthenticated},t._id)}));return Object(T.jsx)("div",{id:"body",children:t})}if("reservation"==this.props.type){var s=this.props.elements.map((function(t){return Object(T.jsx)(q,{reservation:t,isAuthenticated:e.state.isAuthenticated},t._id)}));return Object(T.jsx)("div",{id:"body",children:s})}}}]),s}(i.a.Component),G=s(267),J=s(259),K=s(266),Y=s(151),Q=s(270),X=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={isAuthenticated:e.isAuthenticated},a.logout=a.logout.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"logout",value:function(){j.a.remove("jwt"),window.location.href="/user/index.html"}},{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){var e=this;return 1==this.state.isAuthenticated?Object(T.jsxs)(Q.a,{className:"text-center d-flex align-items-center",navbarScroll:!0,children:[Object(T.jsx)(Q.a.Link,{children:Object(T.jsx)(K.a,{className:"element-to-hide-over-350",onSubmit:function(t){t.preventDefault(),e.props.search(t.target.searchInput.value)},children:Object(T.jsx)(Y.a,{type:"search",placeholder:"Cerca",name:"searchInput",className:"me-2","aria-label":"Cerca"})})}),Object(T.jsx)(Q.a.Link,{href:"./page",children:"Personal page"}),Object(T.jsx)(Q.a.Link,{href:"./reservation",children:"Reservation"}),Object(T.jsx)(Q.a.Link,{onClick:this.logout,children:"Logout"})]}):Object(T.jsxs)(Q.a,{className:"me-auto my-2 my-lg-0 text-center  align-items-center",navbarScroll:!0,children:[Object(T.jsx)(Q.a.Link,{className:"w-100",children:Object(T.jsx)(K.a,{className:"element-to-hide-over-350",onSubmit:function(t){t.preventDefault(),e.props.search(t.target.searchInput.value)},children:Object(T.jsx)(Y.a,{type:"search",placeholder:"Cerca",name:"searchInput",className:"me-2","aria-label":"Cerca"})})}),Object(T.jsx)(Q.a.Link,{href:"/public/login.html",children:"login"})]})}}]),s}(i.a.Component),Z=s(264),$=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),a=t.call(this,e),"product"==e.type?a.state={filter1:["Disponibilit\xe0","Tutti","Disponibili","Non dispobili"],choise1:1,filter2:["Ordina per","Prezzo crescente","Prezzo descrescente"],choise2:1}:"reservation"==e.type&&(a.state={filter1:["Disponibilit\xe0","Tutte","Prenotate","Attive","Concluse"],choise1:1,filter2:["Ordina per","Data crescente","Data descrescente"],choise2:1}),a}return Object(o.a)(s,[{key:"render",value:function(){var e=this;return"user"==this.props.type?Object(T.jsx)(T.Fragment,{}):Object(T.jsxs)("div",{className:"row p-2",children:[Object(T.jsx)("div",{className:"col-6 d-flex flex-row align-items-center",style:{overflowX:"visible !important"},children:Object(T.jsxs)(Z.a,{children:[Object(T.jsx)(Z.a.Toggle,{children:this.state.filter1[0]}),Object(T.jsxs)(Z.a.Menu,{renderOnMount:!0,children:[Object(T.jsx)(Z.a.Item,{active:1==this.state.choise1,onClick:function(){e.setState({choise1:1}),e.props.show(1)},children:this.state.filter1[1]}),Object(T.jsx)(Z.a.Item,{active:2==this.state.choise1,onClick:function(){e.setState({choise1:2}),e.props.show(2)},children:this.state.filter1[2]}),Object(T.jsx)(Z.a.Item,{active:3==this.state.choise1,onClick:function(){e.setState({choise1:3}),e.props.show(3)},children:this.state.filter1[3]}),"reservation"==this.props.type?Object(T.jsx)(Z.a.Item,{active:4==this.state.choise1,onClick:function(){e.setState({choise1:4}),e.props.show(4)},children:this.state.filter1[4]}):Object(T.jsx)(T.Fragment,{})]})]})}),Object(T.jsx)("div",{className:"col-6 d-flex flex-row-reverse align-items-center",children:Object(T.jsxs)(Z.a,{children:[Object(T.jsx)(Z.a.Toggle,{children:this.state.filter2[0]}),Object(T.jsxs)(Z.a.Menu,{children:[Object(T.jsx)(Z.a.Item,{active:1==this.state.choise2,onClick:function(t){e.setState({choise2:1}),e.props.sort(!0)},children:this.state.filter2[1]}),Object(T.jsx)(Z.a.Item,{active:2==this.state.choise2,onClick:function(){e.setState({choise2:2}),e.props.sort(!1)},children:this.state.filter2[2]})]})]})})]})}}]),s}(i.a.Component),ee=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={isAuthenticated:e.isAuthenticated},a}return Object(o.a)(s,[{key:"componentWillReceiveProps",value:function(e){this.setState({isAuthenticated:e.isAuthenticated})}},{key:"render",value:function(){var e=this;return Object(T.jsxs)("div",{children:[Object(T.jsx)(G.a,{className:"bg-light w-100",expand:"false",children:Object(T.jsxs)(J.a,{fluid:!0,children:[Object(T.jsx)(G.a.Brand,{href:"/user/index.html",className:"p-0 m-0",children:Object(T.jsx)("img",{src:"https://cdn.discordapp.com/attachments/888778821262790686/926860373775249469/nolonoloplus.png",alt:"logo NoloNoloPlus",height:"45px"})}),Object(T.jsx)(K.a,{className:"element-to-hide-under-350",style:{width:"60%"},onSubmit:function(t){t.preventDefault(),e.props.search(t.target.searchInput.value)},children:Object(T.jsx)(Y.a,{type:"search",placeholder:"Cerca... ",name:"searchInput",className:"me-2","aria-label":"Cerca prodotti"})}),Object(T.jsx)(G.a.Toggle,{style:{height:"45px",width:"45px",padding:"0px"},"aria-controls":"navbarScroll"}),Object(T.jsx)(G.a.Collapse,{id:"navbarScroll",children:Object(T.jsx)(X,{isAuthenticated:this.state.isAuthenticated})})]})}),Object(T.jsx)($,{show:this.props.show,sort:this.props.sort,type:this.props.type})]})}}]),s}(i.a.Component),te=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={products:[],filteredProducts:[],isAuthenticated:!1},a.searchProducts=a.searchProducts.bind(Object(d.a)(a)),a.showProducts=a.showProducts.bind(Object(d.a)(a)),a.sortProducts=a.sortProducts.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"searchProducts",value:function(e){var t=this;console.log("searchProducts("+e+")"),m.getAllProduct(e,!0).then((function(e){t.setState({products:e.data.data,filteredProducts:e.data.data})}))}},{key:"showProducts",value:function(e){console.log("showProducts("+e+")");var t=[];if(e>1){var s=2==e;for(var a in this.state.products)this.state.products[a].available==s&&t.push(this.state.products[a])}else t=this.state.products;this.setState({filteredProducts:t})}},{key:"sortProducts",value:function(e){console.log("sortProducts("+e+")");var t=this.state.products;t.sort((function(e,t){return e.price-t.price})),0==e&&t.reverse(),this.setState({products:t,filteredProducts:t})}},{key:"componentDidMount",value:function(){var e=this;this.searchProducts(""),j.a.get("jwt")&&m.getUser().then((function(){e.setState({isAuthenticated:!0})})).catch((function(){e.setState({isAuthenticated:!1})}))}},{key:"render",value:function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ee,{type:"product",search:this.searchProducts,show:this.showProducts,sort:this.sortProducts,isAuthenticated:this.state.isAuthenticated}),Object(T.jsx)(V,{type:"product",elements:this.state.filteredProducts,isAuthenticated:this.state.isAuthenticated})]})}}]),s}(i.a.Component),se=s(260),ae=s(152),ie=s(261),ne=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={userId:"",userName:"",userSurname:"",userBirthday:{day:"",month:"",year:""},userPhoneNumber:"",userEmail:"",userAddress:{street:"",number:"",city:""},userPayment:{cardType:"",cardName:"",cardSurname:"",cardExpireYear:"",cardExpireMonth:"",cardCCV:""},userSex:""},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){var e=this;m.getUser().then((function(t){e.setState({userId:t.data.data._id,userName:t.data.data.userName,userSurname:t.data.data.userName,userBirthday:t.data.data.birthday,userPhoneNumber:t.data.data.phoneNumber,userEmail:t.data.data.email,userAddress:t.data.data.address,userPayment:t.data.data.payment,userSex:t.data.data.sex})}))}},{key:"render",value:function(){return Object(T.jsx)(J.a,{className:"pt-2",children:Object(T.jsxs)(se.a,{children:[Object(T.jsx)(ae.a,{xs:"2",children:Object(T.jsx)("i",{className:"bi bi-person-circle",alt:"Bootstrap",role:"img","aria-label":"userIcon"})}),Object(T.jsx)(ae.a,{xs:"9",children:Object(T.jsx)(ie.a,{bordered:!0,hover:!0,children:Object(T.jsxs)("tbody",{children:[Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"User Id:"}),Object(T.jsx)("td",{children:this.state.userId})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"User:"}),Object(T.jsxs)("td",{children:[this.state.userName," ",this.state.userSurname]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"Birthday:"}),Object(T.jsxs)("td",{children:[this.state.userBirthday.year,"-",this.state.userBirthday.month,"-",this.state.userBirthday.day]})]}),Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{children:"Phone Number:"}),Object(T.jsx)("td",{children:this.state.userPhoneNumber})]})]})})})]})})}}]),s}(a.Component),re=function(e){Object(l.a)(s,e);var t=Object(h.a)(s);function s(e){var a;return Object(c.a)(this,s),(a=t.call(this,e)).state={reservations:[],filteredReservations:[],isAuthenticated:!1},a.searchReservations=a.searchReservations.bind(Object(d.a)(a)),a.showReservations=a.showReservations.bind(Object(d.a)(a)),a.sortReservations=a.sortReservations.bind(Object(d.a)(a)),a}return Object(o.a)(s,[{key:"searchReservations",value:function(e){var t=this;console.log("searchReservations("+e+")"),m.getAllReservation(e,!0).then((function(e){t.setState({reservations:e.data.obj,filteredReservations:e.data.obj})}))}},{key:"showReservations",value:function(e){console.log("showReservations("+e+")");var t=[];if(parseInt(e)>1)for(var s in this.state.reservations)switch(parseInt(e)){case 2:0==this.state.reservations[s].isTaken&&0==this.state.reservations[s].isReturned&&t.push(this.state.reservations[s]);break;case 3:1==this.state.reservations[s].isTaken&&0==this.state.reservations[s].isReturned&&t.push(this.state.reservations[s]);break;case 4:1==this.state.reservations[s].isTaken&&1==this.state.reservations[s].isReturned&&t.push(this.state.reservations[s]);break;default:return}else t=this.state.reservations;this.setState({filteredReservations:t})}},{key:"sortReservations",value:function(e){console.log("sortReservations("+e+")");var t=this.state.reservations;t.sort((function(e,t){return new Date(e.bookingDate.year,e.bookingDate.month,e.bookingDate.day)-new Date(t.bookingDate.year,t.bookingDate.month,t.bookingDate.day)})),0==e&&t.reverse(),this.setState({reservations:t,filteredReservation:t})}},{key:"componentDidMount",value:function(){var e=this;this.searchReservations(""),j.a.get("jwt")&&m.getUser().then((function(){e.setState({isAuthenticated:!0})})).catch((function(){e.setState({isAuthenticated:!1})}))}},{key:"render",value:function(){return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(ee,{type:"reservation",search:this.searchReservations,show:this.showReservations,sort:this.sortReservations,isAuthenticated:this.state.isAuthenticated}),Object(T.jsx)(V,{type:"reservation",elements:this.state.filteredReservations,isAuthenticated:this.state.isAuthenticated})]})}}]),s}(i.a.Component),ce=s(20);var oe=function(){return Object(T.jsx)("div",{className:"App",children:Object(T.jsxs)(ce.c,{children:[Object(T.jsx)(ce.a,{path:"/user/index.html",element:Object(T.jsx)(te,{})}),Object(T.jsx)(ce.a,{path:"/user/page",element:Object(T.jsx)(ne,{})}),Object(T.jsx)(ce.a,{path:"/user/reservation",element:Object(T.jsx)(re,{})})]})})},de=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,277)).then((function(t){var s=t.getCLS,a=t.getFID,i=t.getFCP,n=t.getLCP,r=t.getTTFB;s(e),a(e),i(e),n(e),r(e)}))},le=s(125);r.a.render(Object(T.jsx)(le.a,{children:Object(T.jsx)(oe,{})}),document.getElementById("root")),de()}},[[211,1,2]]]);
//# sourceMappingURL=main.1dc46134.chunk.js.map