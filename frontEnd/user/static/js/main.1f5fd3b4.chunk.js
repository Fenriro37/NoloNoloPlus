(this.webpackJsonpuser=this.webpackJsonpuser||[]).push([[0],{157:function(t,e,a){},158:function(t,e,a){},188:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),i=a(43),c=a.n(i),r=(a(157),a(158),a(19)),o=a(20),l=a(39),u=a(24),d=a(23),h=a(244),j=a(226),b=a(245),p=a(126),v=a(246),O=a(91),f=a.n(O),x=a(68),g=a.n(x),m=a(1),y=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={isAuthenticated:t.isAuthenticated},n.logout=n.logout.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"logout",value:function(){f.a.remove("jwt"),window.location.href=g.a.site202131Url+"/user/index.html"}},{key:"componentWillReceiveProps",value:function(t){this.setState({isAuthenticated:t.isAuthenticated})}},{key:"render",value:function(){return!0===this.state.isAuthenticated?Object(m.jsxs)("div",{className:"text-center",children:[Object(m.jsx)(v.a.Link,{href:"#action1",children:"Pagina personale"}),Object(m.jsx)(v.a.Link,{href:"#action2",children:"Prenotazioni effettuate"}),Object(m.jsx)(v.a.Link,{onClick:this.logout,children:"Logout"})]}):Object(m.jsx)("div",{className:"text-center",children:Object(m.jsx)(v.a.Link,{href:g.a.site202131Url+"/public/login.html",children:"Login"})})}}]),a}(s.a.Component),k=a(242),A=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(o.a)(a,[{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"row p-2",children:[Object(m.jsx)("div",{className:"col-6 d-flex flex-row align-items-center",children:Object(m.jsx)(b.a.Check,{type:"checkbox",label:"Disponibilit\xe0",className:"m-0",onChange:function(e){t.props.showOnlyAvailable(e.target.checked)}})}),Object(m.jsx)("div",{className:"col-6 d-flex flex-row-reverse align-items-center",children:Object(m.jsxs)(k.a,{children:[Object(m.jsx)(k.a.Toggle,{id:"dropdown-basic",children:"Ordina"}),Object(m.jsxs)(k.a.Menu,{children:[Object(m.jsx)(k.a.Item,{onClick:function(e){t.props.sort(!0)},children:"Prezzo crescente"}),Object(m.jsx)(k.a.Item,{onClick:function(e){t.props.sort(!1)},children:"Prezzo decrescente"})]})]})})]})}}]),a}(s.a.Component),P=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={isAuthenticated:t.isAuthenticated},n}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(t){this.setState({isAuthenticated:t.isAuthenticated})}},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{children:[Object(m.jsx)(h.a,{bg:"light",expand:"false",children:Object(m.jsxs)(j.a,{fluid:!0,children:[Object(m.jsx)(h.a.Brand,{href:g.a.site202131Url,children:Object(m.jsx)("img",{src:"https://cdn.discordapp.com/attachments/918079016651604009/918082983964061726/CAtena_montuosa.png",alt:"logo",height:"35"})}),Object(m.jsx)(b.a,{className:"d-flex",onSubmit:function(e){e.preventDefault(),t.props.search(e.target.searchInput.value)},children:Object(m.jsx)(p.a,{type:"search",placeholder:"Search",name:"searchInput",className:"me-2","aria-label":"Search"})}),Object(m.jsx)(h.a.Toggle,{"aria-controls":"navbarScroll"}),Object(m.jsx)(h.a.Collapse,{id:"navbarScroll",children:Object(m.jsx)(v.a,{className:"me-auto my-2 my-lg-0",navbarScroll:!0,children:Object(m.jsx)(y,{isAuthenticated:this.state.isAuthenticated})})})]})}),Object(m.jsx)(A,{showOnlyAvailable:this.props.showOnlyAvailable,sort:this.props.sort})]})}}]),a}(s.a.Component),D=a(4),w=a(243),S=a(240),C=a(227),N=a(253),I=a(241),R=a(128);function T(t,e){return Math.round((e-t)/864e5)+1}function z(t,e){return!!t.find((function(t){return new Date(t).getTime()==e.getTime()}))}Date.prototype.addDays=function(t){var e=new Date(this.valueOf());return e.setDate(e.getDate()+t),e};var L=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;Object(r.a)(this,a),n=e.call(this,t);var s=function(t){var e=0,a=[];for(e in t)for(var n=new Date(parseInt(t[e].startDate.year),parseInt(t[e].startDate.month)-1,parseInt(t[e].startDate.day)),s=new Date(parseInt(t[e].endDate.year),parseInt(t[e].endDate.month)-1,parseInt(t[e].endDate.day)),i=n;i<=s;)a.push(new Date(i)),i=i.addDays(1);return a}(t.bookings).map((function(t){return t.getTime()}));return n.state={value:[null,null],dates:s,bookings:t.bookings,price:t.finalPrice,isAuthenticated:t.isAuthenticated},n.disabledDays=n.disabledDays.bind(Object(l.a)(n)),n.checkDateRange=n.checkDateRange.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"disabledDays",value:function(t){return null==this.state.dates?null:this.state.dates.includes(t.getTime())}},{key:"checkDateRange",value:function(t){if(2==t.length&&null!=this.state.dates)for(var e=t[0],a=t[1];e<=a;){if(1==z(this.state.dates,e))return!1;e=e.addDays(1)}return!0}},{key:"componentWillReceiveProps",value:function(t){this.setState({isAuthenticated:t.isAuthenticated})}},{key:"render",value:function(){var t=this;return Object(m.jsxs)("div",{className:"pb-0 mt-2",children:[Object(m.jsx)(C.b,{dateAdapter:S.a,children:Object(m.jsx)(I.a,{disablePast:!0,shouldDisableDate:this.disabledDays,startText:"Data di inizio",endText:"Data di fine",value:this.state.value,onChange:function(e){t.setState({value:e})},renderInput:function(t,e){return Object(m.jsxs)(s.a.Fragment,{children:[Object(m.jsx)(w.a,Object(D.a)({},t)),Object(m.jsx)(N.a,{sx:{mx:1},children:" a "}),Object(m.jsx)(w.a,Object(D.a)({},e))]})},inputFormat:"dd/MM/yyyy",onAccept:function(e){t.checkDateRange(e)}})}),Object(m.jsxs)("div",{children:["Giorni di noleggio: ",this.state.value[0]&&this.state.value[1]?T(this.state.value[0],this.state.value[1]):0]}),Object(m.jsxs)("div",{children:["Prezzo totale: ",this.state.value[0]&&this.state.value[1]?(T(this.state.value[0],this.state.value[1])*this.state.price).toFixed(2):0," \u20ac"]}),this.state.isAuthenticated?Object(m.jsx)(R.a,{className:"mt-2 w-100",onClick:function(){console.log("Prenotazione!")},href:"/user/index.html",children:"Prenota ora"}):Object(m.jsx)(R.a,{className:"mt-2 w-100",href:"/public/login.html",children:"Accedi per prenotare"})]})}}]),a}(s.a.Component),U=a(249),F=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(o.a)(a,[{key:"render",value:function(){var t=parseInt(this.props.quality);return Object(m.jsxs)("div",{className:"mb-1 d-flex align-items-center",children:["Qualit\xe0:",Object(m.jsx)(U.a,{name:"read-only",value:t,max:3,readOnly:!0})]})}}]),a}(s.a.Component),M=a(251),W=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){return Object(r.a)(this,a),e.call(this,t)}return Object(o.a)(a,[{key:"render",value:function(){var t=this.props.tags.map((function(t){return Object(m.jsx)(M.a,{className:"m-1",label:t},t)}));return Object(m.jsx)("div",{className:"d-flex justify-content-center",children:t})}}]),a}(s.a.Component),q=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={product:t.product,discountedPrice:t.product.discount.onSaleType?(t.product.price*(100-t.product.discount.onSaleValue)/100).toFixed(2):(t.product.price-t.product.discount.onSaleValue).toFixed(2),isAuthenticated:t.isAuthenticated},n}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(t){this.setState({isAuthenticated:t.isAuthenticated})}},{key:"render",value:function(){return Object(m.jsx)("div",{className:"m-2 bg-light rounded-3 border border-dark",children:Object(m.jsxs)(h.a,{bg:"trasparent",expand:"false",children:[Object(m.jsx)(h.a.Toggle,{"aria-controls":"navbarScroll",className:"border-0 w-100",children:Object(m.jsxs)("div",{className:"row m-0 h-100",children:[Object(m.jsx)("div",{className:"col-5 p-0 d-flex align-items-center",children:Object(m.jsx)("img",{className:"img-fluid img-responsive align-self-center",src:this.state.product.image,alt:"Immagine","max-width":"100%","max-height":"100%"})}),Object(m.jsxs)("div",{className:"col-7 bg-trasparent align-self-center",style:{paddingRight:"0"},children:[Object(m.jsx)("div",{className:"text-truncate",children:this.state.product.title}),Object(m.jsx)("div",{children:this.state.product.brand}),this.state.product.discount.onSale?Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{style:{color:"red"},children:[this.state.discountedPrice," \u20ac ",Object(m.jsx)("span",{style:{fontSize:"0.75em"},children:"al giorno"})]}),Object(m.jsxs)("div",{style:{textDecorationLine:"line-through",fontSize:"0.75em"},children:[this.state.product.price," \u20ac"]})]}):Object(m.jsxs)("div",{children:[this.state.product.price," \u20ac ",Object(m.jsx)("span",{style:{fontSize:"0.75em"},children:"al giorno"})]})]})]})}),Object(m.jsx)(h.a.Collapse,{id:"navbarScroll",children:Object(m.jsxs)(v.a,{className:"me-auto p-2 pb-0",navbarScroll:!0,children:[Object(m.jsx)(W,{tags:this.state.product.tags}),Object(m.jsx)("div",{style:{"text-align":"justify"},children:this.state.product.description}),Object(m.jsx)(F,{quality:this.state.product.quality}),this.state.product.available?Object(m.jsx)(L,{bookings:this.state.product.bookings,finalPrice:this.state.product.discount.onSale?this.state.discountedPrice:this.state.product.price,isAuthenticated:this.state.isAuthenticated}):Object(m.jsx)(R.a,{disabled:!0,children:"Prodotto non disponibile"})]})})]})})}}]),a}(s.a.Component),B=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={isAuthenticated:t.isAuthenticated},n}return Object(o.a)(a,[{key:"componentWillReceiveProps",value:function(t){this.setState({isAuthenticated:t.isAuthenticated})}},{key:"render",value:function(){var t=this;if(0===this.props.products.length)return Object(m.jsx)("div",{});var e=this.props.products.map((function(e){return Object(m.jsx)(q,{product:e,isAuthenticated:t.state.isAuthenticated},e._id)}));return Object(m.jsx)("div",{children:e})}}]),a}(s.a.Component),J=a(133),V=a.n(J).a.create({baseURL:g.a.site202131Url,headers:{"Content-type":"application/json",dataType:"jsonp",withCredentials:!0}}),_=new(function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,[{key:"test",value:function(){return V.get("/test")}},{key:"login",value:function(t,e){var a={email:t,plainTextPassword:e};return V.post("/api/public/login",a)}},{key:"signUp",value:function(){}},{key:"getUser",value:function(t){var e=t?"?id="+t:"";return V.get("/api/user/"+e)}},{key:"postUser",value:function(t,e){return V.post("/api/user?id="+t,e)}},{key:"getProduct",value:function(t){return V.get("/api/product/?id="+t)}},{key:"getAllProduct",value:function(t,e){return V.get("/api/product/all?filter="+t+"&&sort="+e)}},{key:"getReservation",value:function(t){return V.get("/api/reservation/?id="+t)}},{key:"getAllReservation",value:function(t,e){return V.get("/api/reservation/all",{filter:t,sort:e})}},{key:"postReservation",value:function(){}}]),t}()),E=function(t){Object(u.a)(a,t);var e=Object(d.a)(a);function a(t){var n;return Object(r.a)(this,a),(n=e.call(this,t)).state={products:[],filteredProducts:[],isAuthenticated:!1},n.searchProducts=n.searchProducts.bind(Object(l.a)(n)),n.showOnlyAvailableProducts=n.showOnlyAvailableProducts.bind(Object(l.a)(n)),n.sortProducts=n.sortProducts.bind(Object(l.a)(n)),n}return Object(o.a)(a,[{key:"searchProducts",value:function(t){var e=this;console.log("searchProducts("+t+")"),_.getAllProduct(t,!0).then((function(t){e.setState({products:t.data.data,filteredProducts:t.data.data})}))}},{key:"showOnlyAvailableProducts",value:function(t){console.log("showOnlyAvailableProducts("+t+")");var e=[];if(1==t)for(var a in this.state.products)this.state.products[a].available==t&&e.push(this.state.products[a]);else e=this.state.products;this.setState({filteredProducts:e})}},{key:"sortProducts",value:function(t){console.log("sortProducts("+t+")");var e=this.state.products;e.sort((function(t,e){return t.price-e.price})),0==t&&e.reverse(),this.setState({products:e,filteredProducts:e})}},{key:"componentDidMount",value:function(){var t=this;_.getAllProduct("",!0).then((function(e){t.setState({products:e.data.data,filteredProducts:e.data.data})})),f.a.get("jwt")&&_.getUser().then((function(){t.setState({isAuthenticated:!0})})).catch((function(){t.setState({isAuthenticated:!1})}))}},{key:"render",value:function(){return Object(m.jsxs)("div",{children:[Object(m.jsx)(P,{search:this.searchProducts,showOnlyAvailable:this.showOnlyAvailableProducts,sort:this.sortProducts,isAuthenticated:this.state.isAuthenticated}),Object(m.jsx)(B,{products:this.state.filteredProducts,isAuthenticated:this.state.isAuthenticated})]})}}]),a}(s.a.Component);a(187);var G=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(E,{})})},Q=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,256)).then((function(e){var a=e.getCLS,n=e.getFID,s=e.getFCP,i=e.getLCP,c=e.getTTFB;a(t),n(t),s(t),i(t),c(t)}))};c.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(G,{})}),document.getElementById("root")),Q()},68:function(t,e){t.exports={site202131Url:"http://localhost:8081"}}},[[188,1,2]]]);
//# sourceMappingURL=main.1f5fd3b4.chunk.js.map